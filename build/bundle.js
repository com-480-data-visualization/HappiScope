var app=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function a(t){t.forEach(r)}function o(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function c(t,e,n){t.$$.on_destroy.push(l(e,n))}function u(t,e,n,r){if(t){const i=d(t,e,n,r);return t[0](i)}}function d(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function f(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,a){if(i){const o=d(e,n,r,a);t.p(o,i)}}function p(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function v(t){const e={};for(const n in t)"$"!==n[0]&&(e[n]=t[n]);return e}function m(t,e){const n={};e=new Set(e);for(const r in t)e.has(r)||"$"===r[0]||(n[r]=t[r]);return n}function g(t){const e="string"==typeof t&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const y="undefined"!=typeof window;let x=y?()=>window.performance.now():()=>Date.now(),b=y?t=>requestAnimationFrame(t):t;const w=new Set;function _(t){w.forEach((e=>{e.c(t)||(w.delete(e),e.f())})),0!==w.size&&b(_)}function $(t){let e;return 0===w.size&&b(_),{promise:new Promise((n=>{w.add(e={c:t,f:n})})),abort(){w.delete(e)}}}const k="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function j(t,e){t.appendChild(e)}function M(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function C(t){const e=A("style");return function(t,e){j(t.head||t,e),e.sheet}(M(t),e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function E(t){t.parentNode&&t.parentNode.removeChild(t)}function z(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function A(t){return document.createElement(t)}function N(t){return document.createTextNode(t)}function T(){return N(" ")}function D(){return N("")}function L(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function P(t){return function(e){return e.preventDefault(),t.call(this,e)}}function H(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const I=["width","height"];function F(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set&&-1===I.indexOf(r)?t[r]=e[r]:H(t,r,e[r])}function R(t,e){e=""+e,t.data!==e&&(t.data=e)}function O(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function q(t,e,n){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e)return void(r.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}function B(t,e,n){t.classList[n?"add":"remove"](e)}function W(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}function G(t,e){return new t(e)}const Y=new Map;let U,V=0;function X(t,e,n,r,i,a,o,s=0){const l=16.666/r;let c="{\n";for(let t=0;t<=1;t+=l){const r=e+(n-e)*a(t);c+=100*t+`%{${o(r,1-r)}}\n`}const u=c+`100% {${o(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,f=M(t),{stylesheet:h,rules:p}=Y.get(f)||function(t,e){const n={stylesheet:C(e),rules:{}};return Y.set(t,n),n}(f,t);p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const v=t.style.animation||"";return t.style.animation=`${v?`${v}, `:""}${d} ${r}ms linear ${i}ms 1 both`,V+=1,d}function K(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),V-=i,V||b((()=>{V||(Y.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&E(e)})),Y.clear())})))}function Z(t){U=t}function J(){if(!U)throw new Error("Function called outside component initialization");return U}function Q(t){J().$$.on_mount.push(t)}function tt(t){J().$$.after_update.push(t)}function et(t,e){return J().$$.context.set(t,e),e}function nt(t){return J().$$.context.get(t)}const rt=[],it=[];let at=[];const ot=[],st=Promise.resolve();let lt=!1;function ct(t){at.push(t)}const ut=new Set;let dt,ft=0;function ht(){if(0!==ft)return;const t=U;do{try{for(;ft<rt.length;){const t=rt[ft];ft++,Z(t),pt(t.$$)}}catch(t){throw rt.length=0,ft=0,t}for(Z(null),rt.length=0,ft=0;it.length;)it.pop()();for(let t=0;t<at.length;t+=1){const e=at[t];ut.has(e)||(ut.add(e),e())}at.length=0}while(rt.length);for(;ot.length;)ot.pop()();lt=!1,ut.clear(),Z(t)}function pt(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ct)}}function vt(){return dt||(dt=Promise.resolve(),dt.then((()=>{dt=null}))),dt}function mt(t,e,n){t.dispatchEvent(W(`${e?"intro":"outro"}${n}`))}const gt=new Set;let yt;function xt(){yt={r:0,c:[],p:yt}}function bt(){yt.r||a(yt.c),yt=yt.p}function wt(t,e){t&&t.i&&(gt.delete(t),t.i(e))}function _t(t,e,n,r){if(t&&t.o){if(gt.has(t))return;gt.add(t),yt.c.push((()=>{gt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const $t={duration:0};function kt(n,r,i){const a={direction:"in"};let s,l,c=r(n,i,a),u=!1,d=0;function f(){s&&K(n,s)}function h(){const{delay:r=0,duration:i=300,easing:a=e,tick:o=t,css:h}=c||$t;h&&(s=X(n,0,1,i,r,a,h,d++)),o(0,1);const p=x()+r,v=p+i;l&&l.abort(),u=!0,ct((()=>mt(n,!0,"start"))),l=$((t=>{if(u){if(t>=v)return o(1,0),mt(n,!0,"end"),f(),u=!1;if(t>=p){const e=a((t-p)/i);o(e,1-e)}}return u}))}let p=!1;return{start(){p||(p=!0,K(n),o(c)?(c=c(a),vt().then(h)):h())},invalidate(){p=!1},end(){u&&(f(),u=!1)}}}function jt(t,e){const n=e.token={};function r(t,r,i,a){if(e.token!==n)return;e.resolved=a;let o=e.ctx;void 0!==i&&(o=o.slice(),o[i]=a);const s=t&&(e.current=t)(o);let l=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(xt(),_t(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),bt())})):e.block.d(1),s.c(),wt(s,1),s.m(e.mount(),e.anchor),l=!0),e.block=s,e.blocks&&(e.blocks[r]=s),l&&ht()}if(!(i=t)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}else{const n=J();if(t.then((t=>{Z(n),r(e.then,1,e.value,t),Z(null)}),(t=>{if(Z(n),r(e.catch,2,e.error,t),Z(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}var i}function Mt(t,e){const n={},r={},i={$$scope:1};let a=t.length;for(;a--;){const o=t[a],s=e[a];if(s){for(const t in o)t in s||(r[t]=1);for(const t in s)i[t]||(n[t]=s[t],i[t]=1);t[a]=s}else for(const t in o)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function Ct(t){return"object"==typeof t&&null!==t?t:{}}function St(t){t&&t.c()}function Et(t,e,n,i){const{fragment:s,after_update:l}=t.$$;s&&s.m(e,n),i||ct((()=>{const e=t.$$.on_mount.map(r).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...e):a(e),t.$$.on_mount=[]})),l.forEach(ct)}function zt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];at.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),at=e}(n.after_update),a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function At(t,e){-1===t.$$.dirty[0]&&(rt.push(t),lt||(lt=!0,st.then(ht)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Nt(e,n,r,o,s,l,c,u=[-1]){const d=U;Z(e);const f=e.$$={fragment:null,ctx:[],props:l,update:t,not_equal:s,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let h=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),h&&At(e,t)),n})):[],f.update(),h=!0,a(f.before_update),f.fragment=!!o&&o(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(E)}else f.fragment&&f.fragment.c();n.intro&&wt(e.$$.fragment),Et(e,n.target,n.anchor,n.customElement),ht()}Z(d)}class Tt{$destroy(){zt(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Dt={},Lt={},Pt={},Ht=/^:(.+)/,It=t=>t.replace(/(^\/+|\/+$)/g,"").split("/"),Ft=t=>t.replace(/(^\/+|\/+$)/g,""),Rt=(t,e)=>({route:t,score:t.default?0:It(t.path).reduce(((t,e)=>(t+=4,""===e?t+=1:Ht.test(e)?t+=2:"*"===e[0]?t-=5:t+=3,t)),0),index:e}),Ot=(t,e)=>{let n,r;const[i]=e.split("?"),a=It(i),o=""===a[0],s=(t=>t.map(Rt).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index)))(t);for(let t=0,i=s.length;t<i;t++){const i=s[t].route;let l=!1;if(i.default){r={route:i,params:{},uri:e};continue}const c=It(i.path),u={},d=Math.max(a.length,c.length);let f=0;for(;f<d;f++){const t=c[f],e=a[f];if(t&&"*"===t[0]){u["*"===t?"*":t.slice(1)]=a.slice(f).map(decodeURIComponent).join("/");break}if(void 0===e){l=!0;break}const n=Ht.exec(t);if(n&&!o){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){l=!0;break}}if(!l){n={route:i,params:u,uri:"/"+a.slice(0,f).join("/")};break}}return n||r||null},qt=(t,e)=>t+(e?`?${e}`:""),Bt=(t,e)=>`${Ft("/"===e?t:`${Ft(t)}/${Ft(e)}`)}/`,Wt=()=>"undefined"!=typeof window&&"document"in window&&"location"in window,Gt=t=>({active:4&t}),Yt=t=>({active:!!t[2]});function Ut(t){let e,r,i,a;const o=t[17].default,s=u(o,t,t[16],Yt);let l=[{href:t[0]},{"aria-current":t[2]},t[1],t[6]],c={};for(let t=0;t<l.length;t+=1)c=n(c,l[t]);return{c(){e=A("a"),s&&s.c(),F(e,c)},m(n,o){S(n,e,o),s&&s.m(e,null),r=!0,i||(a=L(e,"click",t[5]),i=!0)},p(t,[n]){s&&s.p&&(!r||65540&n)&&h(s,o,t,t[16],r?f(o,t[16],n,Gt):p(t[16]),Yt),F(e,c=Mt(l,[(!r||1&n)&&{href:t[0]},(!r||4&n)&&{"aria-current":t[2]},2&n&&t[1],64&n&&t[6]]))},i(t){r||(wt(s,t),r=!0)},o(t){_t(s,t),r=!1},d(t){t&&E(e),s&&s.d(t),i=!1,a()}}}function Vt(t,e,r){let i;const a=["to","replace","state","getProps","preserveScroll"];let o,s,l=m(e,a),{$$slots:u={},$$scope:d}=e,{to:f="#"}=e,{replace:h=!1}=e,{state:p={}}=e,{getProps:g=()=>({})}=e,{preserveScroll:y=!1}=e;const x=nt(Dt);c(t,x,(t=>r(14,o=t)));const{base:b}=nt(Lt);c(t,b,(t=>r(15,s=t)));const{navigate:w}=nt(Pt),_=function(){const t=J();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=W(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,a)})),!a.defaultPrevented}return!0}}();let $,k,j,M;return t.$$set=t=>{e=n(n({},e),v(t)),r(6,l=m(e,a)),"to"in t&&r(7,f=t.to),"replace"in t&&r(8,h=t.replace),"state"in t&&r(9,p=t.state),"getProps"in t&&r(10,g=t.getProps),"preserveScroll"in t&&r(11,y=t.preserveScroll),"$$scope"in t&&r(16,d=t.$$scope)},t.$$.update=()=>{32896&t.$$.dirty&&r(0,$=((t,e)=>{if(t.startsWith("/"))return t;const[n,r]=t.split("?"),[i]=e.split("?"),a=It(n),o=It(i);if(""===a[0])return qt(i,r);if(!a[0].startsWith(".")){const t=o.concat(a).join("/");return qt(("/"===i?"":"/")+t,r)}const s=o.concat(a),l=[];return s.forEach((t=>{".."===t?l.pop():"."!==t&&l.push(t)})),qt("/"+l.join("/"),r)})(f,s.uri)),16385&t.$$.dirty&&r(12,k=o.pathname.startsWith($)),16385&t.$$.dirty&&r(13,j=$===o.pathname),8192&t.$$.dirty&&r(2,i=j?"page":void 0),r(1,M=g({location:o,href:$,isPartiallyCurrent:k,isCurrent:j,existingProps:l}))},[$,M,i,x,b,t=>{if(_("click",t),(t=>!t.defaultPrevented&&0===t.button&&!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey))(t)){t.preventDefault();const e=o.pathname===$||h;w($,{state:p,replace:e,preserveScroll:y})}},l,f,h,p,g,y,k,j,o,s,d,u]}class Xt extends Tt{constructor(t){super(),Nt(this,t,Vt,Ut,s,{to:7,replace:8,state:9,getProps:10,preserveScroll:11})}}const Kt=t=>({params:4&t}),Zt=t=>({params:t[2]});function Jt(t){let e,n,r,i;const a=[te,Qt],o=[];function s(t,e){return t[0]?0:1}return e=s(t),n=o[e]=a[e](t),{c(){n.c(),r=D()},m(t,n){o[e].m(t,n),S(t,r,n),i=!0},p(t,i){let l=e;e=s(t),e===l?o[e].p(t,i):(xt(),_t(o[l],1,1,(()=>{o[l]=null})),bt(),n=o[e],n?n.p(t,i):(n=o[e]=a[e](t),n.c()),wt(n,1),n.m(r.parentNode,r))},i(t){i||(wt(n),i=!0)},o(t){_t(n),i=!1},d(t){o[e].d(t),t&&E(r)}}}function Qt(t){let e;const n=t[8].default,r=u(n,t,t[7],Zt);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||132&i)&&h(r,n,t,t[7],e?f(n,t[7],i,Kt):p(t[7]),Zt)},i(t){e||(wt(r,t),e=!0)},o(t){_t(r,t),e=!1},d(t){r&&r.d(t)}}}function te(t){let e,n,r,i={ctx:t,current:null,token:null,hasCatch:!1,pending:re,then:ne,catch:ee,value:12,blocks:[,,,]};return jt(n=t[0],i),{c(){e=D(),i.block.c()},m(t,n){S(t,e,n),i.block.m(t,i.anchor=n),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(e,r){t=e,i.ctx=t,1&r&&n!==(n=t[0])&&jt(n,i)||function(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}(i,t,r)},i(t){r||(wt(i.block),r=!0)},o(t){for(let t=0;t<3;t+=1){_t(i.blocks[t])}r=!1},d(t){t&&E(e),i.block.d(t),i.token=null,i=null}}}function ee(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function ne(t){let e,r,i;const a=[t[2],t[3]];var o=t[12]?.default||t[12];function s(t){let e={};for(let t=0;t<a.length;t+=1)e=n(e,a[t]);return{props:e}}return o&&(e=G(o,s())),{c(){e&&St(e.$$.fragment),r=D()},m(t,n){e&&Et(e,t,n),S(t,r,n),i=!0},p(t,n){const i=12&n?Mt(a,[4&n&&Ct(t[2]),8&n&&Ct(t[3])]):{};if(1&n&&o!==(o=t[12]?.default||t[12])){if(e){xt();const t=e;_t(t.$$.fragment,1,0,(()=>{zt(t,1)})),bt()}o?(e=G(o,s()),St(e.$$.fragment),wt(e.$$.fragment,1),Et(e,r.parentNode,r)):e=null}else o&&e.$set(i)},i(t){i||(e&&wt(e.$$.fragment,t),i=!0)},o(t){e&&_t(e.$$.fragment,t),i=!1},d(t){t&&E(r),e&&zt(e,t)}}}function re(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function ie(t){let e,n,r=t[1]&&t[1].route===t[5]&&Jt(t);return{c(){r&&r.c(),e=D()},m(t,i){r&&r.m(t,i),S(t,e,i),n=!0},p(t,[n]){t[1]&&t[1].route===t[5]?r?(r.p(t,n),2&n&&wt(r,1)):(r=Jt(t),r.c(),wt(r,1),r.m(e.parentNode,e)):r&&(xt(),_t(r,1,1,(()=>{r=null})),bt())},i(t){n||(wt(r),n=!0)},o(t){_t(r),n=!1},d(t){r&&r.d(t),t&&E(e)}}}function ae(t,e,r){let i,{$$slots:a={},$$scope:o}=e,{path:s=""}=e,{component:l=null}=e,u={},d={};const{registerRoute:f,unregisterRoute:h,activeRoute:p}=nt(Lt);c(t,p,(t=>r(1,i=t)));const m={path:s,default:""===s};var g;return f(m),g=()=>{h(m)},J().$$.on_destroy.push(g),t.$$set=t=>{r(11,e=n(n({},e),v(t))),"path"in t&&r(6,s=t.path),"component"in t&&r(0,l=t.component),"$$scope"in t&&r(7,o=t.$$scope)},t.$$.update=()=>{if(i&&i.route===m){r(2,u=i.params);const{component:t,path:n,...a}=e;r(3,d=a),t&&(t.toString().startsWith("class ")?r(0,l=t):r(0,l=t())),Wt()&&!i.preserveScroll&&window?.scrollTo(0,0)}},e=v(e),[l,i,u,d,p,m,s,o,a]}class oe extends Tt{constructor(t){super(),Nt(this,t,ae,ie,s,{path:6,component:0})}}const se=[];function le(e,n=t){let r;const i=new Set;function a(t){if(s(e,t)&&(e=t,r)){const t=!se.length;for(const t of i)t[1](),se.push(t,e);if(t){for(let t=0;t<se.length;t+=2)se[t][0](se[t+1]);se.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(o,s=t){const l=[o,s];return i.add(l),1===i.size&&(r=n(a)||t),o(e),()=>{i.delete(l),0===i.size&&r&&(r(),r=null)}}}}function ce(e,n,r){const i=!Array.isArray(e),s=i?[e]:e,c=n.length<2;return function(t,e){return{subscribe:le(t,e).subscribe}}(r,(e=>{let r=!1;const u=[];let d=0,f=t;const h=()=>{if(d)return;f();const r=n(i?u[0]:u,e);c?e(r):f=o(r)?r:t},p=s.map(((t,e)=>l(t,(t=>{u[e]=t,d&=~(1<<e),r&&h()}),(()=>{d|=1<<e}))));return r=!0,h(),function(){a(p),f(),r=!1}}))}const ue=t=>({...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}),de=(t=>{const e=[];let n=ue(t);return{get location(){return n},listen(r){e.push(r);const i=()=>{n=ue(t),r({location:n,action:"POP"})};return t.addEventListener("popstate",i),()=>{t.removeEventListener("popstate",i);const n=e.indexOf(r);e.splice(n,1)}},navigate(r,{state:i,replace:a=!1,preserveScroll:o=!1,blurActiveElement:s=!0}={}){i={...i,key:Date.now()+""};try{a?t.history.replaceState(i,"",r):t.history.pushState(i,"",r)}catch(e){t.location[a?"replace":"assign"](r)}n=ue(t),e.forEach((t=>t({location:n,action:"PUSH",preserveScroll:o}))),s&&document.activeElement.blur()}}})(Wt()?window:((t="/")=>{let e=0;const n=[{pathname:t,search:""}],r=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return r[e]},pushState(t,i,a){const[o,s=""]=a.split("?");e++,n.push({pathname:o,search:s}),r.push(t)},replaceState(t,i,a){const[o,s=""]=a.split("?");n[e]={pathname:o,search:s},r[e]=t}}}})()),fe=t=>({route:4&t,location:2&t}),he=t=>({route:t[2]&&t[2].uri,location:t[1]}),pe=t=>({route:4&t,location:2&t}),ve=t=>({route:t[2]&&t[2].uri,location:t[1]});function me(t){let e;const n=t[15].default,r=u(n,t,t[14],he);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||16390&i)&&h(r,n,t,t[14],e?f(n,t[14],i,fe):p(t[14]),he)},i(t){e||(wt(r,t),e=!0)},o(t){_t(r,t),e=!1},d(t){r&&r.d(t)}}}function ge(e){let n,r,i=e[1].pathname,a=ye(e);return{c(){a.c(),n=D()},m(t,e){a.m(t,e),S(t,n,e),r=!0},p(e,r){2&r&&s(i,i=e[1].pathname)?(xt(),_t(a,1,1,t),bt(),a=ye(e),a.c(),wt(a,1),a.m(n.parentNode,n)):a.p(e,r)},i(t){r||(wt(a),r=!0)},o(t){_t(a),r=!1},d(t){t&&E(n),a.d(t)}}}function ye(n){let r,i,s,l;const c=n[15].default,d=u(c,n,n[14],ve);return{c(){r=A("div"),d&&d.c()},m(t,e){S(t,r,e),d&&d.m(r,null),l=!0},p(t,e){d&&d.p&&(!l||16390&e)&&h(d,c,t,t[14],l?f(c,t[14],e,pe):p(t[14]),ve)},i(t){l||(wt(d,t),ct((()=>{l&&(s&&s.end(1),i=kt(r,n[3],{}),i.start())})),l=!0)},o(c){_t(d,c),i&&i.invalidate(),s=function(n,r,i){const s={direction:"out"};let l,c=r(n,i,s),u=!0;const d=yt;function f(){const{delay:r=0,duration:i=300,easing:o=e,tick:s=t,css:f}=c||$t;f&&(l=X(n,1,0,i,r,o,f));const h=x()+r,p=h+i;ct((()=>mt(n,!1,"start"))),$((t=>{if(u){if(t>=p)return s(0,1),mt(n,!1,"end"),--d.r||a(d.c),!1;if(t>=h){const e=o((t-h)/i);s(1-e,e)}}return u}))}return d.r+=1,o(c)?vt().then((()=>{c=c(s),f()})):f(),{end(t){t&&c.tick&&c.tick(1,0),u&&(l&&K(n,l),u=!1)}}}(r,n[3],{}),l=!1},d(t){t&&E(r),d&&d.d(t),t&&s&&s.end()}}}function xe(t){let e,n,r,i;const a=[ge,me],o=[];function s(t,e){return t[0]?0:1}return e=s(t),n=o[e]=a[e](t),{c(){n.c(),r=D()},m(t,n){o[e].m(t,n),S(t,r,n),i=!0},p(t,[i]){let l=e;e=s(t),e===l?o[e].p(t,i):(xt(),_t(o[l],1,1,(()=>{o[l]=null})),bt(),n=o[e],n?n.p(t,i):(n=o[e]=a[e](t),n.c()),wt(n,1),n.m(r.parentNode,r))},i(t){i||(wt(n),i=!0)},o(t){_t(n),i=!1},d(t){o[e].d(t),t&&E(r)}}}function be(t,e,n){let r,i,a,o,{$$slots:s={},$$scope:l}=e,{basepath:u="/"}=e,{url:d=null}=e,{viewtransition:f=null}=e,{history:h=de}=e;et(Pt,h);const p=nt(Dt),v=nt(Lt),m=le([]);c(t,m,(t=>n(12,i=t)));const g=le(null);c(t,g,(t=>n(2,o=t)));let y=!1;const x=p||le(d?{pathname:d}:h.location);c(t,x,(t=>n(1,r=t)));const b=v?v.routerBase:le({path:u,uri:u});c(t,b,(t=>n(13,a=t)));const w=ce([b,g],(([t,e])=>{if(!e)return t;const{path:n}=t,{route:r,uri:i}=e;return{path:r.default?n:r.path.replace(/\*.*$/,""),uri:i}}));let _=!1;return p||(Q((()=>h.listen((t=>{n(11,_=t.preserveScroll||!1),x.set(t.location)})))),et(Dt,x)),et(Lt,{activeRoute:g,base:b,routerBase:w,registerRoute:t=>{const{path:e}=a;let{path:n}=t;if(t._path=n,t.path=Bt(e,n),"undefined"==typeof window){if(y)return;const e=Ot([t],r.pathname);e&&(g.set(e),y=!0)}else m.update((e=>[...e,t]))},unregisterRoute:t=>{m.update((e=>e.filter((e=>e!==t))))}}),t.$$set=t=>{"basepath"in t&&n(8,u=t.basepath),"url"in t&&n(9,d=t.url),"viewtransition"in t&&n(0,f=t.viewtransition),"history"in t&&n(10,h=t.history),"$$scope"in t&&n(14,l=t.$$scope)},t.$$.update=()=>{if(8192&t.$$.dirty){const{path:t}=a;m.update((e=>e.map((e=>Object.assign(e,{path:Bt(t,e._path)})))))}if(6146&t.$$.dirty){const t=Ot(i,r.pathname);g.set(t?{...t,preserveScroll:_}:t)}},[f,r,o,(t,e,n)=>{const r=f(n);return"function"==typeof r?.fn?r.fn(t,r):r},m,g,x,b,u,d,h,_,i,a,l,s]}class we extends Tt{constructor(t){super(),Nt(this,t,be,xe,s,{basepath:8,url:9,viewtransition:0,history:10})}}function _e(t){const e=t-1;return e*e*e+1}function $e(t,{delay:n=0,duration:r=400,easing:i=e}={}){const a=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*a}}function ke(t,{delay:e=0,duration:n=400,easing:r=_e,x:i=0,y:a=0,opacity:o=0}={}){const s=getComputedStyle(t),l=+s.opacity,c="none"===s.transform?"":s.transform,u=l*(1-o),[d,f]=g(i),[h,p]=g(a);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*d}${f}, ${(1-t)*h}${p});\n\t\t\topacity: ${l-u*e}`}}const je="data/happiness_data.json",Me="data/time_series.json",Ce="data/correlations.json",Se="data/data_dictionary.json",Ee={};async function ze(t){if(Ee[t])return Ee[t];try{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to load data from ${t}: ${e.statusText}`);const n=await e.json();return Ee[t]=n,n}catch(e){return console.error(`Error loading data from ${t}:`,e),null}}async function Ae(){return await ze(je)}async function Ne(){const t=await Ae();return t?{data:t,years:[...new Set(t.map((t=>t.year)))].sort(((t,e)=>t-e))}:{data:[]}}async function Te(){return await ze(Se)}async function De(t){const e=await Ae();return e?e.filter((e=>e.year===t)):[]}async function Le(t,e="score"){const n=await async function(){return await ze(Me)}();if(!n)return null;const r={};return t.forEach((t=>{n[t]&&(r[t]=n[t].map((t=>({year:t.year,value:t[e]}))).sort(((t,e)=>t.year-e.year)))})),{metric:e,countries:t,data:r}}async function Pe(t,e="score",n=20){const r=await De(t);if(!r.length)return[];return r.filter((t=>void 0!==t[e]&&null!==t[e])).sort(((t,n)=>n[e]-t[e])).slice(0,n).map(((t,n)=>({rank:n+1,country:t.country,value:t[e],continent:t.continent,country_code:t.country_code})))}const He=le(null),Ie=le([]),Fe=le("score"),Re=le("map"),Oe=le(!0),qe=le(null),Be=le([]),We=le([{id:"score",label:"Happiness Score",color:"#3b82f6",description:"Overall happiness rating (0-10)"},{id:"gdp_per_capita",label:"GDP per Capita",color:"#10b981",description:"Economic output per person"},{id:"social_support",label:"Social Support",color:"#f59e0b",description:"Presence of support in times of need"},{id:"life_expectancy",label:"Healthy Life Expectancy",color:"#ef4444",description:"Expected years of healthy life"},{id:"freedom",label:"Freedom",color:"#8b5cf6",description:"Freedom to make life choices"},{id:"generosity",label:"Generosity",color:"#ec4899",description:"Donation and helping behavior"},{id:"corruption",label:"Corruption Perception",color:"#6b7280",description:"Perceived corruption in business/government"},{id:"hdi",label:"Human Development Index",color:"#0ea5e9",description:"Combined measure of health, education, and income"},{id:"population",label:"Population",color:"#f97316",description:"Total country population"},{id:"weighted_score",label:"Population-Weighted Score",color:"#8b5cf6",description:"Happiness score weighted by population size"}]),Ge=ce([Fe,We],(([t,e])=>e.find((e=>e.id===t))||e[0])),Ye=le({theme:"light",colorBlindMode:!1,language:"en",showDataLabels:!0,animationSpeed:"medium"}),Ue=le([]),Ve=le(null);async function Xe(){Oe.set(!0);try{const t=await Te();Ve.set(t);const e=await async function(){try{const t=await Ae();return t?[...new Set(t.map((t=>t.year)))].sort(((t,e)=>t-e)):[]}catch(t){return console.error("Error getting available years:",t),[]}}();if(Be.set(e),e&&e.length>0){const t=e[e.length-1];He.set(t)}Oe.set(!1)}catch(t){console.error("Error initializing app data:",t),qe.set(t.message||"Failed to load application data"),Oe.set(!1)}}function Ke(t){Ie.update((e=>{if(e.includes(t))return e.filter((e=>e!==t));return[...e,t].slice(-5)}))}function Ze(){Ie.set([])}function Je(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Qe(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tn(t){let e,n,r;function i(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<0?i=e+1:a=e}while(i<a)}return i}return 2!==t.length?(e=Je,n=(e,n)=>Je(t(e),n),r=(e,n)=>t(e)-n):(e=t===Je||t===Qe?t:en,n=t,r=t),{left:i,center:function(t,e,n=0,a=t.length){const o=i(t,e,n,a-1);return o>n&&r(t[o-1],e)>-r(t[o],e)?o-1:o},right:function(t,r,i=0,a=t.length){if(i<a){if(0!==e(r,r))return a;do{const e=i+a>>>1;n(t[e],r)<=0?i=e+1:a=e}while(i<a)}return i}}}function en(){return 0}const nn=tn(Je).right;tn((function(t){return null===t?NaN:+t})).center;var rn=nn;class an{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=e[r],a=t+i,o=Math.abs(t)<Math.abs(i)?t-(a-i):i-(a-t);o&&(e[n++]=o),t=a}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,r,i=this._n,a=0;if(i>0){for(a=t[--i];i>0&&(e=a,n=t[--i],a=e+n,r=n-(a-e),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(n=2*r,e=a+n,n==e-a&&(a=e))}return a}}class on extends Map{constructor(t,e=ln){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(sn(this,t))}has(t){return super.has(sn(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);t.has(r)&&(n=t.get(r),t.delete(r));return n}(this,t))}}function sn({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function ln(t){return null!==t&&"object"==typeof t?t.valueOf():t}const cn=Math.sqrt(50),un=Math.sqrt(10),dn=Math.sqrt(2);function fn(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=cn?10:a>=un?5:a>=dn?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/o,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*o,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?fn(t,e,2*n):[s,l,c]}function hn(t,e,n){return fn(t=+t,e=+e,n=+n)[2]}function pn(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function vn(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function mn(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function gn(t){return t}var yn=1e-6;function xn(t){return"translate("+t+",0)"}function bn(t){return"translate(0,"+t+")"}function wn(t){return e=>+t(e)}function _n(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function $n(){return!this.__axis}function kn(t,e){var n=[],r=null,i=null,a=6,o=6,s=3,l="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,c=1===t||4===t?-1:1,u=4===t||2===t?"x":"y",d=1===t||3===t?xn:bn;function f(f){var h=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,p=null==i?e.tickFormat?e.tickFormat.apply(e,n):gn:i,v=Math.max(a,0)+s,m=e.range(),g=+m[0]+l,y=+m[m.length-1]+l,x=(e.bandwidth?_n:wn)(e.copy(),l),b=f.selection?f.selection():f,w=b.selectAll(".domain").data([null]),_=b.selectAll(".tick").data(h,e).order(),$=_.exit(),k=_.enter().append("g").attr("class","tick"),j=_.select("line"),M=_.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),_=_.merge(k),j=j.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",c*a)),M=M.merge(k.append("text").attr("fill","currentColor").attr(u,c*v).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),f!==b&&(w=w.transition(f),_=_.transition(f),j=j.transition(f),M=M.transition(f),$=$.transition(f).attr("opacity",yn).attr("transform",(function(t){return isFinite(t=x(t))?d(t+l):this.getAttribute("transform")})),k.attr("opacity",yn).attr("transform",(function(t){var e=this.parentNode.__axis;return d((e&&isFinite(e=e(t))?e:x(t))+l)}))),$.remove(),w.attr("d",4===t||2===t?o?"M"+c*o+","+g+"H"+l+"V"+y+"H"+c*o:"M"+l+","+g+"V"+y:o?"M"+g+","+c*o+"V"+l+"H"+y+"V"+c*o:"M"+g+","+l+"H"+y),_.attr("opacity",1).attr("transform",(function(t){return d(x(t)+l)})),j.attr(u+"2",c*a),M.attr(u,c*v).text(p),b.filter($n).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),b.each((function(){this.__axis=x}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(a=o=+t,f):a},f.tickSizeInner=function(t){return arguments.length?(a=+t,f):a},f.tickSizeOuter=function(t){return arguments.length?(o=+t,f):o},f.tickPadding=function(t){return arguments.length?(s=+t,f):s},f.offset=function(t){return arguments.length?(l=+t,f):l},f}function jn(t){return kn(3,t)}function Mn(t){return kn(4,t)}var Cn={value:()=>{}};function Sn(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new En(r)}function En(t){this._=t}function zn(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function An(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Cn,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}En.prototype=Sn.prototype={constructor:En,on:function(t,e){var n,r,i=this._,a=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),o=-1,s=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(n=(t=a[o]).type)i[n]=An(i[n],t.name,e);else if(null==e)for(n in i)i[n]=An(i[n],t.name,null);return this}for(;++o<s;)if((n=(t=a[o]).type)&&(n=zn(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new En(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var Nn="http://www.w3.org/1999/xhtml",Tn={svg:"http://www.w3.org/2000/svg",xhtml:Nn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Dn(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Tn.hasOwnProperty(e)?{space:Tn[e],local:t}:t}function Ln(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Nn&&e.documentElement.namespaceURI===Nn?e.createElement(t):e.createElementNS(n,t)}}function Pn(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Hn(t){var e=Dn(t);return(e.local?Pn:Ln)(e)}function In(){}function Fn(t){return null==t?In:function(){return this.querySelector(t)}}function Rn(){return[]}function On(t){return null==t?Rn:function(){return this.querySelectorAll(t)}}function qn(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Bn(t){return function(){return this.matches(t)}}function Wn(t){return function(e){return e.matches(t)}}var Gn=Array.prototype.find;function Yn(){return this.firstElementChild}var Un=Array.prototype.filter;function Vn(){return Array.from(this.children)}function Xn(t){return new Array(t.length)}function Kn(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Zn(t,e,n,r,i,a){for(var o,s=0,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],r[s]=o):n[s]=new Kn(t,a[s]);for(;s<l;++s)(o=e[s])&&(i[s]=o)}function Jn(t,e,n,r,i,a,o){var s,l,c,u=new Map,d=e.length,f=a.length,h=new Array(d);for(s=0;s<d;++s)(l=e[s])&&(h[s]=c=o.call(l,l.__data__,s,e)+"",u.has(c)?i[s]=l:u.set(c,l));for(s=0;s<f;++s)c=o.call(t,a[s],s,a)+"",(l=u.get(c))?(r[s]=l,l.__data__=a[s],u.delete(c)):n[s]=new Kn(t,a[s]);for(s=0;s<d;++s)(l=e[s])&&u.get(h[s])===l&&(i[s]=l)}function Qn(t){return t.__data__}function tr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function er(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function nr(t){return function(){this.removeAttribute(t)}}function rr(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ir(t,e){return function(){this.setAttribute(t,e)}}function ar(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function or(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function sr(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function lr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function cr(t){return function(){this.style.removeProperty(t)}}function ur(t,e,n){return function(){this.style.setProperty(t,e,n)}}function dr(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function fr(t,e){return t.style.getPropertyValue(e)||lr(t).getComputedStyle(t,null).getPropertyValue(e)}function hr(t){return function(){delete this[t]}}function pr(t,e){return function(){this[t]=e}}function vr(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function mr(t){return t.trim().split(/^|\s+/)}function gr(t){return t.classList||new yr(t)}function yr(t){this._node=t,this._names=mr(t.getAttribute("class")||"")}function xr(t,e){for(var n=gr(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function br(t,e){for(var n=gr(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function wr(t){return function(){xr(this,t)}}function _r(t){return function(){br(this,t)}}function $r(t,e){return function(){(e.apply(this,arguments)?xr:br)(this,t)}}function kr(){this.textContent=""}function jr(t){return function(){this.textContent=t}}function Mr(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Cr(){this.innerHTML=""}function Sr(t){return function(){this.innerHTML=t}}function Er(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function zr(){this.nextSibling&&this.parentNode.appendChild(this)}function Ar(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nr(){return null}function Tr(){var t=this.parentNode;t&&t.removeChild(this)}function Dr(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Lr(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Pr(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,a=e.length;r<a;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Hr(t,e,n){return function(){var r,i=this.__on,a=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var o=0,s=i.length;o<s;++o)if((r=i[o]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=e);this.addEventListener(t.type,a,n),r={type:t.type,name:t.name,value:e,listener:a,options:n},i?i.push(r):this.__on=[r]}}function Ir(t,e,n){var r=lr(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Fr(t,e){return function(){return Ir(this,t,e)}}function Rr(t,e){return function(){return Ir(this,t,e.apply(this,arguments))}}Kn.prototype={constructor:Kn,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},yr.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Or=[null];function qr(t,e){this._groups=t,this._parents=e}function Br(){return new qr([[document.documentElement]],Or)}function Wr(t){return"string"==typeof t?new qr([[document.querySelector(t)]],[document.documentElement]):new qr([[t]],Or)}function Gr(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}qr.prototype=Br.prototype={constructor:qr,select:function(t){"function"!=typeof t&&(t=Fn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o,s=e[i],l=s.length,c=r[i]=new Array(l),u=0;u<l;++u)(a=s[u])&&(o=t.call(a,a.__data__,u,s))&&("__data__"in a&&(o.__data__=a.__data__),c[u]=o);return new qr(r,this._parents)},selectAll:function(t){t="function"==typeof t?qn(t):On(t);for(var e=this._groups,n=e.length,r=[],i=[],a=0;a<n;++a)for(var o,s=e[a],l=s.length,c=0;c<l;++c)(o=s[c])&&(r.push(t.call(o,o.__data__,c,s)),i.push(o));return new qr(r,i)},selectChild:function(t){return this.select(null==t?Yn:function(t){return function(){return Gn.call(this.children,t)}}("function"==typeof t?t:Wn(t)))},selectChildren:function(t){return this.selectAll(null==t?Vn:function(t){return function(){return Un.call(this.children,t)}}("function"==typeof t?t:Wn(t)))},filter:function(t){"function"!=typeof t&&(t=Bn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new qr(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,Qn);var n=e?Jn:Zn,r=this._parents,i=this._groups;"function"!=typeof t&&(t=function(t){return function(){return t}}(t));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),c=0;c<a;++c){var u=r[c],d=i[c],f=d.length,h=tr(t.call(u,u&&u.__data__,c,r)),p=h.length,v=s[c]=new Array(p),m=o[c]=new Array(p);n(u,d,v,m,l[c]=new Array(f),h,e);for(var g,y,x=0,b=0;x<p;++x)if(g=v[x]){for(x>=b&&(b=x+1);!(y=m[b])&&++b<p;);g._next=y||null}}return(o=new qr(o,r))._enter=s,o._exit=l,o},enter:function(){return new qr(this._enter||this._groups.map(Xn),this._parents)},exit:function(){return new qr(this._exit||this._groups.map(Xn),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,a=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?a.remove():n(a),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var c,u=n[l],d=r[l],f=u.length,h=s[l]=new Array(f),p=0;p<f;++p)(c=u[p]||d[p])&&(h[p]=c);for(;l<i;++l)s[l]=n[l];return new qr(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],a=i.length-1,o=i[a];--a>=0;)(r=i[a])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=er);for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o,s=n[a],l=s.length,c=i[a]=new Array(l),u=0;u<l;++u)(o=s[u])&&(c[u]=o);c.sort(e)}return new qr(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,a=e[n],o=0,s=a.length;o<s;++o)(i=a[o])&&t.call(i,i.__data__,o,a);return this},attr:function(t,e){var n=Dn(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?rr:nr:"function"==typeof e?n.local?sr:or:n.local?ar:ir)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?cr:"function"==typeof e?dr:ur)(t,e,null==n?"":n)):fr(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?hr:"function"==typeof e?vr:pr)(t,e)):this.node()[t]},classed:function(t,e){var n=mr(t+"");if(arguments.length<2){for(var r=gr(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?$r:e?wr:_r)(n,e))},text:function(t){return arguments.length?this.each(null==t?kr:("function"==typeof t?Mr:jr)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Cr:("function"==typeof t?Er:Sr)(t)):this.node().innerHTML},raise:function(){return this.each(zr)},lower:function(){return this.each(Ar)},append:function(t){var e="function"==typeof t?t:Hn(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Hn(t),r=null==e?Nr:"function"==typeof e?e:Fn(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Tr)},clone:function(t){return this.select(t?Lr:Dr)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,a=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=a.length;if(!(arguments.length<2)){for(s=e?Hr:Pr,r=0;r<o;++r)this.each(s(a[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,u=s.length;c<u;++c)for(r=0,l=s[c];r<o;++r)if((i=a[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?Rr:Fr)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],a=0,o=i.length;a<o;++a)(r=i[a])&&(yield r)}};const Yr={capture:!0,passive:!1};function Ur(t){t.preventDefault(),t.stopImmediatePropagation()}function Vr(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xr(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Kr(){}var Zr=.7,Jr=1/Zr,Qr="\\s*([+-]?\\d+)\\s*",ti="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ei="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ni=/^#([0-9a-f]{3,8})$/,ri=new RegExp(`^rgb\\(${Qr},${Qr},${Qr}\\)$`),ii=new RegExp(`^rgb\\(${ei},${ei},${ei}\\)$`),ai=new RegExp(`^rgba\\(${Qr},${Qr},${Qr},${ti}\\)$`),oi=new RegExp(`^rgba\\(${ei},${ei},${ei},${ti}\\)$`),si=new RegExp(`^hsl\\(${ti},${ei},${ei}\\)$`),li=new RegExp(`^hsla\\(${ti},${ei},${ei},${ti}\\)$`),ci={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ui(){return this.rgb().formatHex()}function di(){return this.rgb().formatRgb()}function fi(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ni.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?hi(e):3===n?new mi(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?pi(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?pi(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=ri.exec(t))?new mi(e[1],e[2],e[3],1):(e=ii.exec(t))?new mi(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=ai.exec(t))?pi(e[1],e[2],e[3],e[4]):(e=oi.exec(t))?pi(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=si.exec(t))?_i(e[1],e[2]/100,e[3]/100,1):(e=li.exec(t))?_i(e[1],e[2]/100,e[3]/100,e[4]):ci.hasOwnProperty(t)?hi(ci[t]):"transparent"===t?new mi(NaN,NaN,NaN,0):null}function hi(t){return new mi(t>>16&255,t>>8&255,255&t,1)}function pi(t,e,n,r){return r<=0&&(t=e=n=NaN),new mi(t,e,n,r)}function vi(t,e,n,r){return 1===arguments.length?((i=t)instanceof Kr||(i=fi(i)),i?new mi((i=i.rgb()).r,i.g,i.b,i.opacity):new mi):new mi(t,e,n,null==r?1:r);var i}function mi(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function gi(){return`#${wi(this.r)}${wi(this.g)}${wi(this.b)}`}function yi(){const t=xi(this.opacity);return`${1===t?"rgb(":"rgba("}${bi(this.r)}, ${bi(this.g)}, ${bi(this.b)}${1===t?")":`, ${t})`}`}function xi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function bi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wi(t){return((t=bi(t))<16?"0":"")+t.toString(16)}function _i(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ki(t,e,n,r)}function $i(t){if(t instanceof ki)return new ki(t.h,t.s,t.l,t.opacity);if(t instanceof Kr||(t=fi(t)),!t)return new ki;if(t instanceof ki)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(o=e===a?(n-r)/s+6*(n<r):n===a?(r-e)/s+2:(e-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new ki(o,s,l,t.opacity)}function ki(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function ji(t){return(t=(t||0)%360)<0?t+360:t}function Mi(t){return Math.max(0,Math.min(1,t||0))}function Ci(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}Vr(Kr,fi,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:ui,formatHex:ui,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return $i(this).formatHsl()},formatRgb:di,toString:di}),Vr(mi,vi,Xr(Kr,{brighter(t){return t=null==t?Jr:Math.pow(Jr,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?Zr:Math.pow(Zr,t),new mi(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new mi(bi(this.r),bi(this.g),bi(this.b),xi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:gi,formatHex:gi,formatHex8:function(){return`#${wi(this.r)}${wi(this.g)}${wi(this.b)}${wi(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:yi,toString:yi})),Vr(ki,(function(t,e,n,r){return 1===arguments.length?$i(t):new ki(t,e,n,null==r?1:r)}),Xr(Kr,{brighter(t){return t=null==t?Jr:Math.pow(Jr,t),new ki(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?Zr:Math.pow(Zr,t),new ki(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new mi(Ci(t>=240?t-240:t+120,i,r),Ci(t,i,r),Ci(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ki(ji(this.h),Mi(this.s),Mi(this.l),xi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=xi(this.opacity);return`${1===t?"hsl(":"hsla("}${ji(this.h)}, ${100*Mi(this.s)}%, ${100*Mi(this.l)}%${1===t?")":`, ${t})`}`}}));var Si=t=>()=>t;function Ei(t){return 1==(t=+t)?zi:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Si(isNaN(e)?n:e)}}function zi(t,e){var n=e-t;return n?function(t,e){return function(n){return t+n*e}}(t,n):Si(isNaN(t)?e:t)}var Ai=function t(e){var n=Ei(e);function r(t,e){var r=n((t=vi(t)).r,(e=vi(e)).r),i=n(t.g,e.g),a=n(t.b,e.b),o=zi(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}return r.gamma=t,r}(1);var Ni,Ti=(Ni=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,s=r<e-1?t[r+2]:2*a-i;return function(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}((n-r/e)*e,o,i,a,s)}},function(t){var e,n,r=t.length,i=new Array(r),a=new Array(r),o=new Array(r);for(e=0;e<r;++e)n=vi(t[e]),i[e]=n.r||0,a[e]=n.g||0,o[e]=n.b||0;return i=Ni(i),a=Ni(a),o=Ni(o),n.opacity=1,function(t){return n.r=i(t),n.g=a(t),n.b=o(t),n+""}});function Di(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(a){for(n=0;n<r;++n)i[n]=t[n]*(1-a)+e[n]*a;return i}}function Li(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=qi(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function Pi(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Hi(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Ii(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=qi(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}var Fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ri=new RegExp(Fi.source,"g");function Oi(t,e){var n,r,i,a=Fi.lastIndex=Ri.lastIndex=0,o=-1,s=[],l=[];for(t+="",e+="";(n=Fi.exec(t))&&(r=Ri.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:Hi(n,r)})),a=Ri.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function qi(t,e){var n,r=typeof e;return null==e||"boolean"===r?Si(e):("number"===r?Hi:"string"===r?(n=fi(e))?(e=n,Ai):Oi:e instanceof fi?Ai:e instanceof Date?Pi:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}(e)?Di:Array.isArray(e)?Li:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Ii:Hi)(t,e)}function Bi(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Wi,Gi=180/Math.PI,Yi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ui(t,e,n,r,i,a){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*Gi,skewX:Math.atan(l)*Gi,scaleX:o,scaleY:s}}function Vi(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],l=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var l=o.push("translate(",null,e,null,n);s.push({i:l-4,x:Hi(t,i)},{i:l-2,x:Hi(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,l),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Hi(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,l),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Hi(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,l),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:Hi(t,n)},{i:s-2,x:Hi(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,l),a=o=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var Xi=Vi((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Yi:Ui(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Ki=Vi((function(t){return null==t?Yi:(Wi||(Wi=document.createElementNS("http://www.w3.org/2000/svg","g")),Wi.setAttribute("transform",t),(t=Wi.transform.baseVal.consolidate())?Ui((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Yi)}),", ",")",")");function Zi(t){return((t=Math.exp(t))+1/t)/2}var Ji,Qi,ta=function t(e,n,r){function i(t,i){var a,o,s=t[0],l=t[1],c=t[2],u=i[0],d=i[1],f=i[2],h=u-s,p=d-l,v=h*h+p*p;if(v<1e-12)o=Math.log(f/c)/e,a=function(t){return[s+t*h,l+t*p,c*Math.exp(e*t*o)]};else{var m=Math.sqrt(v),g=(f*f-c*c+r*v)/(2*c*n*m),y=(f*f-c*c-r*v)/(2*f*n*m),x=Math.log(Math.sqrt(g*g+1)-g),b=Math.log(Math.sqrt(y*y+1)-y);o=(b-x)/e,a=function(t){var r=t*o,i=Zi(x),a=c/(n*m)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+x)-function(t){return((t=Math.exp(t))-1/t)/2}(x));return[s+a*h,l+a*p,c*i/Zi(e*r+x)]}}return a.duration=1e3*o*e/Math.SQRT2,a}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4),ea=0,na=0,ra=0,ia=0,aa=0,oa=0,sa="object"==typeof performance&&performance.now?performance:Date,la="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ca(){return aa||(la(ua),aa=sa.now()+oa)}function ua(){aa=0}function da(){this._call=this._time=this._next=null}function fa(t,e,n){var r=new da;return r.restart(t,e,n),r}function ha(){aa=(ia=sa.now())+oa,ea=na=0;try{!function(){ca(),++ea;for(var t,e=Ji;e;)(t=aa-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ea}()}finally{ea=0,function(){var t,e,n=Ji,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:Ji=e);Qi=t,va(r)}(),aa=0}}function pa(){var t=sa.now(),e=t-ia;e>1e3&&(oa-=e,ia=t)}function va(t){ea||(na&&(na=clearTimeout(na)),t-aa>24?(t<1/0&&(na=setTimeout(ha,t-sa.now()-oa)),ra&&(ra=clearInterval(ra))):(ra||(ia=sa.now(),ra=setInterval(pa,1e3)),ea=1,la(ha)))}function ma(t,e,n){var r=new da;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}da.prototype=fa.prototype={constructor:da,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?ca():+n)+(null==e?0:+e),this._next||Qi===this||(Qi?Qi._next=this:Ji=this,Qi=this),this._call=t,this._time=n,va()},stop:function(){this._call&&(this._call=null,this._time=1/0,va())}};var ga=Sn("start","end","cancel","interrupt"),ya=[];function xa(t,e,n,r,i,a){var o=t.__transition;if(o){if(n in o)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function a(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)}function o(a){var c,u,d,f;if(1!==n.state)return l();for(c in i)if((f=i[c]).name===n.name){if(3===f.state)return ma(o);4===f.state?(f.state=6,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete i[c]):+c<e&&(f.state=6,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete i[c])}if(ma((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(a))})),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(d=n.tween.length),c=0,u=-1;c<d;++c)(f=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++u]=f);r.length=u+1}}function s(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=5,1),a=-1,o=r.length;++a<o;)r[a].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=fa(a,0,n.time)}(t,n,{name:e,index:r,group:i,on:ga,tween:ya,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function ba(t,e){var n=_a(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function wa(t,e){var n=_a(t,e);if(n.state>3)throw new Error("too late; already running");return n}function _a(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function $a(t,e){var n,r,i,a=t.__transition,o=!0;if(a){for(i in e=null==e?null:e+"",a)(n=a[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete a[i]):o=!1;o&&delete t.__transition}}function ka(t,e){var n,r;return function(){var i=wa(this,t),a=i.tween;if(a!==n)for(var o=0,s=(r=n=a).length;o<s;++o)if(r[o].name===e){(r=r.slice()).splice(o,1);break}i.tween=r}}function ja(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var a=wa(this,t),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}a.tween=i}}function Ma(t,e,n){var r=t._id;return t.each((function(){var t=wa(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return _a(t,r).value[e]}}function Ca(t,e){var n;return("number"==typeof e?Hi:e instanceof fi?Ai:(n=fi(e))?(e=n,Ai):Oi)(t,e)}function Sa(t){return function(){this.removeAttribute(t)}}function Ea(t){return function(){this.removeAttributeNS(t.space,t.local)}}function za(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttribute(t);return o===a?null:o===r?i:i=e(r=o,n)}}function Aa(t,e,n){var r,i,a=n+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===a?null:o===r?i:i=e(r=o,n)}}function Na(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttribute(t)}}function Ta(t,e,n){var r,i,a;return function(){var o,s,l=n(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===r&&s===i?a:(i=s,a=e(r=o,l));this.removeAttributeNS(t.space,t.local)}}function Da(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function La(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function Pa(t,e){return function(){ba(this,t).delay=+e.apply(this,arguments)}}function Ha(t,e){return e=+e,function(){ba(this,t).delay=e}}function Ia(t,e){return function(){wa(this,t).duration=+e.apply(this,arguments)}}function Fa(t,e){return e=+e,function(){wa(this,t).duration=e}}var Ra=Br.prototype.constructor;function Oa(t){return function(){this.style.removeProperty(t)}}var qa=0;function Ba(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Wa(){return++qa}var Ga=Br.prototype;Ba.prototype={constructor:Ba,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Fn(t));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s,l,c=r[o],u=c.length,d=a[o]=new Array(u),f=0;f<u;++f)(s=c[f])&&(l=t.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),d[f]=l,xa(d[f],e,n,f,d,_a(s,n)));return new Ba(a,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=On(t));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l,c=r[s],u=c.length,d=0;d<u;++d)if(l=c[d]){for(var f,h=t.call(l,l.__data__,d,c),p=_a(l,n),v=0,m=h.length;v<m;++v)(f=h[v])&&xa(f,e,n,v,h,p);a.push(h),o.push(l)}return new Ba(a,o,e,n)},selectChild:Ga.selectChild,selectChildren:Ga.selectChildren,filter:function(t){"function"!=typeof t&&(t=Bn(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var a,o=e[i],s=o.length,l=r[i]=[],c=0;c<s;++c)(a=o[c])&&t.call(a,a.__data__,c,o)&&l.push(a);return new Ba(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l,c=e[s],u=n[s],d=c.length,f=o[s]=new Array(d),h=0;h<d;++h)(l=c[h]||u[h])&&(f[h]=l);for(;s<r;++s)o[s]=e[s];return new Ba(o,this._parents,this._name,this._id)},selection:function(){return new Ra(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=Wa(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)if(o=s[c]){var u=_a(o,e);xa(o,t,n,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new Ba(r,this._parents,t,n)},call:Ga.call,nodes:Ga.nodes,node:Ga.node,size:Ga.size,empty:Ga.empty,each:Ga.each,on:function(t,e){var n=this._id;return arguments.length<2?_a(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,a=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?ba:wa;return function(){var o=a(this,t),s=o.on;s!==r&&(i=(r=s).copy()).on(e,n),o.on=i}}(n,t,e))},attr:function(t,e){var n=Dn(t),r="transform"===n?Ki:Ca;return this.attrTween(t,"function"==typeof e?(n.local?Ta:Na)(n,r,Ma(this,"attr."+t,e)):null==e?(n.local?Ea:Sa)(n):(n.local?Aa:za)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=Dn(t);return this.tween(n,(r.local?Da:La)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?Xi:Ca;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var a=fr(this,t),o=(this.style.removeProperty(t),fr(this,t));return a===o?null:a===n&&o===r?i:i=e(n=a,r=o)}}(t,r)).on("end.style."+t,Oa(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,a;return function(){var o=fr(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=fr(this,t)),o===l?null:o===r&&l===i?a:(i=l,a=e(r=o,s))}}(t,r,Ma(this,"style."+t,e))).each(function(t,e){var n,r,i,a,o="style."+e,s="end."+o;return function(){var l=wa(this,t),c=l.on,u=null==l.value[o]?a||(a=Oa(e)):void 0;c===n&&i===u||(r=(n=c).copy()).on(s,i=u),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,a=n+"";return function(){var o=fr(this,t);return o===a?null:o===r?i:i=e(r=o,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function a(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,a,n)),r}return a._value=e,a}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ma(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=_a(this.node(),n).tween,a=0,o=i.length;a<o;++a)if((r=i[a]).name===t)return r.value;return null}return this.each((null==e?ka:ja)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Pa:Ha)(e,t)):_a(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?Ia:Fa)(e,t)):_a(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){wa(this,t).ease=e}}(e,t)):_a(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;wa(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(a,o){var s={value:o},l={value:function(){0==--i&&a()}};n.each((function(){var n=wa(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e})),0===i&&a()}))},[Symbol.iterator]:Ga[Symbol.iterator]};var Ya={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function Ua(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Br.prototype.interrupt=function(t){return this.each((function(){$a(this,t)}))},Br.prototype.transition=function(t){var e,n;t instanceof Ba?(e=t._id,t=t._name):(e=Wa(),(n=Ya).time=ca(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o,s=r[a],l=s.length,c=0;c<l;++c)(o=s[c])&&xa(o,t,e,c,s,n||Ua(o,e));return new Ba(r,this._parents,t,e)};const Va=Math.PI,Xa=2*Va,Ka=1e-6,Za=Xa-Ka;function Ja(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Qa{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Ja:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ja;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,a){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+a}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=n-t,l=r-e,c=a-t,u=o-e,d=c*c+u*u;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(d>Ka)if(Math.abs(u*s-l*c)>Ka&&i){let f=n-a,h=r-o,p=s*s+l*l,v=f*f+h*h,m=Math.sqrt(p),g=Math.sqrt(d),y=i*Math.tan((Va-Math.acos((p+d-v)/(2*m*g)))/2),x=y/g,b=y/m;Math.abs(x-1)>Ka&&this._append`L${t+x*c},${e+x*u}`,this._append`A${i},${i},0,0,${+(u*f>c*h)},${this._x1=t+b*s},${this._y1=e+b*l}`}else this._append`L${this._x1=t},${this._y1=e}`;else;}arc(t,e,n,r,i,a){if(t=+t,e=+e,a=!!a,(n=+n)<0)throw new Error(`negative radius: ${n}`);let o=n*Math.cos(r),s=n*Math.sin(r),l=t+o,c=e+s,u=1^a,d=a?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Ka||Math.abs(this._y1-c)>Ka)&&this._append`L${l},${c}`,n&&(d<0&&(d=d%Xa+Xa),d>Za?this._append`A${n},${n},0,1,${u},${t-o},${e-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:d>Ka&&this._append`A${n},${n},0,${+(d>=Va)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function to(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function eo(t){return(t=to(Math.abs(t)))?t[1]:NaN}var no,ro=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function io(t){if(!(e=ro.exec(t)))throw new Error("invalid format: "+t);var e;return new ao({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ao(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function oo(t,e){var n=to(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}io.prototype=ao.prototype,ao.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var so={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>oo(100*t,e),r:oo,s:function(t,e){var n=to(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(no=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+to(t,Math.max(0,e+a-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function lo(t){return t}var co,uo,fo,ho=Array.prototype.map,po=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function vo(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?lo:(e=ho.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",a=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?lo:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(ho.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function d(t){var e=(t=io(t)).fill,n=t.align,d=t.sign,f=t.symbol,h=t.zero,p=t.width,v=t.comma,m=t.precision,g=t.trim,y=t.type;"n"===y?(v=!0,y="g"):so[y]||(void 0===m&&(m=12),g=!0,y="g"),(h||"0"===e&&"="===n)&&(h=!0,e="0",n="=");var x="$"===f?i:"#"===f&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===f?a:/[%p]/.test(y)?l:"",w=so[y],_=/[defgprs%]/.test(y);function $(t){var i,a,l,f=x,$=b;if("c"===y)$=w(t)+$,t="";else{var k=(t=+t)<0||1/t<0;if(t=isNaN(t)?u:w(Math.abs(t),m),g&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),k&&0==+t&&"+"!==d&&(k=!1),f=(k?"("===d?d:c:"-"===d||"("===d?"":d)+f,$=("s"===y?po[8+no/3]:"")+$+(k&&"("===d?")":""),_)for(i=-1,a=t.length;++i<a;)if(48>(l=t.charCodeAt(i))||l>57){$=(46===l?o+t.slice(i+1):t.slice(i))+$,t=t.slice(0,i);break}}v&&!h&&(t=r(t,1/0));var j=f.length+t.length+$.length,M=j<p?new Array(p-j+1).join(e):"";switch(v&&h&&(t=r(M+t,M.length?p-$.length:1/0),M=""),n){case"<":t=f+t+$+M;break;case"=":t=f+M+t+$;break;case"^":t=M.slice(0,j=M.length>>1)+f+t+$+M.slice(j);break;default:t=M+f+t+$}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),$.toString=function(){return t+""},$}return{format:d,formatPrefix:function(t,e){var n=d(((t=io(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(eo(e)/3))),i=Math.pow(10,-r),a=po[8+r/3];return function(t){return n(i*t)+a}}}}co=vo({thousands:",",grouping:[3],currency:["$",""]}),uo=co.format,fo=co.formatPrefix;var mo=1e-6,go=Math.PI,yo=go/2,xo=go/4,bo=2*go,wo=180/go,_o=go/180,$o=Math.abs,ko=Math.atan,jo=Math.atan2,Mo=Math.cos,Co=Math.sin,So=Math.sign||function(t){return t>0?1:t<0?-1:0},Eo=Math.sqrt;function zo(t){return t>1?yo:t<-1?-yo:Math.asin(t)}function Ao(){}function No(t,e){t&&Do.hasOwnProperty(t.type)&&Do[t.type](t,e)}var To={Feature:function(t,e){No(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)No(n[r].geometry,e)}},Do={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Lo(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Lo(n[r],e,0)},Polygon:function(t,e){Po(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Po(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)No(n[r],e)}};function Lo(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function Po(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Lo(t[n],e,1);e.polygonEnd()}function Ho(t,e){t&&To.hasOwnProperty(t.type)?To[t.type](t,e):No(t,e)}function Io(t){return[jo(t[1],t[0]),zo(t[2])]}function Fo(t){var e=t[0],n=t[1],r=Mo(n);return[r*Mo(e),r*Co(e),Co(n)]}function Ro(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Oo(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function qo(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Bo(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Wo(t){var e=Eo(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Go(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Yo(t,e){return $o(t)>go&&(t-=Math.round(t/bo)*bo),[t,e]}function Uo(t){return function(e,n){return $o(e+=t)>go&&(e-=Math.round(e/bo)*bo),[e,n]}}function Vo(t){var e=Uo(t);return e.invert=Uo(-t),e}function Xo(t,e){var n=Mo(t),r=Co(t),i=Mo(e),a=Co(e);function o(t,e){var o=Mo(e),s=Mo(t)*o,l=Co(t)*o,c=Co(e),u=c*n+s*r;return[jo(l*i-u*a,s*n-c*r),zo(u*i+l*a)]}return o.invert=function(t,e){var o=Mo(e),s=Mo(t)*o,l=Co(t)*o,c=Co(e),u=c*i-l*a;return[jo(l*i+c*a,s*n+u*r),zo(u*n-s*r)]},o}function Ko(t,e){(e=Fo(e))[0]-=t,Wo(e);var n=function(t){return t>1?0:t<-1?go:Math.acos(t)}(-e[1]);return((-e[2]<0?-n:n)+bo-mo)%bo}function Zo(){var t,e=[];return{point:function(e,n,r){t.push([e,n,r])},lineStart:function(){e.push(t=[])},lineEnd:Ao,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function Jo(t,e){return $o(t[0]-e[0])<mo&&$o(t[1]-e[1])<mo}function Qo(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ts(t,e,n,r,i){var a,o,s=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(Jo(r,o)){if(!r[2]&&!o[2]){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}o[0]+=2e-6}s.push(n=new Qo(r,t,null,!0)),l.push(n.o=new Qo(r,null,n,!1)),s.push(n=new Qo(o,t,null,!1)),l.push(n.o=new Qo(o,null,n,!0))}})),s.length){for(l.sort(e),es(s),es(l),a=0,o=l.length;a<o;++a)l[a].e=n=!n;for(var c,u,d=s[0];;){for(var f=d,h=!0;f.v;)if((f=f.n)===d)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,o=c.length;a<o;++a)i.point((u=c[a])[0],u[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((u=c[a])[0],u[1]);else r(f.x,f.p.x,-1,i);f=f.p}c=(f=f.o).z,h=!h}while(!f.v);i.lineEnd()}}}function es(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ns(t){return $o(t[0])<=go?t[0]:So(t[0])*(($o(t[0])+go)%bo-go)}function rs(t,e,n,r){return function(i){var a,o,s,l=e(i),c=Zo(),u=e(c),d=!1,f={point:h,lineStart:v,lineEnd:m,polygonStart:function(){f.point=g,f.lineStart=y,f.lineEnd=x,o=[],a=[]},polygonEnd:function(){f.point=h,f.lineStart=v,f.lineEnd=m,o=mn(o);var t=function(t,e){var n=ns(e),r=e[1],i=Co(r),a=[Co(n),-Mo(n),0],o=0,s=0,l=new an;1===i?r=yo+mo:-1===i&&(r=-yo-mo);for(var c=0,u=t.length;c<u;++c)if(f=(d=t[c]).length)for(var d,f,h=d[f-1],p=ns(h),v=h[1]/2+xo,m=Co(v),g=Mo(v),y=0;y<f;++y,p=b,m=_,g=$,h=x){var x=d[y],b=ns(x),w=x[1]/2+xo,_=Co(w),$=Mo(w),k=b-p,j=k>=0?1:-1,M=j*k,C=M>go,S=m*_;if(l.add(jo(S*j*Co(M),g*$+S*Mo(M))),o+=C?k+j*bo:k,C^p>=n^b>=n){var E=Oo(Fo(h),Fo(x));Wo(E);var z=Oo(a,E);Wo(z);var A=(C^k>=0?-1:1)*zo(z[2]);(r>A||r===A&&(E[0]||E[1]))&&(s+=C^k>=0?1:-1)}}return(o<-mo||o<mo&&l<-1e-12)^1&s}(a,r);o.length?(d||(i.polygonStart(),d=!0),ts(o,as,t,n,i)):t&&(d||(i.polygonStart(),d=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),d&&(i.polygonEnd(),d=!1),o=a=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(e,n){t(e,n)&&i.point(e,n)}function p(t,e){l.point(t,e)}function v(){f.point=p,l.lineStart()}function m(){f.point=h,l.lineEnd()}function g(t,e){s.push([t,e]),u.point(t,e)}function y(){u.lineStart(),s=[]}function x(){g(s[0][0],s[0][1]),u.lineEnd();var t,e,n,r,l=u.clean(),f=c.result(),h=f.length;if(s.pop(),a.push(s),s=null,h)if(1&l){if((e=(n=f[0]).length-1)>0){for(d||(i.polygonStart(),d=!0),i.lineStart(),t=0;t<e;++t)i.point((r=n[t])[0],r[1]);i.lineEnd()}}else h>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(is))}return f}}function is(t){return t.length>1}function as(t,e){return((t=t.x)[0]<0?t[1]-yo-mo:yo-t[1])-((e=e.x)[0]<0?e[1]-yo-mo:yo-e[1])}Yo.invert=Yo;var os=rs((function(){return!0}),(function(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var s=a>0?go:-go,l=$o(a-n);$o(l-go)<mo?(t.point(n,r=(r+o)/2>0?yo:-yo),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(a,r),e=0):i!==s&&l>=go&&($o(n-i)<mo&&(n-=i*mo),$o(a-s)<mo&&(a-=s*mo),r=function(t,e,n,r){var i,a,o=Co(t-n);return $o(o)>mo?ko((Co(e)*(a=Mo(r))*Co(n)-Co(r)*(i=Mo(e))*Co(t))/(i*a*o)):(e+r)/2}(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=a,r=o),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}),(function(t,e,n,r){var i;if(null==t)i=n*yo,r.point(-go,i),r.point(0,i),r.point(go,i),r.point(go,0),r.point(go,-i),r.point(0,-i),r.point(-go,-i),r.point(-go,0),r.point(-go,i);else if($o(t[0]-e[0])>mo){var a=t[0]<e[0]?go:-go;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}),[-go,-yo]);function ss(t){var e=Mo(t),n=2*_o,r=e>0,i=$o(e)>mo;function a(t,n){return Mo(t)*Mo(n)>e}function o(t,n,r){var i=[1,0,0],a=Oo(Fo(t),Fo(n)),o=Ro(a,a),s=a[0],l=o-s*s;if(!l)return!r&&t;var c=e*o/l,u=-e*s/l,d=Oo(i,a),f=Bo(i,c);qo(f,Bo(a,u));var h=d,p=Ro(f,h),v=Ro(h,h),m=p*p-v*(Ro(f,f)-1);if(!(m<0)){var g=Eo(m),y=Bo(h,(-p-g)/v);if(qo(y,f),y=Io(y),!r)return y;var x,b=t[0],w=n[0],_=t[1],$=n[1];w<b&&(x=b,b=w,w=x);var k=w-b,j=$o(k-go)<mo;if(!j&&$<_&&(x=_,_=$,$=x),j||k<mo?j?_+$>0^y[1]<($o(y[0]-b)<mo?_:$):_<=y[1]&&y[1]<=$:k>go^(b<=y[0]&&y[0]<=w)){var M=Bo(h,(-p+g)/v);return qo(M,f),[y,Io(M)]}}}function s(e,n){var i=r?t:go-t,a=0;return e<-i?a|=1:e>i&&(a|=2),n<-i?a|=4:n>i&&(a|=8),a}return rs(a,(function(t){var e,n,l,c,u;return{lineStart:function(){c=l=!1,u=1},point:function(d,f){var h,p=[d,f],v=a(d,f),m=r?v?0:s(d,f):v?s(d+(d<0?go:-go),f):0;if(!e&&(c=l=v)&&t.lineStart(),v!==l&&(!(h=o(e,p))||Jo(e,h)||Jo(p,h))&&(p[2]=1),v!==l)u=0,v?(t.lineStart(),h=o(p,e),t.point(h[0],h[1])):(h=o(e,p),t.point(h[0],h[1],2),t.lineEnd()),e=h;else if(i&&e&&r^v){var g;m&n||!(g=o(p,e,!0))||(u=0,r?(t.lineStart(),t.point(g[0][0],g[0][1]),t.point(g[1][0],g[1][1]),t.lineEnd()):(t.point(g[1][0],g[1][1]),t.lineEnd(),t.lineStart(),t.point(g[0][0],g[0][1],3)))}!v||e&&Jo(e,p)||t.point(p[0],p[1]),e=p,l=v,n=m},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return u|(c&&l)<<1}}}),(function(e,r,i,a){!function(t,e,n,r,i,a){if(n){var o=Mo(e),s=Co(e),l=r*n;null==i?(i=e+r*bo,a=e-l/2):(i=Ko(o,i),a=Ko(o,a),(r>0?i<a:i>a)&&(i+=r*bo));for(var c,u=i;r>0?u>a:u<a;u-=l)c=Io([o,-s*Mo(u),-s*Co(u)]),t.point(c[0],c[1])}}(a,t,n,i,e,r)}),r?[0,-t]:[-go,t-go])}var ls=1e9,cs=-ls;function us(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,s,c){var u=0,d=0;if(null==i||(u=o(i,s))!==(d=o(a,s))||l(i,a)<0^s>0)do{c.point(0===u||3===u?t:n,u>1?r:e)}while((u=(u+s+4)%4)!==d);else c.point(a[0],a[1])}function o(r,i){return $o(r[0]-t)<mo?i>0?0:3:$o(r[0]-n)<mo?i>0?2:1:$o(r[1]-e)<mo?i>0?1:0:i>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,u,d,f,h,p,v,m,g,y,x=o,b=Zo(),w={point:_,lineStart:function(){w.point=$,c&&c.push(u=[]);g=!0,m=!1,p=v=NaN},lineEnd:function(){l&&($(d,f),h&&m&&b.rejoin(),l.push(b.result()));w.point=_,m&&x.lineEnd()},polygonStart:function(){x=b,l=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,i=c.length;n<i;++n)for(var a,o,s=c[n],l=1,u=s.length,d=s[0],f=d[0],h=d[1];l<u;++l)a=f,o=h,f=(d=s[l])[0],h=d[1],o<=r?h>r&&(f-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(f-a)*(r-o)<(h-o)*(t-a)&&--e;return e}(),n=y&&e,i=(l=mn(l)).length;(n||i)&&(o.polygonStart(),n&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),i&&ts(l,s,e,a,o),o.polygonEnd());x=o,l=c=u=null}};function _(t,e){i(t,e)&&x.point(t,e)}function $(a,o){var s=i(a,o);if(c&&u.push([a,o]),g)d=a,f=o,h=s,g=!1,s&&(x.lineStart(),x.point(a,o));else if(s&&m)x.point(a,o);else{var l=[p=Math.max(cs,Math.min(ls,p)),v=Math.max(cs,Math.min(ls,v))],b=[a=Math.max(cs,Math.min(ls,a)),o=Math.max(cs,Math.min(ls,o))];!function(t,e,n,r,i,a){var o,s=t[0],l=t[1],c=0,u=1,d=e[0]-s,f=e[1]-l;if(o=n-s,d||!(o>0)){if(o/=d,d<0){if(o<c)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>c&&(c=o)}if(o=i-s,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>c&&(c=o)}else if(d>0){if(o<c)return;o<u&&(u=o)}if(o=r-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<u&&(u=o)}else if(f>0){if(o>u)return;o>c&&(c=o)}if(o=a-l,f||!(o<0)){if(o/=f,f<0){if(o>u)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<u&&(u=o)}return c>0&&(t[0]=s+c*d,t[1]=l+c*f),u<1&&(e[0]=s+u*d,e[1]=l+u*f),!0}}}}}(l,b,t,e,n,r)?s&&(x.lineStart(),x.point(a,o),y=!1):(m||(x.lineStart(),x.point(l[0],l[1])),x.point(b[0],b[1]),s||x.lineEnd(),y=!1)}p=a,v=o,m=s}return w}}var ds,fs,hs,ps,vs=t=>t,ms=new an,gs=new an,ys={point:Ao,lineStart:Ao,lineEnd:Ao,polygonStart:function(){ys.lineStart=xs,ys.lineEnd=_s},polygonEnd:function(){ys.lineStart=ys.lineEnd=ys.point=Ao,ms.add($o(gs)),gs=new an},result:function(){var t=ms/2;return ms=new an,t}};function xs(){ys.point=bs}function bs(t,e){ys.point=ws,ds=hs=t,fs=ps=e}function ws(t,e){gs.add(ps*t-hs*e),hs=t,ps=e}function _s(){ws(ds,fs)}var $s=ys,ks=1/0,js=ks,Ms=-ks,Cs=Ms,Ss={point:function(t,e){t<ks&&(ks=t);t>Ms&&(Ms=t);e<js&&(js=e);e>Cs&&(Cs=e)},lineStart:Ao,lineEnd:Ao,polygonStart:Ao,polygonEnd:Ao,result:function(){var t=[[ks,js],[Ms,Cs]];return Ms=Cs=-(js=ks=1/0),t}};var Es,zs,As,Ns,Ts=Ss,Ds=0,Ls=0,Ps=0,Hs=0,Is=0,Fs=0,Rs=0,Os=0,qs=0,Bs={point:Ws,lineStart:Gs,lineEnd:Vs,polygonStart:function(){Bs.lineStart=Xs,Bs.lineEnd=Ks},polygonEnd:function(){Bs.point=Ws,Bs.lineStart=Gs,Bs.lineEnd=Vs},result:function(){var t=qs?[Rs/qs,Os/qs]:Fs?[Hs/Fs,Is/Fs]:Ps?[Ds/Ps,Ls/Ps]:[NaN,NaN];return Ds=Ls=Ps=Hs=Is=Fs=Rs=Os=qs=0,t}};function Ws(t,e){Ds+=t,Ls+=e,++Ps}function Gs(){Bs.point=Ys}function Ys(t,e){Bs.point=Us,Ws(As=t,Ns=e)}function Us(t,e){var n=t-As,r=e-Ns,i=Eo(n*n+r*r);Hs+=i*(As+t)/2,Is+=i*(Ns+e)/2,Fs+=i,Ws(As=t,Ns=e)}function Vs(){Bs.point=Ws}function Xs(){Bs.point=Zs}function Ks(){Js(Es,zs)}function Zs(t,e){Bs.point=Js,Ws(Es=As=t,zs=Ns=e)}function Js(t,e){var n=t-As,r=e-Ns,i=Eo(n*n+r*r);Hs+=i*(As+t)/2,Is+=i*(Ns+e)/2,Fs+=i,Rs+=(i=Ns*t-As*e)*(As+t),Os+=i*(Ns+e),qs+=3*i,Ws(As=t,Ns=e)}var Qs=Bs;function tl(t){this._context=t}tl.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,bo)}},result:Ao};var el,nl,rl,il,al,ol=new an,sl={point:Ao,lineStart:function(){sl.point=ll},lineEnd:function(){el&&cl(nl,rl),sl.point=Ao},polygonStart:function(){el=!0},polygonEnd:function(){el=null},result:function(){var t=+ol;return ol=new an,t}};function ll(t,e){sl.point=cl,nl=il=t,rl=al=e}function cl(t,e){il-=t,al-=e,ol.add(Eo(il*il+al*al)),il=t,al=e}var ul=sl;let dl,fl,hl,pl;class vl{constructor(t){this._append=null==t?ml:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return ml;if(e!==dl){const t=10**e;dl=e,fl=function(e){let n=1;this._+=e[0];for(const r=e.length;n<r;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return fl}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==hl||this._append!==fl){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,hl=t,fl=this._append,pl=this._,this._=e}this._+=pl}}result(){const t=this._;return this._="",t.length?t:null}}function ml(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function gl(t,e){let n,r,i=3,a=4.5;function o(t){return t&&("function"==typeof a&&r.pointRadius(+a.apply(this,arguments)),Ho(t,n(r))),r.result()}return o.area=function(t){return Ho(t,n($s)),$s.result()},o.measure=function(t){return Ho(t,n(ul)),ul.result()},o.bounds=function(t){return Ho(t,n(Ts)),Ts.result()},o.centroid=function(t){return Ho(t,n(Qs)),Qs.result()},o.projection=function(e){return arguments.length?(n=null==e?(t=null,vs):(t=e).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(e=null,new vl(i)):new tl(e=t),"function"!=typeof a&&r.pointRadius(a),o):e},o.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(r.pointRadius(+t),+t),o):a},o.digits=function(t){if(!arguments.length)return i;if(null==t)i=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);i=e}return null===e&&(r=new vl(i)),o},o.projection(t).digits(i).context(e)}function yl(t){return function(e){var n=new xl;for(var r in t)n[r]=t[r];return n.stream=e,n}}function xl(){}function bl(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Ho(n,t.stream(Ts)),e(Ts.result()),null!=r&&t.clipExtent(r),t}function wl(t,e,n){return bl(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+e[0][0]+(r-a*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(i-a*(n[1][1]+n[0][1]))/2;t.scale(150*a).translate([o,s])}),n)}xl.prototype={constructor:xl,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var _l=Mo(30*_o);function $l(t,e){return+e?function(t,e){function n(r,i,a,o,s,l,c,u,d,f,h,p,v,m){var g=c-r,y=u-i,x=g*g+y*y;if(x>4*e&&v--){var b=o+f,w=s+h,_=l+p,$=Eo(b*b+w*w+_*_),k=zo(_/=$),j=$o($o(_)-1)<mo||$o(a-d)<mo?(a+d)/2:jo(w,b),M=t(j,k),C=M[0],S=M[1],E=C-r,z=S-i,A=y*E-g*z;(A*A/x>e||$o((g*E+y*z)/x-.5)>.3||o*f+s*h+l*p<_l)&&(n(r,i,a,o,s,l,C,S,j,b/=$,w/=$,_,v,m),m.point(C,S),n(C,S,j,b,w,_,c,u,d,f,h,p,v,m))}}return function(e){var r,i,a,o,s,l,c,u,d,f,h,p,v={point:m,lineStart:g,lineEnd:x,polygonStart:function(){e.polygonStart(),v.lineStart=b},polygonEnd:function(){e.polygonEnd(),v.lineStart=g}};function m(n,r){n=t(n,r),e.point(n[0],n[1])}function g(){u=NaN,v.point=y,e.lineStart()}function y(r,i){var a=Fo([r,i]),o=t(r,i);n(u,d,c,f,h,p,u=o[0],d=o[1],c=r,f=a[0],h=a[1],p=a[2],16,e),e.point(u,d)}function x(){v.point=m,e.lineEnd()}function b(){g(),v.point=w,v.lineEnd=_}function w(t,e){y(r=t,e),i=u,a=d,o=f,s=h,l=p,v.point=y}function _(){n(u,d,c,f,h,p,i,a,r,o,s,l,16,e),v.lineEnd=x,x()}return v}}(t,e):function(t){return yl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var kl=yl({point:function(t,e){this.stream.point(t*_o,e*_o)}});function jl(t,e,n,r,i,a){if(!a)return function(t,e,n,r,i){function a(a,o){return[e+t*(a*=r),n-t*(o*=i)]}return a.invert=function(a,o){return[(a-e)/t*r,(n-o)/t*i]},a}(t,e,n,r,i);var o=Mo(a),s=Co(a),l=o*t,c=s*t,u=o/t,d=s/t,f=(s*n-o*e)/t,h=(s*e+o*n)/t;function p(t,a){return[l*(t*=r)-c*(a*=i)+e,n-c*t-l*a]}return p.invert=function(t,e){return[r*(u*t-d*e+f),i*(h-d*t-u*e)]},p}function Ml(t){return function(t){var e,n,r,i,a,o,s,l,c,u,d=150,f=480,h=250,p=0,v=0,m=0,g=0,y=0,x=0,b=1,w=1,_=null,$=os,k=null,j=vs,M=.5;function C(t){return l(t[0]*_o,t[1]*_o)}function S(t){return(t=l.invert(t[0],t[1]))&&[t[0]*wo,t[1]*wo]}function E(){var t=jl(d,0,0,b,w,x).apply(null,e(p,v)),r=jl(d,f-t[0],h-t[1],b,w,x);return n=function(t,e,n){return(t%=bo)?e||n?Go(Vo(t),Xo(e,n)):Vo(t):e||n?Xo(e,n):Yo}(m,g,y),s=Go(e,r),l=Go(n,s),o=$l(s,M),z()}function z(){return c=u=null,C}return C.stream=function(t){return c&&u===t?c:c=kl(function(t){return yl({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}(n)($(o(j(u=t)))))},C.preclip=function(t){return arguments.length?($=t,_=void 0,z()):$},C.postclip=function(t){return arguments.length?(j=t,k=r=i=a=null,z()):j},C.clipAngle=function(t){return arguments.length?($=+t?ss(_=t*_o):(_=null,os),z()):_*wo},C.clipExtent=function(t){return arguments.length?(j=null==t?(k=r=i=a=null,vs):us(k=+t[0][0],r=+t[0][1],i=+t[1][0],a=+t[1][1]),z()):null==k?null:[[k,r],[i,a]]},C.scale=function(t){return arguments.length?(d=+t,E()):d},C.translate=function(t){return arguments.length?(f=+t[0],h=+t[1],E()):[f,h]},C.center=function(t){return arguments.length?(p=t[0]%360*_o,v=t[1]%360*_o,E()):[p*wo,v*wo]},C.rotate=function(t){return arguments.length?(m=t[0]%360*_o,g=t[1]%360*_o,y=t.length>2?t[2]%360*_o:0,E()):[m*wo,g*wo,y*wo]},C.angle=function(t){return arguments.length?(x=t%360*_o,E()):x*wo},C.reflectX=function(t){return arguments.length?(b=t?-1:1,E()):b<0},C.reflectY=function(t){return arguments.length?(w=t?-1:1,E()):w<0},C.precision=function(t){return arguments.length?(o=$l(s,M=t*t),z()):Eo(M)},C.fitExtent=function(t,e){return wl(C,t,e)},C.fitSize=function(t,e){return function(t,e,n){return wl(t,[[0,0],e],n)}(C,t,e)},C.fitWidth=function(t,e){return function(t,e,n){return bl(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),a=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];t.scale(150*i).translate([a,o])}),n)}(C,t,e)},C.fitHeight=function(t,e){return function(t,e,n){return bl(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),a=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([a,o])}),n)}(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&S,E()}}((function(){return t}))()}function Cl(t,e){var n=e*e,r=n*n;return[t*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),e*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function Sl(){return Ml(Cl).scale(175.295)}function El(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function zl(t,e){switch(arguments.length){case 0:break;case 1:"function"==typeof t?this.interpolator(t):this.range(t);break;default:this.domain(t),"function"==typeof e?this.interpolator(e):this.range(e)}return this}Cl.invert=function(t,e){var n,r=e,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-e)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while($o(n)>mo&&--i>0);return[t/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]};const Al=Symbol("implicit");function Nl(){var t=new on,e=[],n=[],r=Al;function i(i){let a=t.get(i);if(void 0===a){if(r!==Al)return r;t.set(i,a=e.push(i)-1)}return n[a%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new on;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Nl(e,n).unknown(r)},El.apply(i,arguments),i}function Tl(){var t,e,n=Nl().unknown(void 0),r=n.domain,i=n.range,a=0,o=1,s=!1,l=0,c=0,u=.5;function d(){var n=r().length,d=o<a,f=d?o:a,h=d?a:o;t=(h-f)/Math.max(1,n-l+2*c),s&&(t=Math.floor(t)),f+=(h-f-t*(n-l))*u,e=t*(1-l),s&&(f=Math.round(f),e=Math.round(e));var p=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}(n).map((function(e){return f+t*e}));return i(d?p.reverse():p)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),d()):r()},n.range=function(t){return arguments.length?([a,o]=t,a=+a,o=+o,d()):[a,o]},n.rangeRound=function(t){return[a,o]=t,a=+a,o=+o,s=!0,d()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,d()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),d()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),d()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,d()):c},n.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),d()):u},n.copy=function(){return Tl(r(),[a,o]).round(s).paddingInner(l).paddingOuter(c).align(u)},El.apply(d(),arguments)}function Dl(t){return+t}var Ll=[0,1];function Pl(t){return t}function Hl(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:function(t){return function(){return t}}(isNaN(e)?NaN:.5)}function Il(t,e,n){var r=t[0],i=t[1],a=e[0],o=e[1];return i<r?(r=Hl(i,r),a=n(o,a)):(r=Hl(r,i),a=n(a,o)),function(t){return a(r(t))}}function Fl(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),a=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Hl(t[o],t[o+1]),a[o]=n(e[o],e[o+1]);return function(e){var n=rn(t,e,1,r)-1;return a[n](i[n](e))}}function Rl(){var t,e,n,r,i,a,o=Ll,s=Ll,l=qi,c=Pl;function u(){var t,e,n,l=Math.min(o.length,s.length);return c!==Pl&&(t=o[0],e=o[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?Fl:Il,i=a=null,d}function d(e){return null==e||isNaN(e=+e)?n:(i||(i=r(o.map(t),s,l)))(t(c(e)))}return d.invert=function(n){return c(e((a||(a=r(s,o.map(t),Hi)))(n)))},d.domain=function(t){return arguments.length?(o=Array.from(t,Dl),u()):o.slice()},d.range=function(t){return arguments.length?(s=Array.from(t),u()):s.slice()},d.rangeRound=function(t){return s=Array.from(t),l=Bi,u()},d.clamp=function(t){return arguments.length?(c=!!t||Pl,u()):c!==Pl},d.interpolate=function(t){return arguments.length?(l=t,u()):l},d.unknown=function(t){return arguments.length?(n=t,d):n},function(n,r){return t=n,e=r,u()}}function Ol(t,e,n,r){var i,a=function(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?hn(e,t,n):hn(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}(t,e,n);switch((r=io(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(eo(e)/3)))-eo(Math.abs(t)))}(a,o))||(r.precision=i),fo(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,eo(e)-eo(t))+1}(a,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-eo(Math.abs(t)))}(a))||(r.precision=i-2*("%"===r.type))}return uo(r)}function ql(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)==(e=+e))return[t];const r=e<t,[i,a,o]=r?fn(e,t,n):fn(t,e,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let t=0;t<s;++t)l[t]=(a-t)/-o;else for(let t=0;t<s;++t)l[t]=(a-t)*o;else if(o<0)for(let t=0;t<s;++t)l[t]=(i+t)/-o;else for(let t=0;t<s;++t)l[t]=(i+t)*o;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return Ol(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,a=e(),o=0,s=a.length-1,l=a[o],c=a[s],u=10;for(c<l&&(i=l,l=c,c=i,i=o,o=s,s=i);u-- >0;){if((i=hn(l,c,n))===r)return a[o]=l,a[s]=c,e(a);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function Bl(){var t=Rl()(Pl,Pl);return t.copy=function(){return e=t,Bl().domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown());var e},El.apply(t,arguments),ql(t)}function Wl(){var t=ql(function(){var t,e,n,r,i,a=0,o=1,s=Pl,l=!1;function c(e){return null==e||isNaN(e=+e)?i:s(0===n?.5:(e=(r(e)-t)*n,l?Math.max(0,Math.min(1,e)):e))}function u(t){return function(e){var n,r;return arguments.length?([n,r]=e,s=t(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([a,o]=i,t=r(a=+a),e=r(o=+o),n=t===e?0:1/(e-t),c):[a,o]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.range=u(qi),c.rangeRound=u(Bi),c.unknown=function(t){return arguments.length?(i=t,c):i},function(i){return r=i,t=i(a),e=i(o),n=t===e?0:1/(e-t),c}}()(Pl));return t.copy=function(){return e=t,Wl().domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown());var e},zl.apply(t,arguments)}function Gl(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}var Yl=Gl("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Ul=t=>Ti(t[t.length-1]),Vl=Ul(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Gl)),Xl=Ul(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Gl)),Kl=Ul(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Gl)),Zl=Ul(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Gl)),Jl=Ul(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Gl)),Ql=Ul(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Gl));function tc(t){return function(){return t}}function ec(t){this._context=t}function nc(t){return new ec(t)}function rc(t){return t[0]}function ic(t){return t[1]}function ac(t,e){var n=tc(!0),r=null,i=nc,a=null,o=function(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Qa(e)}(s);function s(s){var l,c,u,d=(s=function(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}(s)).length,f=!1;for(null==r&&(a=i(u=o())),l=0;l<=d;++l)!(l<d&&n(c=s[l],l,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+t(c,l,s),+e(c,l,s));if(u)return a=null,u+""||null}return t="function"==typeof t?t:void 0===t?rc:tc(t),e="function"==typeof e?e:void 0===e?ic:tc(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:tc(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:tc(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:tc(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(a=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=a=null:a=i(r=t),s):r},s}function oc(t){return t<0?-1:1}function sc(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),s=(a*i+o*r)/(r+i);return(oc(a)+oc(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(s))||0}function lc(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function cc(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,s=(a-r)/3;t._context.bezierCurveTo(r+s,i+s*e,a-s,o-s*n,a,o)}function uc(t){this._context=t}function dc(t){return new uc(t)}ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},uc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:cc(this,this._t0,lc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,cc(this,lc(this,n=sc(this,t,e)),n);break;default:cc(this,this._t0,n=sc(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},Object.create(uc.prototype).point=function(t,e){uc.prototype.point.call(this,e,t)};var fc=t=>()=>t;function hc(t,{sourceEvent:e,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function pc(t,e,n){this.k=t,this.x=e,this.y=n}pc.prototype={constructor:pc,scale:function(t){return 1===t?this:new pc(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new pc(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vc=new pc(1,0,0);function mc(t){t.stopImmediatePropagation()}function gc(t){t.preventDefault(),t.stopImmediatePropagation()}function yc(t){return!(t.ctrlKey&&"wheel"!==t.type||t.button)}function xc(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function bc(){return this.__zoom||vc}function wc(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function _c(){return navigator.maxTouchPoints||"ontouchstart"in this}function $c(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],a=t.invertY(e[0][1])-n[0][1],o=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function kc(){var t,e,n,r=yc,i=xc,a=$c,o=wc,s=_c,l=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],u=250,d=ta,f=Sn("start","zoom","end"),h=0,p=10;function v(t){t.property("__zoom",bc).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",$).on("dblclick.zoom",k).filter(s).on("touchstart.zoom",j).on("touchmove.zoom",M).on("touchend.zoom touchcancel.zoom",C).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new pc(e,t.x,t.y)}function g(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new pc(t.k,r,i)}function y(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n,r){t.on("start.zoom",(function(){b(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,a=arguments,o=b(t,a).event(r),s=i.apply(t,a),l=null==n?y(s):"function"==typeof n?n.apply(t,a):n,c=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),u=t.__zoom,f="function"==typeof e?e.apply(t,a):e,h=d(u.invert(l).concat(c/u.k),f.invert(l).concat(c/f.k));return function(t){if(1===t)t=f;else{var e=h(t),n=c/e[2];t=new pc(n,l[0]-e[0]*n,l[1]-e[1]*n)}o.zoom(null,t)}}))}function b(t,e,n){return!n&&t.__zooming||new w(t,e)}function w(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function _(t,...e){if(r.apply(this,arguments)){var n=b(this,e).event(t),i=this.__zoom,s=Math.max(l[0],Math.min(l[1],i.k*Math.pow(2,o.apply(this,arguments)))),u=Gr(t);if(n.wheel)n.mouse[0][0]===u[0]&&n.mouse[0][1]===u[1]||(n.mouse[1]=i.invert(n.mouse[0]=u)),clearTimeout(n.wheel);else{if(i.k===s)return;n.mouse=[u,i.invert(u)],$a(this),n.start()}gc(t),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),150),n.zoom("mouse",a(g(m(i,s),n.mouse[0],n.mouse[1]),n.extent,c))}}function $(t,...e){if(!n&&r.apply(this,arguments)){var i=t.currentTarget,o=b(this,e,!0).event(t),s=Wr(t.view).on("mousemove.zoom",(function(t){if(gc(t),!o.moved){var e=t.clientX-u,n=t.clientY-d;o.moved=e*e+n*n>h}o.event(t).zoom("mouse",a(g(o.that.__zoom,o.mouse[0]=Gr(t,i),o.mouse[1]),o.extent,c))}),!0).on("mouseup.zoom",(function(t){s.on("mousemove.zoom mouseup.zoom",null),function(t,e){var n=t.document.documentElement,r=Wr(t).on("dragstart.drag",null);e&&(r.on("click.drag",Ur,Yr),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}(t.view,o.moved),gc(t),o.event(t).end()}),!0),l=Gr(t,i),u=t.clientX,d=t.clientY;!function(t){var e=t.document.documentElement,n=Wr(t).on("dragstart.drag",Ur,Yr);"onselectstart"in e?n.on("selectstart.drag",Ur,Yr):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}(t.view),mc(t),o.mouse=[l,this.__zoom.invert(l)],$a(this),o.start()}}function k(t,...e){if(r.apply(this,arguments)){var n=this.__zoom,o=Gr(t.changedTouches?t.changedTouches[0]:t,this),s=n.invert(o),l=n.k*(t.shiftKey?.5:2),d=a(g(m(n,l),o,s),i.apply(this,e),c);gc(t),u>0?Wr(this).transition().duration(u).call(x,d,o,t):Wr(this).call(v.transform,d,o,t)}}function j(n,...i){if(r.apply(this,arguments)){var a,o,s,l,c=n.touches,u=c.length,d=b(this,i,n.changedTouches.length===u).event(n);for(mc(n),o=0;o<u;++o)l=[l=Gr(s=c[o],this),this.__zoom.invert(l),s.identifier],d.touch0?d.touch1||d.touch0[2]===l[2]||(d.touch1=l,d.taps=0):(d.touch0=l,a=!0,d.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(d.taps<2&&(e=l[0],t=setTimeout((function(){t=null}),500)),$a(this),d.start())}}function M(t,...e){if(this.__zooming){var n,r,i,o,s=b(this,e).event(t),l=t.changedTouches,u=l.length;for(gc(t),n=0;n<u;++n)i=Gr(r=l[n],this),s.touch0&&s.touch0[2]===r.identifier?s.touch0[0]=i:s.touch1&&s.touch1[2]===r.identifier&&(s.touch1[0]=i);if(r=s.that.__zoom,s.touch1){var d=s.touch0[0],f=s.touch0[1],h=s.touch1[0],p=s.touch1[1],v=(v=h[0]-d[0])*v+(v=h[1]-d[1])*v,y=(y=p[0]-f[0])*y+(y=p[1]-f[1])*y;r=m(r,Math.sqrt(v/y)),i=[(d[0]+h[0])/2,(d[1]+h[1])/2],o=[(f[0]+p[0])/2,(f[1]+p[1])/2]}else{if(!s.touch0)return;i=s.touch0[0],o=s.touch0[1]}s.zoom("touch",a(g(r,i,o),s.extent,c))}}function C(t,...r){if(this.__zooming){var i,a,o=b(this,r).event(t),s=t.changedTouches,l=s.length;for(mc(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),i=0;i<l;++i)a=s[i],o.touch0&&o.touch0[2]===a.identifier?delete o.touch0:o.touch1&&o.touch1[2]===a.identifier&&delete o.touch1;if(o.touch1&&!o.touch0&&(o.touch0=o.touch1,delete o.touch1),o.touch0)o.touch0[1]=this.__zoom.invert(o.touch0[0]);else if(o.end(),2===o.taps&&(a=Gr(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<p)){var c=Wr(this).on("dblclick.zoom");c&&c.apply(this,arguments)}}}return v.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",bc),t!==i?x(t,e,n,r):i.interrupt().each((function(){b(this,arguments).event(r).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},v.scaleBy=function(t,e,n,r){v.scaleTo(t,(function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n,r)},v.scaleTo=function(t,e,n,r){v.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,o=null==n?y(t):"function"==typeof n?n.apply(this,arguments):n,s=r.invert(o),l="function"==typeof e?e.apply(this,arguments):e;return a(g(m(r,l),o,s),t,c)}),n,r)},v.translateBy=function(t,e,n,r){v.transform(t,(function(){return a(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof n?n.apply(this,arguments):n),i.apply(this,arguments),c)}),null,r)},v.translateTo=function(t,e,n,r,o){v.transform(t,(function(){var t=i.apply(this,arguments),o=this.__zoom,s=null==r?y(t):"function"==typeof r?r.apply(this,arguments):r;return a(vc.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof n?-n.apply(this,arguments):-n),t,c)}),r,o)},w.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=Wr(this.that).datum();f.call(t,this.that,new hc(t,{sourceEvent:this.sourceEvent,target:v,type:t,transform:this.that.__zoom,dispatch:f}),e)}},v.wheelDelta=function(t){return arguments.length?(o="function"==typeof t?t:fc(+t),v):o},v.filter=function(t){return arguments.length?(r="function"==typeof t?t:fc(!!t),v):r},v.touchable=function(t){return arguments.length?(s="function"==typeof t?t:fc(!!t),v):s},v.extent=function(t){return arguments.length?(i="function"==typeof t?t:fc([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),v):i},v.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],v):[l[0],l[1]]},v.translateExtent=function(t){return arguments.length?(c[0][0]=+t[0][0],c[1][0]=+t[1][0],c[0][1]=+t[0][1],c[1][1]=+t[1][1],v):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},v.constrain=function(t){return arguments.length?(a=t,v):a},v.duration=function(t){return arguments.length?(u=+t,v):u},v.interpolate=function(t){return arguments.length?(d=t,v):d},v.on=function(){var t=f.on.apply(f,arguments);return t===f?v:t},v.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,v):Math.sqrt(h)},v.tapDistance=function(t){return arguments.length?(p=+t,v):p},v}function jc(t){return t}function Mc(t,e){var n=e.id,r=e.bbox,i=null==e.properties?{}:e.properties,a=Cc(t,e);return null==n&&null==r?{type:"Feature",properties:i,geometry:a}:null==r?{type:"Feature",id:n,properties:i,geometry:a}:{type:"Feature",id:n,bbox:r,properties:i,geometry:a}}function Cc(t,e){var n=function(t){if(null==t)return jc;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,s){s||(e=n=0);var l=2,c=t.length,u=new Array(c);for(u[0]=(e+=t[0])*r+a,u[1]=(n+=t[1])*i+o;l<c;)u[l]=t[l],++l;return u}}(t.transform),r=t.arcs;function i(t,e){e.length&&e.pop();for(var i=r[t<0?~t:t],a=0,o=i.length;a<o;++a)e.push(n(i[a],a));t<0&&function(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}(e,o)}function a(t){return n(t)}function o(t){for(var e=[],n=0,r=t.length;n<r;++n)i(t[n],e);return e.length<2&&e.push(e[0]),e}function s(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(s)}return function t(e){var n,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":n=a(e.coordinates);break;case"MultiPoint":n=e.coordinates.map(a);break;case"LineString":n=o(e.arcs);break;case"MultiLineString":n=e.arcs.map(o);break;case"Polygon":n=l(e.arcs);break;case"MultiPolygon":n=e.arcs.map(l);break;default:return null}return{type:r,coordinates:n}}(e)}function Sc(t,e){var n={},r={},i={},a=[],o=-1;function s(t,e){for(var r in t){var i=t[r];delete e[i.start],delete i.start,delete i.end,i.forEach((function(t){n[t<0?~t:t]=1})),a.push(i)}}return e.forEach((function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++o],e[o]=n,e[r]=i)})),e.forEach((function(e){var n,a,o=function(e){var n,r=t.arcs[e<0?~e:e],i=r[0];t.transform?(n=[0,0],r.forEach((function(t){n[0]+=t[0],n[1]+=t[1]}))):n=r[r.length-1];return e<0?[n,i]:[i,n]}(e),s=o[0],l=o[1];if(n=i[s])if(delete i[n.end],n.push(e),n.end=l,a=r[l]){delete r[a.start];var c=a===n?n:n.concat(a);r[c.start=n.start]=i[c.end=a.end]=c}else r[n.start]=i[n.end]=n;else if(n=r[l])if(delete r[n.start],n.unshift(e),n.start=s,a=i[s]){delete i[a.end];var u=a===n?n:a.concat(n);r[u.start=a.start]=i[u.end=n.end]=u}else r[n.start]=i[n.end]=n;else r[(n=[e]).start=s]=i[n.end=l]=n})),s(i,r),s(r,i),e.forEach((function(t){n[t<0?~t:t]||a.push([t])})),a}function Ec(t){return Cc(t,zc.apply(this,arguments))}function zc(t,e,n){var r,i,a;if(arguments.length>1)r=function(t,e,n){var r,i=[],a=[];function o(t){var e=t<0?~t:t;(a[e]||(a[e]=[])).push({i:t,g:r})}function s(t){t.forEach(o)}function l(t){t.forEach(s)}function c(t){t.forEach(l)}function u(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(u);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":l(t.arcs);break;case"MultiPolygon":c(t.arcs)}}return u(e),a.forEach(null==n?function(t){i.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&i.push(t[0].i)}),i}(0,e,n);else for(i=0,r=new Array(a=t.arcs.length);i<a;++i)r[i]=i;return{type:"MultiLineString",arcs:Sc(t,r)}}function Ac(e){let n,r,i,a;return{c(){n=A("div"),r=A("button"),r.innerHTML='<svg viewBox="0 0 24 24" width="18" height="18"><path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8-8-3.59 8-8 8zm3-9h-2V7h-2v4H9v2h2v4h2v-4h2v-2z"></path></svg>',H(r,"class","zoom-button svelte-fnviuz"),H(r,"title","Reset zoom"),H(n,"class","map-controls svelte-fnviuz")},m(t,o){S(t,n,o),j(n,r),i||(a=L(r,"click",e[5]),i=!0)},p:t,d(t){t&&E(n),i=!1,a()}}}function Nc(t){let e,n,r,i,a,o,s;return{c(){e=A("div"),n=A("p"),r=N(t[4]),i=T(),a=A("button"),a.textContent="Retry",H(a,"class","svelte-fnviuz"),H(e,"class","error-message svelte-fnviuz")},m(l,c){S(l,e,c),j(e,n),j(n,r),j(e,i),j(e,a),o||(s=L(a,"click",t[18]),o=!0)},p(t,e){16&e[0]&&R(r,t[4])},d(t){t&&E(e),o=!1,s()}}}function Tc(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner svelte-fnviuz"></div> \n      <div>Loading map...</div>',H(n,"class","loading-indicator svelte-fnviuz")},m(t,e){S(t,n,e)},p:t,d(t){t&&E(n)}}}function Dc(e){let n;function r(t,e){return t[3]&&!t[2]?Tc:t[4]?Nc:t[0]?Ac:void 0}let i=r(e),a=i&&i(e);return{c(){n=A("div"),a&&a.c(),H(n,"class","world-map-container svelte-fnviuz")},m(t,r){S(t,n,r),a&&a.m(n,null),e[19](n)},p(t,e){i===(i=r(t))&&a?a.p(t,e):(a&&a.d(1),a=i&&i(t),a&&(a.c(),a.m(n,null)))},i:t,o:t,d(t){t&&E(n),a&&a.d(),e[19](null)}}}function Lc(t,e,n){let r,i,a,o,s,l,c,u,d,f,h,{data:p=[]}=e,{metric:v="score"}=e,{width:m=960}=e,{height:g=500}=e,{interactive:y=!0}=e,{showLegend:x=!0}=e,{showTooltip:b=!0}=e,{onCountryClick:w=()=>{}}=e,_=[],$=null,k=null,j=!1,M=!0,C=null;async function S(){if(u)try{n(3,M=!0);const t=await De(u);t&&t.length>0&&(n(13,_=t),s&&$&&z()),n(3,M=!1)}catch(t){console.error("Error loading data for year:",t),n(4,C="Failed to load data for the selected year."),n(3,M=!1)}}function E(t){const e=_.find((e=>e.country_code===t.id));return e&&void 0!==e[v]&&!isNaN(e[v])?a(e[v]):"#e0e0e0"}function z(){s&&$&&h&&(s.select(".countries").selectAll("path").data(k).join((t=>t.append("path").attr("class","country").attr("data-id",(t=>t.id)).attr("d",h).attr("fill",E).attr("stroke","#fff").attr("stroke-width",.3).style("cursor",y?"pointer":"default").on("mouseover",(function(t,e){if(!b)return;Wr(this).attr("stroke-width",1);const n=_.find((t=>t.country_code===e.id));n&&(l.transition().duration(200).style("opacity",.9),l.html(`\n                <strong>${n.country}</strong><br>\n                ${void 0===n[v]||isNaN(n[v])?"<span>No data available</span>":`<span style="color:${d?.color||"#333"}">\n                      ${d?.label||v}: ${"number"==typeof n[v]?n[v].toFixed(2):n[v]}\n                     </span>`}\n              `).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px"))})).on("mouseout",(function(){b&&(Wr(this).attr("stroke-width",.3),l.transition().duration(500).style("opacity",0))})).on("click",(function(t,e){if(!y)return;const n=_.find((t=>t.country_code===e.id));n&&w(n)}))),(t=>t.transition().duration(750).attr("fill",E)),(t=>t.remove())),s.select(".country-borders").attr("d",h(Ec($,$.features,((t,e)=>t!==e)))),x&&A())}function A(){if(!s)return;const t=s.select(".legend");if(t.empty())return;t.select(".legend-title").text(d?.label||v);const e=a.domain(),n=e[0],r=e[1],i=(n+r)/2,o=Array.from({length:20},((t,e)=>e/19)).map((t=>({offset:100*t+"%",color:a(n+t*(r-n))}))),l=t.select(".legend-gradient");s.select("defs").remove();const c=s.append("defs").append("linearGradient").attr("id","legend-gradient").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");o.forEach((t=>{c.append("stop").attr("offset",t.offset).attr("stop-color",t.color)})),l.attr("fill","url(#legend-gradient)");const u=function(t){switch(t){case"score":return uo(".1f");case"hdi":case"gdp_per_capita":case"social_support":case"life_expectancy":case"freedom":case"generosity":case"corruption":default:return uo(".2f");case"population":return uo(".3s")}}(v);t.select(".legend-min").text(u(n)),t.select(".legend-max").text(u(r)),t.select(".legend-mid").text(u(i))}He.subscribe((t=>{u=t,S()})),Ge.subscribe((t=>{d=t})),Q((async()=>{try{n(3,M=!0);const a=await async function(){try{const t=await fetch("https://cdn.jsdelivr.net/npm/world-atlas@2/countries-110m.json");if(!t.ok)throw new Error(`Failed to load world map data: ${t.statusText}`);return await t.json()}catch(t){throw console.error("Error loading world data:",t),t}}();a&&(n(14,(t=a,"string"==typeof(e=a.objects.countries)&&(e=t.objects[e]),$="GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map((function(e){return Mc(t,e)}))}:Mc(t,e))),k=$.features,function(){n(2,s=Wr(o).append("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).attr("style","max-width: 100%; height: auto;")),s.append("rect").attr("width",r).attr("height",i).attr("fill","#f0f8ff");const t=s.append("g").attr("class","map-group");t.append("g").attr("class","countries"),t.append("path").attr("class","country-borders").attr("fill","none").attr("stroke","#fff").attr("stroke-width",.5).attr("stroke-linejoin","round"),b&&(l=Wr(o).append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","0.8rem").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)"));y&&(c=kc().scaleExtent([1,8]).on("zoom",(e=>{t.attr("transform",e.transform)})),s.call(c));x&&function(){const t=100,e=200,n=s.append("g").attr("class","legend").attr("transform",`translate(${r-t-20}, 20)`);n.append("rect").attr("width",t).attr("height",e).attr("fill","white").attr("stroke","#e2e8f0").attr("rx",4),n.append("text").attr("class","legend-title").attr("x",t/2).attr("y",20).attr("text-anchor","middle").attr("font-size","0.9em").attr("font-weight","bold").attr("fill","#333"),n.append("rect").attr("class","legend-gradient").attr("x",20).attr("y",40).attr("width",20).attr("height",e-60),n.append("text").attr("class","legend-min").attr("x",45).attr("y",e-15).attr("text-anchor","start").attr("alignment-baseline","middle").attr("font-size","0.8em").attr("fill","#333"),n.append("text").attr("class","legend-max").attr("x",45).attr("y",40).attr("text-anchor","start").attr("alignment-baseline","middle").attr("font-size","0.8em").attr("fill","#333"),n.append("text").attr("class","legend-mid").attr("x",45).attr("y",(e-20)/2+40).attr("text-anchor","start").attr("alignment-baseline","middle").attr("font-size","0.8em").attr("fill","#333"),A()}()}(),await S(),z(),j=!0),n(3,M=!1)}catch(t){console.error("Error loading map data:",t),n(4,C="Failed to load map data. Please try again later."),n(3,M=!1)}var t,e;const a=new ResizeObserver((()=>{o&&s&&function(){if(!s)return;s.attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]),n(15,f=Sl().fitSize([r,i],$)),h=gl().projection(f),z(),x&&s.select(".legend").attr("transform",`translate(${r-120}, 20)`)}()}));return o&&a.observe(o),()=>{o&&a.unobserve(o)}})),tt((()=>{s&&$&&z()}));return t.$$set=t=>{"data"in t&&n(6,p=t.data),"metric"in t&&n(7,v=t.metric),"width"in t&&n(8,m=t.width),"height"in t&&n(9,g=t.height),"interactive"in t&&n(0,y=t.interactive),"showLegend"in t&&n(10,x=t.showLegend),"showTooltip"in t&&n(11,b=t.showTooltip),"onCountryClick"in t&&n(12,w=t.onCountryClick)},t.$$.update=()=>{258&t.$$.dirty[0]&&n(16,r=o?.clientWidth||m),512&t.$$.dirty[0]&&n(17,i=g),8320&t.$$.dirty[0]&&(a=function(t,e){if(!e||0===e.length)return Wl(Vl).domain([0,10]);const n=e.filter((e=>void 0!==e[t]&&!isNaN(e[t]))).map((e=>e[t]));if(0===n.length)return Wl(Vl).domain([0,10]);let r,i;switch(t){case"score":r=[Math.max(0,.9*vn(n)),Math.min(10,1.05*pn(n))],i=Vl;break;case"gdp_per_capita":r=[0,1.05*pn(n)],i=Xl;break;case"social_support":r=[0,1.05*pn(n)],i=Ql;break;case"life_expectancy":r=[0,1.05*pn(n)],i=Jl;break;case"freedom":r=[0,1.05*pn(n)],i=Zl;break;case"generosity":r=[Math.min(0,1.2*vn(n)),Math.max(0,1.2*pn(n))],i=Zl;break;case"corruption":r=[0,1.05*pn(n)],i=Kl;break;case"hdi":r=[0,1],i=Vl;break;case"population":r=[0,pn(n)],i=Vl;break;default:r=[.9*vn(n),1.05*pn(n)],i=Vl}return Wl(i).domain(r)}(v,_)),212992&t.$$.dirty[0]&&r&&i&&$&&n(15,f=Sl().fitSize([r,i],$)),32768&t.$$.dirty[0]&&f&&(h=gl().projection(f))},[y,o,s,M,C,function(){s&&c&&s.transition().duration(750).call(c.transform,vc)},p,v,m,g,x,b,w,_,$,f,r,i,()=>window.location.reload(),function(t){it[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}pc.prototype;class Pc extends Tt{constructor(t){super(),Nt(this,t,Lc,Dc,s,{data:6,metric:7,width:8,height:9,interactive:0,showLegend:10,showTooltip:11,onCountryClick:12},null,[-1,-1])}}function Hc(t){let e;return{c(){e=A("div"),e.innerHTML='<div class="loading-spinner svelte-17kp166"></div> \n      <div>Loading chart data...</div>',H(e,"class","loading-indicator svelte-17kp166")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Ic(e){let n,r=!e[1]&&0===e[2].length&&Hc();return{c(){n=A("div"),r&&r.c(),H(n,"class","bar-chart-container svelte-17kp166")},m(t,i){S(t,n,i),r&&r.m(n,null),e[18](n)},p(t,[e]){t[1]||0!==t[2].length?r&&(r.d(1),r=null):r||(r=Hc(),r.c(),r.m(n,null))},i:t,o:t,d(t){t&&E(n),r&&r.d(),e[18](null)}}}function Fc(t,e,n){let r,i,a,o,s,l,c,u,d,f,{data:h=[]}=e,{metric:p="happiness_score"}=e,{width:v=900}=e,{height:m=500}=e,{margin:g={top:40,right:20,bottom:60,left:60}}=e,{showLegend:y=!0}=e,{showLabels:x=!0}=e,{sortDirection:b="desc"}=e,{maxItems:w=20}=e,{onBarClick:_=()=>{}}=e,{highlightedItems:$=[]}=e,{animationDuration:k=750}=e,{responsive:j=!0}=e;function M(){if(!u||!s||!s.length)return;u.attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]),u.select(".chart-title").attr("x",r/2).text(`${f?.label||p} by Country`);const t=Tl().domain(s.map((t=>t.country))).range([0,a]).padding(.2),e=pn(s,(t=>t.value)),n="desc"===b?0:.9*vn(s,(t=>t.value)),c=Bl().domain([n,1.05*e]).range([o,0]),h=jn(t).tickSizeOuter(0),v=Mn(c).ticks(5).tickFormat((t=>"happiness_score"===p?t.toFixed(1):"hdi"===p?t.toFixed(2):uo(".2s")(t)));u.select(".x-axis").transition().duration(k).call(h).selectAll("text").attr("transform","rotate(-45)").style("text-anchor","end").attr("dx","-.8em").attr("dy",".15em").style("font-size","0.8em"),u.select(".y-axis").transition().duration(k).call(v),u.select(".x-axis-label").attr("x",g.left+a/2).attr("y",i-g.bottom/3).text("Country"),u.select(".y-axis-label").attr("x",-(g.top+o/2)).attr("y",g.left/3).text(f?.label||p);const m=u.select(".chart-group"),y=m.selectAll(".bar").data(s,(t=>t.country));if(y.exit().transition().duration(k).attr("y",i).attr("height",0).remove(),y.transition().duration(k).attr("x",(e=>t(e.country))).attr("width",t.bandwidth()).attr("y",(t=>c(t.value))).attr("height",(t=>Math.max(0,o-c(t.value)))).attr("fill",(t=>{if($.includes(t.country)){return vi(l(t.continent)).brighter(.3).toString()}return l(t.continent)})).attr("stroke",(t=>$.includes(t.country)?"#333":"none")).attr("stroke-width",(t=>$.includes(t.country)?2:0)),y.enter().append("rect").attr("class","bar").attr("x",(e=>t(e.country))).attr("width",t.bandwidth()).attr("y",i-g.bottom).attr("height",0).attr("fill",(t=>l(t.continent))).attr("data-country",(t=>t.country)).on("mouseover",(function(t,e){Wr(this).attr("stroke","#333").attr("stroke-width",2),d.transition().duration(200).style("opacity",.9),d.html(`\n          <strong>${e.country}</strong><br>\n          <span style="color:${f?.color||"#333"}">\n            ${f?.label||p}: ${e.value.toFixed(3)}\n          </span><br>\n          <small>Rank: ${e.rank}</small>\n        `).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px")})).on("mouseout",(function(){const t=Wr(this).attr("data-country");Wr(this).attr("stroke",$.includes(t)?"#333":"none").attr("stroke-width",$.includes(t)?2:0),d.transition().duration(500).style("opacity",0)})).on("click",((t,e)=>_(e))).transition().duration(k).attr("y",(t=>c(t.value))).attr("height",(t=>Math.max(0,o-c(t.value)))),x){const e=m.selectAll(".value-label").data(s,(t=>t.country));e.exit().transition().duration(k/2).style("opacity",0).remove(),e.transition().duration(k).attr("x",(e=>t(e.country)+t.bandwidth()/2)).attr("y",(t=>c(t.value)-5)).text((t=>t.value.toFixed(1))),e.enter().append("text").attr("class","value-label").attr("text-anchor","middle").attr("x",(e=>t(e.country)+t.bandwidth()/2)).attr("y",i-g.bottom).attr("font-size","0.7em").attr("fill","#333").style("opacity",0).text((t=>t.value.toFixed(1))).transition().duration(k).attr("y",(t=>c(t.value)-5)).style("opacity",1)}else m.selectAll(".value-label").remove()}return Ge.subscribe((t=>{f=t})),Q((()=>{if(function(){n(1,u=Wr(c).append("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).attr("style","max-width: 100%; height: auto;")),u.append("g").attr("transform",`translate(${g.left}, ${g.top})`).attr("class","chart-group"),u.append("text").attr("class","chart-title").attr("x",r/2).attr("y",g.top/2).attr("text-anchor","middle").attr("font-size","1.2em").attr("font-weight","bold").attr("fill","#333"),u.append("g").attr("class","x-axis").attr("transform",`translate(${g.left}, ${i-g.bottom})`),u.append("g").attr("class","y-axis").attr("transform",`translate(${g.left}, ${g.top})`),u.append("text").attr("class","y-axis-label").attr("transform","rotate(-90)").attr("x",-(g.top+o/2)).attr("y",g.left/3).attr("text-anchor","middle").attr("font-size","0.9em").attr("fill","#555"),u.append("text").attr("class","x-axis-label").attr("x",g.left+a/2).attr("y",i-g.bottom/3).attr("text-anchor","middle").attr("font-size","0.9em").attr("fill","#555"),d=Wr(c).append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","0.8rem").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)"),y&&function(){const t=200,e=150,n={top:10,right:10,bottom:10,left:10},i=20,a=["Europe","Asia","North America","South America","Africa","Oceania"],o=u.append("g").attr("class","legend").attr("transform",`translate(${r-t-n.right}, ${g.top})`);o.append("rect").attr("width",t).attr("height",e).attr("fill","white").attr("stroke","#e2e8f0").attr("rx",4),o.append("text").attr("x",n.left).attr("y",n.top+15).attr("font-size","0.9em").attr("font-weight","bold").attr("fill","#333").text("Continents");const s=o.selectAll(".legend-item").data(a).enter().append("g").attr("class","legend-item").attr("transform",((t,e)=>`translate(${n.left}, ${n.top+30+e*i})`));s.append("rect").attr("width",15).attr("height",15).attr("fill",(t=>l(t))),s.append("text").attr("x",25).attr("y",12).attr("font-size","0.8em").attr("fill","#333").text((t=>t))}();M()}(),j){const t=new ResizeObserver((()=>{c&&M()}));return t.observe(c),()=>{t.disconnect()}}})),tt((()=>{u&&M()})),t.$$set=t=>{"data"in t&&n(3,h=t.data),"metric"in t&&n(4,p=t.metric),"width"in t&&n(5,v=t.width),"height"in t&&n(6,m=t.height),"margin"in t&&n(7,g=t.margin),"showLegend"in t&&n(8,y=t.showLegend),"showLabels"in t&&n(9,x=t.showLabels),"sortDirection"in t&&n(10,b=t.sortDirection),"maxItems"in t&&n(11,w=t.maxItems),"onBarClick"in t&&n(12,_=t.onBarClick),"highlightedItems"in t&&n(13,$=t.highlightedItems),"animationDuration"in t&&n(14,k=t.animationDuration),"responsive"in t&&n(15,j=t.responsive)},t.$$.update=()=>{var e;32801&t.$$.dirty&&n(16,r=j&&c?.clientWidth||v),64&t.$$.dirty&&n(17,i=m),65664&t.$$.dirty&&(a=r-g.left-g.right),131200&t.$$.dirty&&(o=i-g.top-g.bottom),8&t.$$.dirty&&n(2,s=(e=h)&&e.length?[...e].sort(((t,e)=>"desc"===b?e.value-t.value:t.value-e.value)).slice(0,w):[])},l=Nl().domain(["Europe","Asia","North America","South America","Africa","Oceania","Unknown"]).range(["#4C78A8","#72B7B2","#54A24B","#EECA3B","#F58518","#E45756","#9D755D"]),[c,u,s,h,p,v,m,g,y,x,b,w,_,$,k,j,r,i,function(t){it[t?"unshift":"push"]((()=>{c=t,n(0,c)}))}]}class Rc extends Tt{constructor(t){super(),Nt(this,t,Fc,Ic,s,{data:3,metric:4,width:5,height:6,margin:7,showLegend:8,showLabels:9,sortDirection:10,maxItems:11,onBarClick:12,highlightedItems:13,animationDuration:14,responsive:15})}}const{window:Oc}=k;function qc(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner"></div>',H(n,"class","loading-placeholder")},m(t,e){S(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function Bc(t){let e,n;return e=new Pc({props:{data:t[3],metric:"score",width:600,height:400,interactive:!1}}),{c(){St(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.data=t[3]),e.$set(r)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function Wc(t){let e,n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_,$,k,M,C,z,D,P,I,F,O,q,B,W,G,Y,U,V,X,K,Z,J,Q,tt=t[2].happiest.country+"",et=t[2].happiest.score.toFixed(2)+"",nt=t[2].mostImproved.country+"",rt=t[2].mostImproved.change.toFixed(2)+"",it=t[2].correlations[0].factor+"",at=(100*t[2].correlations[0].correlation).toFixed(0)+"";return{c(){e=A("div"),n=A("div"),r=A("div"),r.textContent="",i=T(),a=A("h3"),a.textContent="Happiest Country",o=T(),s=A("div"),l=N(tt),c=T(),u=A("p"),d=N("With a happiness score of "),f=N(et),h=T(),p=A("div"),v=A("div"),v.textContent="",m=T(),g=A("h3"),g.textContent="Most Improved",y=T(),x=A("div"),b=N(nt),w=T(),_=A("p"),$=N("Increased by "),k=N(rt),M=N(" points"),C=T(),z=A("div"),D=A("div"),D.textContent="",P=T(),I=A("h3"),I.textContent="Key Correlation",F=T(),O=A("div"),q=N(it),B=T(),W=A("p"),G=N(at),Y=N("%\n            correlation with happiness"),U=T(),V=A("div"),X=A("p"),X.textContent="Discover more patterns and insights by exploring the full dataset.",K=T(),Z=A("button"),Z.textContent="Start Exploring",H(r,"class","insight-icon"),H(s,"class","insight-value"),H(n,"class","insight-card"),H(v,"class","insight-icon"),H(x,"class","insight-value"),H(p,"class","insight-card"),H(D,"class","insight-icon"),H(O,"class","insight-value"),H(z,"class","insight-card"),H(e,"class","insight-cards"),H(V,"class","insights-cta")},m(E,A){S(E,e,A),j(e,n),j(n,r),j(n,i),j(n,a),j(n,o),j(n,s),j(s,l),j(n,c),j(n,u),j(u,d),j(u,f),j(e,h),j(e,p),j(p,v),j(p,m),j(p,g),j(p,y),j(p,x),j(x,b),j(p,w),j(p,_),j(_,$),j(_,k),j(_,M),j(e,C),j(e,z),j(z,D),j(z,P),j(z,I),j(z,F),j(z,O),j(O,q),j(z,B),j(z,W),j(W,G),j(W,Y),S(E,U,A),S(E,V,A),j(V,X),j(V,K),j(V,Z),J||(Q=L(Z,"click",t[5]),J=!0)},p(t,e){4&e&&tt!==(tt=t[2].happiest.country+"")&&R(l,tt),4&e&&et!==(et=t[2].happiest.score.toFixed(2)+"")&&R(f,et),4&e&&nt!==(nt=t[2].mostImproved.country+"")&&R(b,nt),4&e&&rt!==(rt=t[2].mostImproved.change.toFixed(2)+"")&&R(k,rt),4&e&&it!==(it=t[2].correlations[0].factor+"")&&R(q,it),4&e&&at!==(at=(100*t[2].correlations[0].correlation).toFixed(0)+"")&&R(G,at)},d(t){t&&E(e),t&&E(U),t&&E(V),J=!1,Q()}}}function Gc(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner"></div> \n        <p>Loading highlights...</p>',H(n,"class","loading-container")},m(t,e){S(t,n,e)},p:t,d(t){t&&E(n)}}}function Yc(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner"></div> \n        <p>Loading rankings...</p>',H(n,"class","loading-container")},m(t,e){S(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function Uc(t){let e,n,r,i,a,o,s,l,c,u;return n=new Rc({props:{data:t[1],metric:"value",xField:"country",height:400,showLegend:!1,showLabels:!0,maxItems:5}}),{c(){e=A("div"),St(n.$$.fragment),r=T(),i=A("div"),a=A("p"),a.textContent="These countries consistently rank at the top of the happiness index.\n          What can we learn from their social policies, economic systems, and\n          cultural values?",o=T(),s=A("button"),s.textContent="See Full Rankings",H(e,"class","rankings-chart"),H(i,"class","rankings-info")},m(d,f){S(d,e,f),Et(n,e,null),S(d,r,f),S(d,i,f),j(i,a),j(i,o),j(i,s),l=!0,c||(u=L(s,"click",t[6]),c=!0)},p(t,e){const r={};2&e&&(r.data=t[1]),n.$set(r)},i(t){l||(wt(n.$$.fragment,t),l=!0)},o(t){_t(n.$$.fragment,t),l=!1},d(t){t&&E(e),zt(n),t&&E(r),t&&E(i),c=!1,u()}}}function Vc(t){let e,n,r,i,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_,$,k,M,C,z,N,D,P,I,F,R,O,q,B,W,G,Y,U,V,X,K,Z,J,Q,tt,et,nt,rt,it,at,ot,st,lt,ut=!1,dt=()=>{ut=!1};ct(t[7]);const ft=[Bc,qc],ht=[];function pt(t,e){return t[3].length>0?0:1}function vt(t,e){return t[0]?Gc:Wc}_=pt(t),$=ht[_]=ft[_](t);let mt=vt(t),gt=mt(t);const yt=[Uc,Yc],$t=[];function jt(t,e){return t[1].length>0?0:1}return R=jt(t),O=$t[R]=yt[R](t),{c(){n=A("div"),r=A("section"),i=A("div"),o=A("h1"),o.textContent="HappiScope",l=T(),c=A("h2"),c.textContent="Visualizing Global Happiness",d=T(),f=A("p"),f.textContent="Explore how happiness varies across the world, discover what factors\n        contribute most to well-being, and see how happiness has changed over\n        time.",p=T(),v=A("div"),m=A("button"),m.textContent="Explore the Data",g=T(),y=A("button"),y.textContent="Learn About the Project",b=T(),w=A("div"),$.c(),M=T(),C=A("section"),z=A("h2"),z.textContent="Key Insights",N=T(),gt.c(),D=T(),P=A("section"),I=A("h2"),I.textContent="Happiest Countries",F=T(),O.c(),q=T(),B=A("section"),W=A("h2"),W.textContent="About HappiScope",G=T(),Y=A("div"),U=A("div"),V=A("p"),V.textContent="HappiScope is an interactive data visualization project that explores\n          global happiness trends using data from the World Happiness Report,\n          Human Development Index (HDI), and global population statistics.",X=T(),K=A("p"),K.textContent='Created for the "Data Visualization" course at EPFL, this project\n          demonstrates how effective visualization can uncover patterns and\n          insights in complex global datasets.',Z=T(),J=A("h3"),J.textContent="Key Features:",Q=T(),tt=A("ul"),tt.innerHTML="<li>Interactive world map visualization</li> \n          <li>Country rankings by multiple metrics</li> \n          <li>Time-series analysis across 10 years (2015-2024)</li> \n          <li>Correlation analysis between happiness and contributing factors</li> \n          <li>Standardized data from multiple sources</li> \n          <li>Responsive design for both desktop and mobile</li>",et=T(),nt=A("div"),rt=A("button"),rt.textContent="Learn About Methodology",it=T(),at=A("div"),at.innerHTML='<img src="/images/data-visualization.svg" alt="Data visualization illustration" onerror="this.onerror=null; this.src=&#39;https://placehold.co/300x300/e6f7ff/1e3a8a?text=Data+Visualization&#39;"/>',H(m,"class","primary-btn"),H(y,"class","secondary-btn"),H(v,"class","hero-actions"),H(i,"class","hero-content"),H(w,"class","hero-visual"),H(r,"class","hero-section"),H(C,"class","insights-section animate-section"),H(P,"class","rankings-section animate-section"),H(nt,"class","about-cta"),H(U,"class","about-text"),H(at,"class","about-image"),H(Y,"class","about-content"),H(B,"class","about-section animate-section"),H(n,"class","home-container")},m(a,s){S(a,n,s),j(n,r),j(r,i),j(i,o),j(i,l),j(i,c),j(i,d),j(i,f),j(i,p),j(i,v),j(v,m),j(v,g),j(v,y),j(r,b),j(r,w),ht[_].m(w,null),j(n,M),j(n,C),j(C,z),j(C,N),gt.m(C,null),j(n,D),j(n,P),j(P,I),j(P,F),$t[R].m(P,null),j(n,q),j(n,B),j(B,W),j(B,G),j(B,Y),j(Y,U),j(U,V),j(U,X),j(U,K),j(U,Z),j(U,J),j(U,Q),j(U,tt),j(U,et),j(U,nt),j(nt,rt),j(Y,it),j(Y,at),ot=!0,st||(lt=[L(Oc,"scroll",(()=>{ut=!0,clearTimeout(e),e=setTimeout(dt,100),t[7]()})),L(m,"click",t[5]),L(y,"click",Kc),L(rt,"click",Kc)],st=!0)},p(t,[n]){16&n&&!ut&&(ut=!0,clearTimeout(e),scrollTo(Oc.pageXOffset,t[4]),e=setTimeout(dt,100));let r=_;_=pt(t),_===r?ht[_].p(t,n):(xt(),_t(ht[r],1,1,(()=>{ht[r]=null})),bt(),$=ht[_],$?$.p(t,n):($=ht[_]=ft[_](t),$.c()),wt($,1),$.m(w,null)),mt===(mt=vt(t))&&gt?gt.p(t,n):(gt.d(1),gt=mt(t),gt&&(gt.c(),gt.m(C,null)));let i=R;R=jt(t),R===i?$t[R].p(t,n):(xt(),_t($t[i],1,1,(()=>{$t[i]=null})),bt(),O=$t[R],O?O.p(t,n):(O=$t[R]=yt[R](t),O.c()),wt(O,1),O.m(P,null))},i(t){ot||(s||ct((()=>{s=kt(o,ke,{y:-20,duration:800}),s.start()})),u||ct((()=>{u=kt(c,ke,{y:-10,duration:800,delay:300}),u.start()})),h||ct((()=>{h=kt(f,ke,{y:10,duration:800,delay:500}),h.start()})),x||ct((()=>{x=kt(v,ke,{y:20,duration:800,delay:700}),x.start()})),wt($),k||ct((()=>{k=kt(w,$e,{duration:1500}),k.start()})),wt(O),ot=!0)},o(t){_t($),_t(O),ot=!1},d(t){t&&E(n),ht[_].d(),gt.d(),$t[R].d(),st=!1,a(lt)}}}const Xc=2024;function Kc(){window.location.href="#/methodology"}function Zc(t,e,n){let r,i=!0,a=[],o={happiest:{country:"",score:0},mostImproved:{country:"",change:0},correlations:[{factor:"GDP per Capita",correlation:0},{factor:"Social Support",correlation:0},{factor:"Life Expectancy",correlation:0}]},s=[];return(new Date).getFullYear(),Q((async()=>{He.set(Xc),await async function(){n(0,i=!0);try{const e=await De(Xc);if(e&&e.length>0){n(3,s=e);const r=await Pe(Xc,"score",5);r?.length>0&&(n(1,a=r),n(2,o.happiest={country:r[0].country,score:r[0].value},o),t=r[0].country,Ue.update((e=>{const n=e.filter((e=>e!==t));return[t,...n].slice(0,10)})))}const r=await Ae();if(r&&r.length>0){const t=function(t){if(!t||0===t.length)return null;const e=[...new Set(t.map((t=>t.year)))].sort(),n=e[0],r=e[e.length-1],i=t.filter((t=>t.year===n)),a=t.filter((t=>t.year===r)),o=[];return i.forEach((t=>{const e=a.find((e=>e.country===t.country));e&&void 0!==t.score&&void 0!==e.score&&o.push({country:t.country,startScore:t.score,endScore:e.score,change:e.score-t.score})})),o.sort(((t,e)=>e.change-t.change)),o.length>0?{country:o[0].country,change:o[0].change}:null}(r);t&&n(2,o.mostImproved=t,o)}const l=await async function(){return await ze(Ce)}();if(l&&l.data){const t=[{name:"GDP per Capita",key:"gdp_per_capita"},{name:"Social Support",key:"social_support"},{name:"Life Expectancy",key:"life_expectancy"}].map((t=>{const e=l.columns.indexOf(t.key),n=l.columns.indexOf("score");return e>=0&&n>=0?{factor:t.name,correlation:parseFloat(l.data[n][e].toFixed(2))}:{factor:t.name,correlation:.5}}));t.sort(((t,e)=>Math.abs(e.correlation)-Math.abs(t.correlation))),n(2,o.correlations=t,o)}n(0,i=!1)}catch(t){console.error("Error loading highlights:",t),n(0,i=!1)}var t}();const t=document.querySelectorAll(".animate-section"),e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&t.target.classList.add("visible")}))}),{threshold:.2});return t.forEach((t=>{e.observe(t)})),()=>{t.forEach((t=>{e.unobserve(t)}))}})),[i,a,o,s,r,function(){He.set(Xc),Fe.set("score"),Re.set("map"),window.location.href="#/explore"},function(){He.set(Xc),Fe.set("score"),Re.set("ranking"),window.location.href="#/explore"},function(){n(4,r=Oc.pageYOffset)}]}class Jc extends Tt{constructor(t){super(),Nt(this,t,Zc,Vc,s,{})}}function Qc(t){let e;return{c(){e=N("Start Exploring")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function tu(t){let e,n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w;return b=new Xt({props:{to:"/explore",class:"explore-button",$$slots:{default:[Qc]},$$scope:{ctx:t}}}),{c(){e=A("div"),n=A("section"),n.innerHTML='<h1 class="svelte-kd7r77">About HappiScope</h1> \n    <p class="lead svelte-kd7r77">HappiScope is an interactive data visualization project developed for the COM-480 Data Visualization \n      course at EPFL that explores global happiness metrics and their contributing factors.</p> \n    \n    <h2 class="svelte-kd7r77">Project Vision</h2> \n    <p class="svelte-kd7r77">In a world often focused on economic metrics alone, our visualization tools help users \n      understand the multidimensional nature of well-being and what truly contributes to societal happiness.\n      Through interactive visualizations, we aim to make complex happiness data accessible and engaging\n      for researchers, policymakers, educators, and the general public.</p>',r=T(),i=A("section"),i.innerHTML='<h2 class="svelte-kd7r77">Our Team</h2> \n    <div class="team-grid svelte-kd7r77"><div class="team-member svelte-kd7r77"><div class="member-avatar svelte-kd7r77">CJ</div> \n        <h3>Chang Jin</h3> \n        <p class="member-role svelte-kd7r77">Data Processing &amp; Visualization</p> \n        <p class="svelte-kd7r77">Responsible for happiness data processing and creating interactive visualizations using D3.js.</p></div> \n      \n      <div class="team-member svelte-kd7r77"><div class="member-avatar svelte-kd7r77">RL</div> \n        <h3>Rizhong Lin</h3> \n        <p class="member-role svelte-kd7r77">Frontend Development &amp; UX Design</p> \n        <p class="svelte-kd7r77">Focused on building the website using Svelte and creating an intuitive user experience.</p></div> \n      \n      <div class="team-member svelte-kd7r77"><div class="member-avatar svelte-kd7r77">AW</div> \n        <h3>Anlan Wang</h3> \n        <p class="member-role svelte-kd7r77">Data Analysis &amp; Research</p> \n        <p class="svelte-kd7r77">Led the research on happiness metrics and analysis of key trends and insights.</p></div></div>',a=T(),o=A("section"),o.innerHTML='<h2 class="svelte-kd7r77">Project Goals</h2> \n    <p class="svelte-kd7r77">HappiScope aims to address several key research questions through interactive visualization:</p> \n    <ul class="goals-list svelte-kd7r77"><li class="svelte-kd7r77"><span class="goal-number svelte-kd7r77">01</span> \n        <div class="goal-content svelte-kd7r77"><h3 class="svelte-kd7r77">Global Happiness Trends</h3> \n          <p class="svelte-kd7r77">Explore how global happiness has changed over the past decade (2015-2024), and identify regional patterns.</p></div></li> \n      \n      <li class="svelte-kd7r77"><span class="goal-number svelte-kd7r77">02</span> \n        <div class="goal-content svelte-kd7r77"><h3 class="svelte-kd7r77">Factor Analysis</h3> \n          <p class="svelte-kd7r77">Identify which factors correlate most strongly with happiness across different regions and income levels.</p></div></li> \n      \n      <li class="svelte-kd7r77"><span class="goal-number svelte-kd7r77">03</span> \n        <div class="goal-content svelte-kd7r77"><h3 class="svelte-kd7r77">Economic vs. Social Metrics</h3> \n          <p class="svelte-kd7r77">Compare economic metrics like GDP to social support metrics in predicting happiness.</p></div></li> \n      \n      <li class="svelte-kd7r77"><span class="goal-number svelte-kd7r77">04</span> \n        <div class="goal-content svelte-kd7r77"><h3 class="svelte-kd7r77">Impact Analysis</h3> \n          <p class="svelte-kd7r77">Analyze how socioeconomic shocks like the COVID-19 pandemic affected happiness trends globally.</p></div></li> \n      \n      <li class="svelte-kd7r77"><span class="goal-number svelte-kd7r77">05</span> \n        <div class="goal-content svelte-kd7r77"><h3 class="svelte-kd7r77">Comparative Analysis</h3> \n          <p class="svelte-kd7r77">Identify the most significant differences in happiness determinants between high- and low-income countries.</p></div></li></ul>',s=T(),l=A("section"),l.innerHTML='<h2 class="svelte-kd7r77">Target Audience</h2> \n    <div class="audience-grid svelte-kd7r77"><div class="audience-card svelte-kd7r77"><div class="audience-icon svelte-kd7r77"></div> \n        <h3>Policymakers</h3> \n        <p class="svelte-kd7r77">Who require evidence-based visualizations to understand well-being determinants beyond economic indicators.</p></div> \n      \n      <div class="audience-card svelte-kd7r77"><div class="audience-icon svelte-kd7r77"></div> \n        <h3>Researchers</h3> \n        <p class="svelte-kd7r77">In fields like economics, psychology, and sociology who can explore complex relationships between variables.</p></div> \n      \n      <div class="audience-card svelte-kd7r77"><div class="audience-icon svelte-kd7r77"></div> \n        <h3>Educators</h3> \n        <p class="svelte-kd7r77">Teaching concepts related to development, well-being, and global affairs who need visual teaching tools.</p></div> \n      \n      <div class="audience-card svelte-kd7r77"><div class="audience-icon svelte-kd7r77"></div> \n        <h3>General Public</h3> \n        <p class="svelte-kd7r77">Interested in understanding global happiness patterns and where their countries stand comparatively.</p></div></div>',c=T(),u=A("section"),d=A("h2"),d.textContent="Technologies Used",f=T(),h=A("div"),h.innerHTML='<div class="tech svelte-kd7r77"><h3 class="svelte-kd7r77">Svelte</h3> \n        <p class="svelte-kd7r77">For reactive UI components and state management</p></div> \n      \n      <div class="tech svelte-kd7r77"><h3 class="svelte-kd7r77">D3.js</h3> \n        <p class="svelte-kd7r77">For powerful, customizable data visualizations</p></div> \n      \n      <div class="tech svelte-kd7r77"><h3 class="svelte-kd7r77">Python</h3> \n        <p class="svelte-kd7r77">For data preprocessing and analysis</p></div> \n      \n      <div class="tech svelte-kd7r77"><h3 class="svelte-kd7r77">GitHub Pages</h3> \n        <p class="svelte-kd7r77">For website hosting and distribution</p></div>',p=T(),v=A("div"),m=A("h3"),m.textContent="Explore the Data",g=T(),y=A("p"),y.textContent="Ready to dive into the visualizations? Visit our interactive data explorer to discover global happiness patterns.",x=T(),St(b.$$.fragment),H(n,"class","about-section svelte-kd7r77"),H(i,"class","about-section svelte-kd7r77"),H(o,"class","about-section svelte-kd7r77"),H(l,"class","about-section svelte-kd7r77"),H(d,"class","svelte-kd7r77"),H(h,"class","tech-stack svelte-kd7r77"),H(m,"class","svelte-kd7r77"),H(y,"class","svelte-kd7r77"),H(v,"class","cta-box svelte-kd7r77"),H(u,"class","about-section svelte-kd7r77"),H(e,"class","about-container svelte-kd7r77")},m(t,_){S(t,e,_),j(e,n),j(e,r),j(e,i),j(e,a),j(e,o),j(e,s),j(e,l),j(e,c),j(e,u),j(u,d),j(u,f),j(u,h),j(u,p),j(u,v),j(v,m),j(v,g),j(v,y),j(v,x),Et(b,v,null),w=!0},p(t,[e]){const n={};1&e&&(n.$$scope={dirty:e,ctx:t}),b.$set(n)},i(t){w||(wt(b.$$.fragment,t),w=!0)},o(t){_t(b.$$.fragment,t),w=!1},d(t){t&&E(e),zt(b)}}}class eu extends Tt{constructor(t){super(),Nt(this,t,null,tu,s,{})}}function nu(t){let e;return{c(){e=A("div"),e.innerHTML='<div class="loading-spinner svelte-2xkc65"></div> \n      <div>Loading chart data...</div>',H(e,"class","loading-indicator svelte-2xkc65")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function ru(e){let n,r=!e[2]||0===Object.keys(e[0]).length,i=r&&nu();return{c(){n=A("div"),i&&i.c(),H(n,"class","line-chart-container svelte-2xkc65")},m(t,r){S(t,n,r),i&&i.m(n,null),e[16](n)},p(t,[e]){5&e&&(r=!t[2]||0===Object.keys(t[0]).length),r?i||(i=nu(),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&E(n),i&&i.d(),e[16](null)}}}function iu(t,e,n){let r,i,a,o,s,l,c,u,d,f,{data:h={}}=e,{metric:p="happiness_score"}=e,{width:v=900}=e,{height:m=500}=e,{margin:g={top:40,right:80,bottom:60,left:60}}=e,{showLegend:y=!0}=e,{showTooltip:x=!0}=e,{showPoints:b=!0}=e,{animationDuration:w=750}=e,{responsive:_=!0}=e,{onPointClick:$=()=>{}}=e;function k(){if(!u||!h||0===Object.keys(h).length)return;u.attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]),u.select(".chart-title").attr("x",r/2).text(`${f?.label||p} Trends Over Time`);const t=Object.values(h).flat().filter((t=>t&&void 0!==t.value&&void 0!==t.year));if(0===t.length)return;const e=[...new Set(t.map((t=>t.year)))].sort(((t,e)=>t-e)),n=e[0],c=e[e.length-1],v=.9*vn(t,(t=>t.value)),m=1.05*pn(t,(t=>t.value)),_=Bl().domain([n,c]).range([0,a]),k=Bl().domain([Math.max(0,v),m]).range([o,0]),j=jn(_).tickFormat(uo("d")).ticks(Math.min(c-n+1,10)),M=Mn(k).ticks(5).tickFormat((t=>"happiness_score"===p?t.toFixed(1):"hdi"===p?t.toFixed(2):uo(".2s")(t)));u.select(".x-axis").transition().duration(w).call(j),u.select(".y-axis").transition().duration(w).call(M),u.select(".x-axis-label").attr("x",g.left+a/2).attr("y",i-g.bottom/3).text("Year"),u.select(".y-axis-label").attr("x",-(g.top+o/2)).attr("y",g.left/3).text(f?.label||p);const C=u.select(".chart-group"),S=ac().x((t=>_(t.year))).y((t=>k(t.value))).curve(dc);C.selectAll(".grid-line-y").data(k.ticks(5)).join((t=>t.append("line").attr("class","grid-line-y").attr("x1",0).attr("x2",a).attr("stroke","#e2e8f0").attr("stroke-width",1).attr("stroke-dasharray","3,3").attr("y1",(t=>k(t))).attr("y2",(t=>k(t))).style("opacity",0).transition().duration(w).style("opacity",.5)),(t=>t.transition().duration(w).attr("y1",(t=>k(t))).attr("y2",(t=>k(t)))),(t=>t.transition().duration(w).style("opacity",0).remove()));const E=Object.keys(h);if(C.selectAll(".line-path").data(E,(t=>t)).join((t=>t.append("path").attr("class","line-path").attr("data-country",(t=>t)).attr("fill","none").attr("stroke",(t=>s(t))).attr("stroke-width",((t,e)=>l.find((e=>e.country===t))?.strokeWidth||2)).attr("stroke-dasharray",((t,e)=>l.find((e=>e.country===t))?.strokeDasharray||"none")).attr("d",(t=>{const e=h[t].sort(((t,e)=>t.year-e.year));return S(e)})).style("opacity",0).transition().duration(w).style("opacity",1)),(t=>t.transition().duration(w).attr("stroke",(t=>s(t))).attr("stroke-width",((t,e)=>l.find((e=>e.country===t))?.strokeWidth||2)).attr("stroke-dasharray",((t,e)=>l.find((e=>e.country===t))?.strokeDasharray||"none")).attr("d",(t=>{const e=h[t].sort(((t,e)=>t.year-e.year));return S(e)}))),(t=>t.transition().duration(w).style("opacity",0).remove())),b){const t=[];Object.keys(h).forEach((e=>{h[e].forEach((n=>{t.push({country:e,year:n.year,value:n.value})}))})),C.selectAll(".data-point").data(t,(t=>`${t.country}-${t.year}`)).join((t=>t.append("circle").attr("class","data-point").attr("data-country",(t=>t.country)).attr("data-year",(t=>t.year)).attr("cx",(t=>_(t.year))).attr("cy",(t=>k(t.value))).attr("r",0).attr("fill",(t=>s(t.country))).attr("stroke","#fff").attr("stroke-width",1).style("cursor","pointer").on("mouseover",(function(t,e){x&&(Wr(this).attr("r",6).attr("stroke-width",2),d.transition().duration(200).style("opacity",.9),d.html(`\n                <strong>${e.country}</strong><br>\n                <span style="color:${f?.color||s(e.country)}">\n                  ${f?.label||p}: ${e.value.toFixed(3)}\n                </span><br>\n                <small>Year: ${e.year}</small>\n              `).style("left",t.pageX+10+"px").style("top",t.pageY-28+"px"))})).on("mouseout",(function(){x&&(Wr(this).attr("r",4).attr("stroke-width",1),d.transition().duration(500).style("opacity",0))})).on("click",((t,e)=>$(e))).transition().duration(w).attr("r",4)),(t=>t.transition().duration(w).attr("cx",(t=>_(t.year))).attr("cy",(t=>k(t.value))).attr("fill",(t=>s(t.country)))),(t=>t.transition().duration(w).attr("r",0).remove()))}else C.selectAll(".data-point").remove();y&&function(){const t=Math.max(120,25*Object.keys(h).length+30),e={top:10,right:10,bottom:10,left:10},n=22,r=u.select(".legend");r.select(".legend-background").attr("height",t);const i=r.selectAll(".legend-item").data(Object.keys(h),(t=>t));i.exit().remove(),i.attr("transform",((t,r)=>`translate(${e.left+8}, ${e.top+30+r*n})`)),i.select("line").attr("stroke",(t=>s(t))).attr("stroke-width",(t=>l.find((e=>e.country===t))?.strokeWidth||2)).attr("stroke-dasharray",(t=>l.find((e=>e.country===t))?.strokeDasharray||"none")),i.select("text").text((t=>t));const a=i.enter().append("g").attr("class","legend-item").attr("transform",((t,r)=>`translate(${e.left+8}, ${e.top+30+r*n})`));a.append("line").attr("x1",0).attr("y1",0).attr("x2",20).attr("y2",0).attr("stroke",(t=>s(t))).attr("stroke-width",(t=>l.find((e=>e.country===t))?.strokeWidth||2)).attr("stroke-dasharray",(t=>l.find((e=>e.country===t))?.strokeDasharray||"none")),b&&a.append("circle").attr("cx",10).attr("cy",0).attr("r",4).attr("fill",(t=>s(t))).attr("stroke","#fff").attr("stroke-width",1);a.append("text").attr("x",30).attr("y",4).attr("font-size","0.8em").attr("fill","#333").text((t=>t))}()}return Ge.subscribe((t=>{f=t})),Q((()=>{if(function(){n(2,u=Wr(c).append("svg").attr("width",r).attr("height",i).attr("viewBox",[0,0,r,i]).attr("style","max-width: 100%; height: auto;")),u.append("g").attr("transform",`translate(${g.left}, ${g.top})`).attr("class","chart-group"),u.append("text").attr("class","chart-title").attr("x",r/2).attr("y",g.top/2).attr("text-anchor","middle").attr("font-size","1.2em").attr("font-weight","bold").attr("fill","#333"),u.append("g").attr("class","x-axis").attr("transform",`translate(${g.left}, ${i-g.bottom})`),u.append("g").attr("class","y-axis").attr("transform",`translate(${g.left}, ${g.top})`),u.append("text").attr("class","y-axis-label").attr("transform","rotate(-90)").attr("x",-(g.top+o/2)).attr("y",g.left/3).attr("text-anchor","middle").attr("font-size","0.9em").attr("fill","#555"),u.append("text").attr("class","x-axis-label").attr("x",g.left+a/2).attr("y",i-g.bottom/3).attr("text-anchor","middle").attr("font-size","0.9em").attr("fill","#555"),x&&(d=Wr(c).append("div").attr("class","tooltip").style("opacity",0).style("position","absolute").style("background-color","white").style("border","1px solid #ddd").style("border-radius","3px").style("padding","8px").style("pointer-events","none").style("font-size","0.8rem").style("box-shadow","0 2px 4px rgba(0,0,0,0.1)"));y&&function(){const t=240,e=Math.max(120,25*Object.keys(h).length+30),n={top:10,right:10,bottom:10,left:10},i=u.append("g").attr("class","legend").attr("transform",`translate(${r-t-n.right}, ${g.top})`);i.append("rect").attr("class","legend-background").attr("width",t).attr("height",e).attr("fill","white").attr("stroke","#e2e8f0").attr("rx",4),i.append("text").attr("class","legend-title").attr("x",n.left+8).attr("y",n.top+16).attr("font-size","0.9em").attr("font-weight","bold").attr("fill","#333").text("Countries")}();k()}(),_){const t=new ResizeObserver((()=>{c&&k()}));return t.observe(c),()=>{t.disconnect()}}})),tt((()=>{u&&k()})),t.$$set=t=>{"data"in t&&n(0,h=t.data),"metric"in t&&n(3,p=t.metric),"width"in t&&n(4,v=t.width),"height"in t&&n(5,m=t.height),"margin"in t&&n(6,g=t.margin),"showLegend"in t&&n(7,y=t.showLegend),"showTooltip"in t&&n(8,x=t.showTooltip),"showPoints"in t&&n(9,b=t.showPoints),"animationDuration"in t&&n(10,w=t.animationDuration),"responsive"in t&&n(11,_=t.responsive),"onPointClick"in t&&n(12,$=t.onPointClick)},t.$$.update=()=>{2066&t.$$.dirty&&n(14,r=_&&c?.clientWidth||v),32&t.$$.dirty&&n(15,i=m),16448&t.$$.dirty&&(a=r-g.left-g.right),32832&t.$$.dirty&&(o=i-g.top-g.bottom),8193&t.$$.dirty&&(l=Object.keys(h).map(((t,e)=>({country:t,color:s(t),strokeWidth:2.5,strokeDasharray:e%3==0?"none":e%3==1?"5,5":"2,2"}))))},n(13,s=Nl(Yl)),[h,c,u,p,v,m,g,y,x,b,w,_,$,s,r,i,function(t){it[t?"unshift":"push"]((()=>{c=t,n(1,c)}))}]}class au extends Tt{constructor(t){super(),Nt(this,t,iu,ru,s,{data:0,metric:3,width:4,height:5,margin:6,showLegend:7,showTooltip:8,showPoints:9,animationDuration:10,responsive:11,onPointClick:12})}}function ou(t,e,n){const r=t.slice();return r[34]=e[n],r}function su(t,e,n){const r=t.slice();return r[34]=e[n],r}function lu(t,e,n){const r=t.slice();return r[34]=e[n],r}function cu(t,e,n){const r=t.slice();return r[34]=e[n],r}function uu(t,e,n){const r=t.slice();return r[43]=e[n],r}function du(e){let n,r,i=e[43]+"";return{c(){n=A("option"),r=N(i),n.__value=e[43],n.value=n.__value},m(t,e){S(t,n,e),j(n,r)},p:t,d(t){t&&E(n)}}}function fu(t){let e,n=t[7],r=[];for(let e=0;e<n.length;e+=1)r[e]=hu(cu(t,n,e));return{c(){e=A("ul");for(let t=0;t<r.length;t+=1)r[t].c();H(e,"class","search-results svelte-107j6ej")},m(t,n){S(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(524416&i[0]){let a;for(n=t[7],a=0;a<n.length;a+=1){const o=cu(t,n,a);r[a]?r[a].p(o,i):(r[a]=hu(o),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(t){t&&E(e),z(r,t)}}}function hu(t){let e,n,r,i,o,s,l=t[34]+"";function c(){return t[20](t[34])}function u(...e){return t[21](t[34],...e)}return{c(){e=A("li"),n=N(l),r=T(),H(e,"tabindex","0"),H(e,"role","button"),H(e,"aria-label",i="Select "+t[34]),H(e,"class","svelte-107j6ej")},m(t,i){S(t,e,i),j(e,n),j(e,r),o||(s=[L(e,"click",c),L(e,"keydown",u)],o=!0)},p(r,a){t=r,128&a[0]&&l!==(l=t[34]+"")&&R(n,l),128&a[0]&&i!==(i="Select "+t[34])&&H(e,"aria-label",i)},d(t){t&&E(e),o=!1,a(s)}}}function pu(t){let e,n,r,i;const a=[xu,yu,gu],o=[];function s(t,e){return"map"===t[3]?0:"ranking"===t[3]?1:"comparison"===t[3]?2:-1}return~(n=s(t))&&(r=o[n]=a[n](t)),{c(){e=A("div"),r&&r.c(),H(e,"class","visualization-container svelte-107j6ej")},m(t,r){S(t,e,r),~n&&o[n].m(e,null),i=!0},p(t,i){let l=n;n=s(t),n===l?~n&&o[n].p(t,i):(r&&(xt(),_t(o[l],1,1,(()=>{o[l]=null})),bt()),~n?(r=o[n],r?r.p(t,i):(r=o[n]=a[n](t),r.c()),wt(r,1),r.m(e,null)):r=null)},i(t){i||(wt(r),i=!0)},o(t){_t(r),i=!1},d(t){t&&E(e),~n&&o[n].d()}}}function vu(e){let n,r,i,a,o,s,l;return{c(){n=A("div"),r=A("p"),i=N(e[5]),a=T(),o=A("button"),o.textContent="Retry",H(r,"class","error-message svelte-107j6ej"),H(o,"class","svelte-107j6ej"),H(n,"class","error-container svelte-107j6ej")},m(t,c){S(t,n,c),j(n,r),j(r,i),j(n,a),j(n,o),s||(l=L(o,"click",e[13]),s=!0)},p(t,e){32&e[0]&&R(i,t[5])},i:t,o:t,d(t){t&&E(n),s=!1,l()}}}function mu(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner svelte-107j6ej"></div> \n      <p>Loading visualization data...</p>',H(n,"class","loading-container svelte-107j6ej")},m(t,e){S(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function gu(t){let e,n,r,i,a,o,s,l,c,u,d=(t[10]?.label||t[9])+"";const f=[wu,bu],h=[];function p(t,e){return 2052&e[0]&&(s=null),null==s&&(s=!!(t[11].length>0&&Object.keys(t[2]).length>0)),s?0:1}return l=p(t,[-1,-1]),c=h[l]=f[l](t),{c(){e=A("div"),n=A("h3"),r=N("Country Comparison: "),i=N(d),a=N(" (2015-2024)"),o=T(),c.c(),H(e,"class","comparison-view svelte-107j6ej")},m(t,s){S(t,e,s),j(e,n),j(n,r),j(n,i),j(n,a),j(e,o),h[l].m(e,null),u=!0},p(t,n){(!u||1536&n[0])&&d!==(d=(t[10]?.label||t[9])+"")&&R(i,d);let r=l;l=p(t,n),l===r?h[l].p(t,n):(xt(),_t(h[r],1,1,(()=>{h[r]=null})),bt(),c=h[l],c?c.p(t,n):(c=h[l]=f[l](t),c.c()),wt(c,1),c.m(e,null))},i(t){u||(wt(c),u=!0)},o(t){_t(c),u=!1},d(t){t&&E(e),h[l].d()}}}function yu(t){let e,n,r,i,a,o,s,l,c=(t[10]?.label||t[9])+"";const u=[ku,$u],d=[];function f(t,e){return t[1]&&t[1].length>0?0:1}return o=f(t),s=d[o]=u[o](t),{c(){e=A("div"),n=A("h3"),r=N("Top 20 Countries by "),i=N(c),a=T(),s.c(),H(e,"class","ranking-view svelte-107j6ej")},m(t,s){S(t,e,s),j(e,n),j(n,r),j(n,i),j(e,a),d[o].m(e,null),l=!0},p(t,n){(!l||1536&n[0])&&c!==(c=(t[10]?.label||t[9])+"")&&R(i,c);let r=o;o=f(t),o===r?d[o].p(t,n):(xt(),_t(d[r],1,1,(()=>{d[r]=null})),bt(),s=d[o],s?s.p(t,n):(s=d[o]=u[o](t),s.c()),wt(s,1),s.m(e,null))},i(t){l||(wt(s),l=!0)},o(t){_t(s),l=!1},d(t){t&&E(e),d[o].d()}}}function xu(t){let e,n,r,i,a,o,s,l,c,u,d,f=(t[10]?.label||t[9])+"";n=new Pc({props:{data:t[0],metric:t[9],height:600,showLegend:!0,interactive:!0,onCountryClick:t[14]}});let h=t[11].length>0&&Cu(t);return{c(){e=A("div"),St(n.$$.fragment),r=T(),i=A("div"),a=A("h3"),o=N(f),s=N(" by Country"),l=T(),c=A("p"),c.textContent="Click on countries to select them for comparison. Selected\n              countries will appear below.",u=T(),h&&h.c(),H(a,"class","svelte-107j6ej"),H(i,"class","map-info svelte-107j6ej"),H(e,"class","map-view svelte-107j6ej")},m(t,f){S(t,e,f),Et(n,e,null),j(e,r),j(e,i),j(i,a),j(a,o),j(a,s),j(i,l),j(i,c),j(i,u),h&&h.m(i,null),d=!0},p(t,e){const r={};1&e[0]&&(r.data=t[0]),512&e[0]&&(r.metric=t[9]),n.$set(r),(!d||1536&e[0])&&f!==(f=(t[10]?.label||t[9])+"")&&R(o,f),t[11].length>0?h?h.p(t,e):(h=Cu(t),h.c(),h.m(i,null)):h&&(h.d(1),h=null)},i(t){d||(wt(n.$$.fragment,t),d=!0)},o(t){_t(n.$$.fragment,t),d=!1},d(t){t&&E(e),zt(n),h&&h.d()}}}function bu(e){let n,r,i,a,o,s;return{c(){n=A("div"),r=A("p"),r.textContent="Please select at least one country to see comparison data.",i=T(),a=A("button"),a.textContent="Go to World Map to Select Countries",H(a,"class","svelte-107j6ej"),H(n,"class","empty-comparison svelte-107j6ej")},m(t,l){S(t,n,l),j(n,r),j(n,i),j(n,a),o||(s=L(a,"click",e[30]),o=!0)},p:t,i:t,o:t,d(t){t&&E(n),o=!1,s()}}}function wu(t){let e,n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w=(t[10]?.label||t[9])+"";n=new au({props:{data:t[2],metric:t[9],height:600,showLegend:!0,showTooltip:!0,showPoints:!0}});let _=t[11],$=[];for(let e=0;e<_.length;e+=1)$[e]=_u(ou(t,_,e));return{c(){e=A("div"),St(n.$$.fragment),r=T(),i=A("div"),a=A("p"),o=N("This chart compares "),s=N(w),l=N(" over time for the\n                selected countries. Hover over points to see exact values."),c=T(),u=A("div"),d=A("h4"),d.textContent="Selected Countries",f=T(),h=A("ul");for(let t=0;t<$.length;t+=1)$[t].c();p=T(),v=A("button"),v.textContent="Clear All",m=T(),g=A("div"),g.innerHTML='<h4 class="svelte-107j6ej">Adding Countries</h4> \n                <p>To add more countries to this comparison, return to the World\n                  Map or Rankings view and select additional countries (maximum\n                  5).</p>',H(e,"class","comparison-chart"),H(d,"class","svelte-107j6ej"),H(h,"class","svelte-107j6ej"),H(v,"class","clear-btn svelte-107j6ej"),H(u,"class","selected-countries svelte-107j6ej"),H(g,"class","comparison-hint svelte-107j6ej"),H(i,"class","comparison-info svelte-107j6ej")},m(t,w){S(t,e,w),Et(n,e,null),S(t,r,w),S(t,i,w),j(i,a),j(a,o),j(a,s),j(a,l),j(i,c),j(i,u),j(u,d),j(u,f),j(u,h);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(h,null);j(u,p),j(u,v),j(i,m),j(i,g),y=!0,x||(b=L(v,"click",Ze),x=!0)},p(t,e){const r={};if(4&e[0]&&(r.data=t[2]),512&e[0]&&(r.metric=t[9]),n.$set(r),(!y||1536&e[0])&&w!==(w=(t[10]?.label||t[9])+"")&&R(s,w),2048&e[0]){let n;for(_=t[11],n=0;n<_.length;n+=1){const r=ou(t,_,n);$[n]?$[n].p(r,e):($[n]=_u(r),$[n].c(),$[n].m(h,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=_.length}},i(t){y||(wt(n.$$.fragment,t),y=!0)},o(t){_t(n.$$.fragment,t),y=!1},d(t){t&&E(e),zt(n),t&&E(r),t&&E(i),z($,t),x=!1,b()}}}function _u(t){let e,n,r,i,a,o,s,l,c=t[34]+"";function u(){return t[29](t[34])}return{c(){e=A("li"),n=A("span"),r=N(c),i=T(),a=A("button"),a.textContent="",o=T(),H(n,"class","country-name svelte-107j6ej"),H(a,"class","remove-btn svelte-107j6ej"),H(e,"class","svelte-107j6ej")},m(t,c){S(t,e,c),j(e,n),j(n,r),j(e,i),j(e,a),j(e,o),s||(l=L(a,"click",u),s=!0)},p(e,n){t=e,2048&n[0]&&c!==(c=t[34]+"")&&R(r,c)},d(t){t&&E(e),s=!1,l()}}}function $u(e){let n;return{c(){n=A("p"),n.textContent="No ranking data available for the selected year and metric.",H(n,"class","no-data")},m(t,e){S(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function ku(t){let e,n,r,i,a,o,s,l,c,u,d,f,h=(t[10]?.label||t[9])+"";n=new Rc({props:{data:t[1],metric:t[9],height:600,showLegend:!0,showLabels:!0,maxItems:20,highlightedItems:t[11],onBarClick:t[14]}});let p=t[11].length>0&&ju(t);return{c(){e=A("div"),St(n.$$.fragment),r=T(),i=A("div"),a=A("p"),o=N("This chart shows the top 20 countries ranked by "),s=N(h),l=N("\n                for the year "),c=N(t[8]),u=N(". Click on bars to select countries for\n                comparison."),d=T(),p&&p.c(),H(e,"class","ranking-chart"),H(i,"class","ranking-info svelte-107j6ej")},m(t,h){S(t,e,h),Et(n,e,null),S(t,r,h),S(t,i,h),j(i,a),j(a,o),j(a,s),j(a,l),j(a,c),j(a,u),j(i,d),p&&p.m(i,null),f=!0},p(t,e){const r={};2&e[0]&&(r.data=t[1]),512&e[0]&&(r.metric=t[9]),2048&e[0]&&(r.highlightedItems=t[11]),n.$set(r),(!f||1536&e[0])&&h!==(h=(t[10]?.label||t[9])+"")&&R(s,h),(!f||256&e[0])&&R(c,t[8]),t[11].length>0?p?p.p(t,e):(p=ju(t),p.c(),p.m(i,null)):p&&(p.d(1),p=null)},i(t){f||(wt(n.$$.fragment,t),f=!0)},o(t){_t(n.$$.fragment,t),f=!1},d(t){t&&E(e),zt(n),t&&E(r),t&&E(i),p&&p.d()}}}function ju(t){let e,n,r,i,o,s,l,c,u,d,f,h,p,v,m,g=t[11],y=[];for(let e=0;e<g.length;e+=1)y[e]=Mu(su(t,g,e));return{c(){e=A("div"),n=A("h4"),n.textContent="Selected Countries",r=T(),i=A("ul");for(let t=0;t<y.length;t+=1)y[t].c();o=T(),s=A("div"),l=A("button"),c=N("Compare Selected"),d=T(),f=A("button"),h=N("Clear All"),H(n,"class","svelte-107j6ej"),H(i,"class","svelte-107j6ej"),l.disabled=u=0===t[11].length,H(l,"class","svelte-107j6ej"),H(f,"class","clear-btn svelte-107j6ej"),f.disabled=p=0===t[11].length,H(s,"class","selection-actions svelte-107j6ej"),H(e,"class","selected-countries svelte-107j6ej")},m(a,u){S(a,e,u),j(e,n),j(e,r),j(e,i);for(let t=0;t<y.length;t+=1)y[t]&&y[t].m(i,null);j(e,o),j(e,s),j(s,l),j(l,c),j(s,d),j(s,f),j(f,h),v||(m=[L(l,"click",t[28]),L(f,"click",Ze)],v=!0)},p(t,e){if(2048&e[0]){let n;for(g=t[11],n=0;n<g.length;n+=1){const r=su(t,g,n);y[n]?y[n].p(r,e):(y[n]=Mu(r),y[n].c(),y[n].m(i,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=g.length}2048&e[0]&&u!==(u=0===t[11].length)&&(l.disabled=u),2048&e[0]&&p!==(p=0===t[11].length)&&(f.disabled=p)},d(t){t&&E(e),z(y,t),v=!1,a(m)}}}function Mu(t){let e,n,r,i,a,o,s,l,c=t[34]+"";function u(){return t[27](t[34])}return{c(){e=A("li"),n=A("span"),r=N(c),i=T(),a=A("button"),a.textContent="",o=T(),H(n,"class","country-name svelte-107j6ej"),H(a,"class","remove-btn svelte-107j6ej"),H(e,"class","svelte-107j6ej")},m(t,c){S(t,e,c),j(e,n),j(n,r),j(e,i),j(e,a),j(e,o),s||(l=L(a,"click",u),s=!0)},p(e,n){t=e,2048&n[0]&&c!==(c=t[34]+"")&&R(r,c)},d(t){t&&E(e),s=!1,l()}}}function Cu(t){let e,n,r,i,o,s,l,c,u,d,f,h,p,v,m,g=t[11],y=[];for(let e=0;e<g.length;e+=1)y[e]=Su(lu(t,g,e));return{c(){e=A("div"),n=A("h4"),n.textContent="Selected Countries",r=T(),i=A("ul");for(let t=0;t<y.length;t+=1)y[t].c();o=T(),s=A("div"),l=A("button"),c=N("Compare Selected"),d=T(),f=A("button"),h=N("Clear All"),H(n,"class","svelte-107j6ej"),H(i,"class","svelte-107j6ej"),l.disabled=u=0===t[11].length,H(l,"class","svelte-107j6ej"),H(f,"class","clear-btn svelte-107j6ej"),f.disabled=p=0===t[11].length,H(s,"class","selection-actions svelte-107j6ej"),H(e,"class","selected-countries svelte-107j6ej")},m(a,u){S(a,e,u),j(e,n),j(e,r),j(e,i);for(let t=0;t<y.length;t+=1)y[t]&&y[t].m(i,null);j(e,o),j(e,s),j(s,l),j(l,c),j(s,d),j(s,f),j(f,h),v||(m=[L(l,"click",t[26]),L(f,"click",Ze)],v=!0)},p(t,e){if(2048&e[0]){let n;for(g=t[11],n=0;n<g.length;n+=1){const r=lu(t,g,n);y[n]?y[n].p(r,e):(y[n]=Su(r),y[n].c(),y[n].m(i,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=g.length}2048&e[0]&&u!==(u=0===t[11].length)&&(l.disabled=u),2048&e[0]&&p!==(p=0===t[11].length)&&(f.disabled=p)},d(t){t&&E(e),z(y,t),v=!1,a(m)}}}function Su(t){let e,n,r,i,a,o,s,l,c=t[34]+"";function u(){return t[25](t[34])}return{c(){e=A("li"),n=A("span"),r=N(c),i=T(),a=A("button"),a.textContent="",o=T(),H(n,"class","country-name svelte-107j6ej"),H(a,"class","remove-btn svelte-107j6ej"),H(e,"class","svelte-107j6ej")},m(t,c){S(t,e,c),j(e,n),j(n,r),j(e,i),j(e,a),j(e,o),s||(l=L(a,"click",u),s=!0)},p(e,n){t=e,2048&n[0]&&c!==(c=t[34]+"")&&R(r,c)},d(t){t&&E(e),s=!1,l()}}}function Eu(t){let e,n,r,i,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_,$,k,M,C,D,P,I,F,R,O,W,G,Y,U,V,X,K,Z,J,Q,tt,et,nt,rt,it,at=t[12],ot=[];for(let e=0;e<at.length;e+=1)ot[e]=du(uu(t,at,e));let st=t[7].length>0&&fu(t);const lt=[mu,vu,pu],ct=[];function ut(t,e){return t[4]?0:t[5]?1:2}return tt=ut(t),et=ct[tt]=lt[tt](t),{c(){e=A("div"),n=A("header"),n.innerHTML='<h1 class="svelte-107j6ej">Explore Global Happiness Data</h1> \n    <p class="explore-description svelte-107j6ej">Interact with world happiness data across different views. Compare\n      countries, analyze rankings, and discover trends in happiness scores and\n      related metrics.</p>',r=T(),i=A("div"),o=A("div"),s=A("div"),l=A("label"),l.textContent="Metric",c=T(),u=A("select"),d=A("option"),d.textContent="Happiness Score",f=A("option"),f.textContent="GDP per Capita",h=A("option"),h.textContent="Social Support",p=A("option"),p.textContent="Healthy Life Expectancy",v=A("option"),v.textContent="Freedom",m=A("option"),m.textContent="Generosity",g=A("option"),g.textContent="Corruption Perception",y=A("option"),y.textContent="Human Development Index",x=T(),b=A("div"),w=A("label"),w.textContent="Year",_=T(),$=A("select");for(let t=0;t<ot.length;t+=1)ot[t].c();k=T(),M=A("div"),C=A("label"),C.textContent="Find Country",D=T(),P=A("div"),I=A("input"),F=T(),st&&st.c(),R=T(),O=A("div"),W=A("button"),G=N("World Map"),Y=T(),U=A("button"),V=N("Rankings"),X=T(),K=A("button"),Z=N("Comparison"),Q=T(),et.c(),H(n,"class","explore-header svelte-107j6ej"),H(l,"for","metric-select"),H(l,"class","svelte-107j6ej"),d.__value="happiness_score",d.value=d.__value,f.__value="gdp_per_capita",f.value=f.__value,h.__value="social_support",h.value=h.__value,p.__value="healthy_life_expectancy",p.value=p.__value,v.__value="freedom",v.value=v.__value,m.__value="generosity",m.value=m.__value,g.__value="corruption",g.value=g.__value,y.__value="hdi",y.value=y.__value,H(u,"id","metric-select"),u.disabled=t[4],H(u,"class","svelte-107j6ej"),H(s,"class","control-group svelte-107j6ej"),H(w,"for","year-select"),H(w,"class","svelte-107j6ej"),H($,"id","year-select"),$.disabled=t[4],H($,"class","svelte-107j6ej"),H(b,"class","control-group svelte-107j6ej"),H(C,"for","country-search"),H(C,"class","svelte-107j6ej"),H(I,"id","country-search"),H(I,"type","text"),H(I,"placeholder","Search for a country..."),I.value=t[6],I.disabled=t[4],H(I,"class","svelte-107j6ej"),H(P,"class","search-container svelte-107j6ej"),H(M,"class","control-group search-group svelte-107j6ej"),H(o,"class","primary-controls svelte-107j6ej"),W.disabled=t[4],H(W,"class","svelte-107j6ej"),B(W,"active","map"===t[3]),U.disabled=t[4],H(U,"class","svelte-107j6ej"),B(U,"active","ranking"===t[3]),K.disabled=J=t[4]||0===t[11].length,H(K,"class","svelte-107j6ej"),B(K,"active","comparison"===t[3]),H(O,"class","view-controls svelte-107j6ej"),H(i,"class","controls-container svelte-107j6ej"),H(e,"class","explore-container svelte-107j6ej")},m(a,E){S(a,e,E),j(e,n),j(e,r),j(e,i),j(i,o),j(o,s),j(s,l),j(s,c),j(s,u),j(u,d),j(u,f),j(u,h),j(u,p),j(u,v),j(u,m),j(u,g),j(u,y),q(u,t[9]),j(o,x),j(o,b),j(b,w),j(b,_),j(b,$);for(let t=0;t<ot.length;t+=1)ot[t]&&ot[t].m($,null);q($,t[8]),j(o,k),j(o,M),j(M,C),j(M,D),j(M,P),j(P,I),j(P,F),st&&st.m(P,null),j(i,R),j(i,O),j(O,W),j(W,G),j(O,Y),j(O,U),j(U,V),j(O,X),j(O,K),j(K,Z),j(e,Q),ct[tt].m(e,null),nt=!0,rt||(it=[L(u,"change",t[15]),L($,"change",t[16]),L(I,"input",t[18]),L(W,"click",t[22]),L(U,"click",t[23]),L(K,"click",t[24])],rt=!0)},p(t,n){if((!nt||512&n[0])&&q(u,t[9]),(!nt||16&n[0])&&(u.disabled=t[4]),4096&n[0]){let e;for(at=t[12],e=0;e<at.length;e+=1){const r=uu(t,at,e);ot[e]?ot[e].p(r,n):(ot[e]=du(r),ot[e].c(),ot[e].m($,null))}for(;e<ot.length;e+=1)ot[e].d(1);ot.length=at.length}(!nt||4352&n[0])&&q($,t[8]),(!nt||16&n[0])&&($.disabled=t[4]),(!nt||64&n[0]&&I.value!==t[6])&&(I.value=t[6]),(!nt||16&n[0])&&(I.disabled=t[4]),t[7].length>0?st?st.p(t,n):(st=fu(t),st.c(),st.m(P,null)):st&&(st.d(1),st=null),(!nt||16&n[0])&&(W.disabled=t[4]),(!nt||8&n[0])&&B(W,"active","map"===t[3]),(!nt||16&n[0])&&(U.disabled=t[4]),(!nt||8&n[0])&&B(U,"active","ranking"===t[3]),(!nt||2064&n[0]&&J!==(J=t[4]||0===t[11].length))&&(K.disabled=J),(!nt||8&n[0])&&B(K,"active","comparison"===t[3]);let r=tt;tt=ut(t),tt===r?ct[tt].p(t,n):(xt(),_t(ct[r],1,1,(()=>{ct[r]=null})),bt(),et=ct[tt],et?et.p(t,n):(et=ct[tt]=lt[tt](t),et.c()),wt(et,1),et.m(e,null))},i(t){nt||(wt(et),nt=!0)},o(t){_t(et),nt=!1},d(t){t&&E(e),z(ot,t),st&&st.d(),ct[tt].d(),rt=!1,a(it)}}}function zu(t,e,n){let r,i,a,o=[],s=[],l={},c=Array.from({length:10},((t,e)=>2015+e)),u="map",d=!1,f=null,h="",p=[],v=[];async function m(){Oe.set(!0),qe.set(null);try{n(0,o=await async function(t,e){const n=await Ne();if(!n||!n.data)throw new Error("No data available");return n.data.filter((e=>e.year===parseInt(t))).map((t=>({id:t.countryId||t.country.toLowerCase().replace(/\s+/g,"-"),name:t.country,[e]:t[e],continent:t.continent,year:t.year,data:t})))}(r,i)),n(1,s=await Pe(r,i,20)),v.length>0&&await g(),Oe.set(!1)}catch(t){console.error("Error loading data:",t),qe.set("Failed to load data. Please try again later."),Oe.set(!1)}}async function g(){if(0===v.length)return;const t=await Le(v,i);t&&t.data&&n(2,l=t.data)}function y(t){Re.set(t)}function x(t){Ke(t),n(6,h=""),n(7,p=[])}He.subscribe((t=>{n(8,r=t),m()})),Fe.subscribe((t=>{n(9,i=t),m()})),Ge.subscribe((t=>{n(10,a=t)})),Ie.subscribe((t=>{n(11,v=t),v.length>0&&g()})),Re.subscribe((t=>{n(3,u=t)})),Oe.subscribe((t=>{n(4,d=t)})),qe.subscribe((t=>{n(5,f=t)})),Q((async()=>{m()}));return[o,s,l,u,d,f,h,p,r,i,a,v,c,m,function(t){Ke(t.name||t.country),"comparison"!==u&&1===v.length&&Re.set("comparison")},function(t){Fe.set(t.target.value)},function(t){He.set(parseInt(t.target.value))},y,function(t){n(6,h=t.target.value.toLowerCase()),h.length>0?n(7,p=o.filter((t=>t.name.toLowerCase().includes(h))).slice(0,10).map((t=>t.name))):n(7,p=[])},x,t=>x(t),(t,e)=>"Enter"===e.key&&x(t),()=>y("map"),()=>y("ranking"),()=>y("comparison"),t=>Ke(t),()=>y("comparison"),t=>Ke(t),()=>y("comparison"),t=>Ke(t),()=>y("map")]}class Au extends Tt{constructor(t){super(),Nt(this,t,zu,Eu,s,{},null,[-1,-1])}}function Nu(t,e,n){const r=t.slice();return r[32]=e[n],r}function Tu(t,e,n){const r=t.slice();return r[29]=e[n],r[31]=n,r}function Du(t,e,n){const r=t.slice();return r[21]=e[n][0],r[22]=e[n][1],r}function Lu(t,e,n){const r=t.slice();return r[25]=e[n][0],r[26]=e[n][1],r}function Pu(e){let n,r,i,o,s,l,c,u,d,f;function h(t,e){return"overview"===t[4]?Ou:"samples"===t[4]?Ru:"structure"===t[4]?Fu:void 0}let p=h(e),v=p&&p(e);return{c(){n=A("div"),r=A("button"),r.textContent="Overview",i=T(),o=A("button"),o.textContent="Sample Data",s=T(),l=A("button"),l.textContent="Data Structure",c=T(),u=A("div"),v&&v.c(),H(r,"class","svelte-w7idf8"),B(r,"active","overview"===e[4]),H(o,"class","svelte-w7idf8"),B(o,"active","samples"===e[4]),H(l,"class","svelte-w7idf8"),B(l,"active","structure"===e[4]),H(n,"class","content-tabs svelte-w7idf8"),H(u,"class","tab-content svelte-w7idf8")},m(t,a){S(t,n,a),j(n,r),j(n,i),j(n,o),j(n,s),j(n,l),S(t,c,a),S(t,u,a),v&&v.m(u,null),d||(f=[L(r,"click",e[13]),L(o,"click",e[14]),L(l,"click",e[15])],d=!0)},p(t,e){16&e[0]&&B(r,"active","overview"===t[4]),16&e[0]&&B(o,"active","samples"===t[4]),16&e[0]&&B(l,"active","structure"===t[4]),p===(p=h(t))&&v?v.p(t,e):(v&&v.d(1),v=p&&p(t),v&&(v.c(),wt(v,1),v.m(u,null)))},i(t){wt(v)},o:t,d(t){t&&E(n),t&&E(c),t&&E(u),v&&v.d(),d=!1,a(f)}}}function Hu(e){let n,r,i,a,o,s,l;return{c(){n=A("div"),r=A("p"),i=N(e[1]),a=T(),o=A("button"),o.textContent="Retry",H(r,"class","error-message svelte-w7idf8"),H(o,"class","svelte-w7idf8"),H(n,"class","error-container svelte-w7idf8")},m(t,c){S(t,n,c),j(n,r),j(r,i),j(n,a),j(n,o),s||(l=L(o,"click",e[7]),s=!0)},p(t,e){2&e[0]&&R(i,t[1])},i:t,o:t,d(t){t&&E(n),s=!1,l()}}}function Iu(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner svelte-w7idf8"></div> \n      <p class="svelte-w7idf8">Loading dataset information...</p>',H(n,"class","loading-container svelte-w7idf8")},m(t,e){S(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function Fu(e){let n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x=cd(e[3])+"",b=cd(e[3])+"",w=e[6][e[3]]&&qu(e);return{c(){n=A("div"),r=A("h2"),i=N("Data Structure for "),a=N(x),o=T(),s=A("p"),l=N("Below is the schema for the "),c=N(b),u=N(" dataset,\n            showing column names, data types, and descriptions of each field."),d=T(),f=A("table"),h=A("thead"),h.innerHTML='<tr><th class="svelte-w7idf8">Column Name</th> \n                <th class="svelte-w7idf8">Data Type</th> \n                <th class="svelte-w7idf8">Description</th></tr>',p=T(),v=A("tbody"),w&&w.c(),m=T(),g=A("div"),g.innerHTML='<h3 class="svelte-w7idf8">Data Processing Notes</h3> \n            <p class="svelte-w7idf8">All datasets undergo several processing steps before being\n              integrated into the HappiScope visualizations:</p> \n            <ol class="svelte-w7idf8"><li class="svelte-w7idf8"><strong>Data Cleaning:</strong> Handling of missing values, outlier\n                detection, and correction of inconsistencies in raw data.</li> \n              <li class="svelte-w7idf8"><strong>Normalization:</strong> Country names are standardized across\n                all datasets to ensure consistent mapping and joining.</li> \n              <li class="svelte-w7idf8"><strong>Integration:</strong> Datasets are joined using country and\n                year as common keys, creating a unified dataset for visualization.</li> \n              <li class="svelte-w7idf8"><strong>Derived Metrics:</strong> Additional metrics like year-over-year\n                changes and rankings are calculated from the raw data.</li> \n              <li class="svelte-w7idf8"><strong>Geocoding:</strong> Countries are mapped to their geographical\n                coordinates and standard country codes for map visualizations.</li></ol> \n            <p class="svelte-w7idf8">For more detailed information about data processing methodologies,\n              please visit our\n              <a href="#/methodology" class="svelte-w7idf8">Methodology</a> page.</p>',H(r,"class","svelte-w7idf8"),H(s,"class","structure-description svelte-w7idf8"),H(f,"class","structure-table svelte-w7idf8"),H(g,"class","data-notes svelte-w7idf8"),H(n,"class","structure-tab")},m(t,e){S(t,n,e),j(n,r),j(r,i),j(r,a),j(n,o),j(n,s),j(s,l),j(s,c),j(s,u),j(n,d),j(n,f),j(f,h),j(f,p),j(f,v),w&&w.m(v,null),j(n,m),j(n,g)},p(t,e){8&e[0]&&x!==(x=cd(t[3])+"")&&R(a,x),8&e[0]&&b!==(b=cd(t[3])+"")&&R(c,b),t[6][t[3]]?w?w.p(t,e):(w=qu(t),w.c(),w.m(v,null)):w&&(w.d(1),w=null)},i(t){y||ct((()=>{y=kt(n,$e,{duration:300}),y.start()}))},o:t,d(t){t&&E(n),w&&w.d()}}}function Ru(e){let n,r,i,a,o,s,l,c,u,d,f,h,p,v=cd(e[3])+"",m=e[2].years[e[2].years.length-1]+"";function g(t,e){return t[5]&&t[5].length>0?Gu:Wu}let y=g(e),x=y(e);function b(t,e){return"happiness"===t[3]?ed:"hdi"===t[3]?td:"population"===t[3]?Qu:void 0}let w=b(e),_=w&&w(e);return{c(){n=A("div"),r=A("h2"),i=N("Sample Data from "),a=N(v),o=N(" ("),s=N(m),l=N(")"),c=T(),x.c(),u=T(),d=A("div"),f=A("h3"),f.textContent="Data Sources",h=T(),_&&_.c(),H(r,"class","svelte-w7idf8"),H(f,"class","svelte-w7idf8"),H(d,"class","data-source-info svelte-w7idf8"),H(n,"class","samples-tab")},m(t,e){S(t,n,e),j(n,r),j(r,i),j(r,a),j(r,o),j(r,s),j(r,l),j(n,c),x.m(n,null),j(n,u),j(n,d),j(d,f),j(d,h),_&&_.m(d,null)},p(t,e){8&e[0]&&v!==(v=cd(t[3])+"")&&R(a,v),4&e[0]&&m!==(m=t[2].years[t[2].years.length-1]+"")&&R(s,m),y===(y=g(t))&&x?x.p(t,e):(x.d(1),x=y(t),x&&(x.c(),x.m(n,u))),w!==(w=b(t))&&(_&&_.d(1),_=w&&w(t),_&&(_.c(),_.m(d,null)))},i(t){p||ct((()=>{p=kt(n,$e,{duration:300}),p.start()}))},o:t,d(t){t&&E(n),x.d(),_&&_.d()}}}function Ou(e){let n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_,$,k,M,C,D,L,P,I,F,O,q,B,W,G,Y,U,V,X,K,Z=ud(e[2].countries)+"",J=e[2].years[0]+"",Q=e[2].years[e[2].years.length-1]+"",tt=ud(e[2].totalEntries)+"";function et(t,e){return"happiness"===t[3]?id:"hdi"===t[3]?rd:"population"===t[3]?nd:void 0}let nt=et(e),rt=nt&&nt(e),it=Object.entries(e[2].yearlyEntries),at=[];for(let t=0;t<it.length;t+=1)at[t]=ad(Lu(e,it,t));let ot=Object.entries(e[2].metricCoverage),st=[];for(let t=0;t<ot.length;t+=1)st[t]=od(Du(e,ot,t));return{c(){n=A("div"),r=A("div"),i=A("div"),a=A("div"),o=N(Z),s=T(),l=A("div"),l.textContent="Countries",c=T(),u=A("div"),d=A("div"),f=N(J),h=N(" - "),p=N(Q),v=T(),m=A("div"),m.textContent="Year Range",g=T(),y=A("div"),x=A("div"),b=N(tt),w=T(),_=A("div"),_.textContent="Total Data Points",$=T(),k=A("div"),rt&&rt.c(),M=T(),C=A("div"),D=A("h2"),D.textContent="Data Coverage",L=T(),P=A("div"),I=A("div"),F=A("h3"),F.textContent="Yearly Data Points",O=T(),q=A("div");for(let t=0;t<at.length;t+=1)at[t].c();B=T(),W=A("div"),G=A("h3"),G.textContent="Metric Completeness",Y=T(),U=A("div");for(let t=0;t<st.length;t+=1)st[t].c();V=T(),X=A("div"),X.innerHTML='<h3 class="svelte-w7idf8">Notes on Data Coverage</h3> \n              <p class="svelte-w7idf8">Data coverage varies across years and metrics. Some countries\n                may have missing data for certain years or metrics. In the\n                HappiScope visualizations, missing data is handled gracefully\n                with clear indicators and appropriate filtering options.</p> \n              <p class="svelte-w7idf8">For time series analyses, we focus on countries with consistent\n                data across multiple years to ensure accurate trend reporting.\n                Where possible, missing values are imputed using appropriate\n                statistical methods, but these imputed values are clearly marked\n                in the interface.</p>',H(a,"class","stat-value svelte-w7idf8"),H(l,"class","stat-label svelte-w7idf8"),H(i,"class","stat-card svelte-w7idf8"),H(d,"class","stat-value svelte-w7idf8"),H(m,"class","stat-label svelte-w7idf8"),H(u,"class","stat-card svelte-w7idf8"),H(x,"class","stat-value svelte-w7idf8"),H(_,"class","stat-label svelte-w7idf8"),H(y,"class","stat-card svelte-w7idf8"),H(r,"class","stats-cards svelte-w7idf8"),H(k,"class","dataset-description svelte-w7idf8"),H(D,"class","svelte-w7idf8"),H(F,"class","svelte-w7idf8"),H(q,"class","bar-chart svelte-w7idf8"),H(I,"class","coverage-chart svelte-w7idf8"),H(G,"class","svelte-w7idf8"),H(U,"class","bar-chart svelte-w7idf8"),H(W,"class","coverage-chart svelte-w7idf8"),H(P,"class","coverage-charts svelte-w7idf8"),H(X,"class","coverage-notes svelte-w7idf8"),H(C,"class","coverage-section"),H(n,"class","overview-tab")},m(t,e){S(t,n,e),j(n,r),j(r,i),j(i,a),j(a,o),j(i,s),j(i,l),j(r,c),j(r,u),j(u,d),j(d,f),j(d,h),j(d,p),j(u,v),j(u,m),j(r,g),j(r,y),j(y,x),j(x,b),j(y,w),j(y,_),j(n,$),j(n,k),rt&&rt.m(k,null),j(n,M),j(n,C),j(C,D),j(C,L),j(C,P),j(P,I),j(I,F),j(I,O),j(I,q);for(let t=0;t<at.length;t+=1)at[t]&&at[t].m(q,null);j(P,B),j(P,W),j(W,G),j(W,Y),j(W,U);for(let t=0;t<st.length;t+=1)st[t]&&st[t].m(U,null);j(C,V),j(C,X)},p(t,e){if(4&e[0]&&Z!==(Z=ud(t[2].countries)+"")&&R(o,Z),4&e[0]&&J!==(J=t[2].years[0]+"")&&R(f,J),4&e[0]&&Q!==(Q=t[2].years[t[2].years.length-1]+"")&&R(p,Q),4&e[0]&&tt!==(tt=ud(t[2].totalEntries)+"")&&R(b,tt),nt!==(nt=et(t))&&(rt&&rt.d(1),rt=nt&&nt(t),rt&&(rt.c(),rt.m(k,null))),4&e[0]){let n;for(it=Object.entries(t[2].yearlyEntries),n=0;n<it.length;n+=1){const r=Lu(t,it,n);at[n]?at[n].p(r,e):(at[n]=ad(r),at[n].c(),at[n].m(q,null))}for(;n<at.length;n+=1)at[n].d(1);at.length=it.length}if(4&e[0]){let n;for(ot=Object.entries(t[2].metricCoverage),n=0;n<ot.length;n+=1){const r=Du(t,ot,n);st[n]?st[n].p(r,e):(st[n]=od(r),st[n].c(),st[n].m(U,null))}for(;n<st.length;n+=1)st[n].d(1);st.length=ot.length}},i(t){K||ct((()=>{K=kt(n,$e,{duration:300}),K.start()}))},o:t,d(t){t&&E(n),rt&&rt.d(),z(at,t),z(st,t)}}}function qu(t){let e,n=t[6][t[3]],r=[];for(let e=0;e<n.length;e+=1)r[e]=Bu(Nu(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=D()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);S(t,e,n)},p(t,i){if(72&i[0]){let a;for(n=t[6][t[3]],a=0;a<n.length;a+=1){const o=Nu(t,n,a);r[a]?r[a].p(o,i):(r[a]=Bu(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(t){z(r,t),t&&E(e)}}}function Bu(t){let e,n,r,i,a,o,s,l,c,u,d,f=t[32].name+"",h=t[32].type+"",p=t[32].description+"";return{c(){e=A("tr"),n=A("td"),r=A("code"),i=N(f),a=T(),o=A("td"),s=N(h),l=T(),c=A("td"),u=N(p),d=T(),H(r,"class","svelte-w7idf8"),H(n,"class","svelte-w7idf8"),H(o,"class","svelte-w7idf8"),H(c,"class","svelte-w7idf8")},m(t,f){S(t,e,f),j(e,n),j(n,r),j(r,i),j(e,a),j(e,o),j(o,s),j(e,l),j(e,c),j(c,u),j(e,d)},p(t,e){72&e[0]&&f!==(f=t[32].name+"")&&R(i,f),72&e[0]&&h!==(h=t[32].type+"")&&R(s,h),72&e[0]&&p!==(p=t[32].description+"")&&R(u,p)},d(t){t&&E(e)}}}function Wu(e){let n;return{c(){n=A("p"),n.textContent="No sample data available.",H(n,"class","no-data-message svelte-w7idf8")},m(t,e){S(t,n,e)},p:t,d(t){t&&E(n)}}}function Gu(t){let e,n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b=t[5].length+"",w="happiness"===t[3]?"happiness score":"hdi"===t[3]?"HDI value":"population",_=t[2].years[t[2].years.length-1]+"";function $(t,e){return"happiness"===t[3]?Vu:"hdi"===t[3]?Uu:"population"===t[3]?Yu:void 0}let k=$(t),M=k&&k(t),C=t[5],D=[];for(let e=0;e<C.length;e+=1)D[e]=Ju(Tu(t,C,e));return{c(){e=A("div"),n=A("table"),r=A("thead"),i=A("tr"),a=A("th"),a.textContent="Rank",o=T(),s=A("th"),s.textContent="Country",l=T(),M&&M.c(),c=T(),u=A("tbody");for(let t=0;t<D.length;t+=1)D[t].c();d=T(),f=A("p"),h=N("Note: This sample shows the top "),p=N(b),v=N(" countries by\n              "),m=N(w),g=N(" for the year\n              "),y=N(_),x=N("."),H(a,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),H(i,"class","svelte-w7idf8"),H(n,"class","sample-table svelte-w7idf8"),H(e,"class","sample-table-container svelte-w7idf8"),H(f,"class","sample-note svelte-w7idf8")},m(t,b){S(t,e,b),j(e,n),j(n,r),j(r,i),j(i,a),j(i,o),j(i,s),j(i,l),M&&M.m(i,null),j(n,c),j(n,u);for(let t=0;t<D.length;t+=1)D[t]&&D[t].m(u,null);S(t,d,b),S(t,f,b),j(f,h),j(f,p),j(f,v),j(f,m),j(f,g),j(f,y),j(f,x)},p(t,e){if(k!==(k=$(t))&&(M&&M.d(1),M=k&&k(t),M&&(M.c(),M.m(i,null))),40&e[0]){let n;for(C=t[5],n=0;n<C.length;n+=1){const r=Tu(t,C,n);D[n]?D[n].p(r,e):(D[n]=Ju(r),D[n].c(),D[n].m(u,null))}for(;n<D.length;n+=1)D[n].d(1);D.length=C.length}32&e[0]&&b!==(b=t[5].length+"")&&R(p,b),8&e[0]&&w!==(w="happiness"===t[3]?"happiness score":"hdi"===t[3]?"HDI value":"population")&&R(m,w),4&e[0]&&_!==(_=t[2].years[t[2].years.length-1]+"")&&R(y,_)},d(t){t&&E(e),M&&M.d(),z(D,t),t&&E(d),t&&E(f)}}}function Yu(t){let e,n,r,i,a;return{c(){e=A("th"),e.textContent="Population",n=T(),r=A("th"),r.textContent="Density",i=T(),a=A("th"),a.textContent="Growth Rate",H(e,"class","svelte-w7idf8"),H(r,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8")},m(t,o){S(t,e,o),S(t,n,o),S(t,r,o),S(t,i,o),S(t,a,o)},d(t){t&&E(e),t&&E(n),t&&E(r),t&&E(i),t&&E(a)}}}function Uu(t){let e,n,r,i,a,o,s;return{c(){e=A("th"),e.textContent="HDI Value",n=T(),r=A("th"),r.textContent="Life Expectancy",i=T(),a=A("th"),a.textContent="Education Index",o=T(),s=A("th"),s.textContent="Income Index",H(e,"class","svelte-w7idf8"),H(r,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8")},m(t,l){S(t,e,l),S(t,n,l),S(t,r,l),S(t,i,l),S(t,a,l),S(t,o,l),S(t,s,l)},d(t){t&&E(e),t&&E(n),t&&E(r),t&&E(i),t&&E(a),t&&E(o),t&&E(s)}}}function Vu(t){let e,n,r,i,a,o,s;return{c(){e=A("th"),e.textContent="Happiness Score",n=T(),r=A("th"),r.textContent="GDP per Capita",i=T(),a=A("th"),a.textContent="Social Support",o=T(),s=A("th"),s.textContent="Life Expectancy",H(e,"class","svelte-w7idf8"),H(r,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8")},m(t,l){S(t,e,l),S(t,n,l),S(t,r,l),S(t,i,l),S(t,a,l),S(t,o,l),S(t,s,l)},d(t){t&&E(e),t&&E(n),t&&E(r),t&&E(i),t&&E(a),t&&E(o),t&&E(s)}}}function Xu(t){let e,n,r,i,a,o,s,l,c=(ud(t[29].population)||"N/A")+"",u=(t[29].population_density?.toFixed(1)||"N/A")+"",d=t[29].growth_rate?(100*t[29].growth_rate).toFixed(2)+"%":"N/A";return{c(){e=A("td"),n=N(c),r=T(),i=A("td"),a=N(u),o=T(),s=A("td"),l=N(d),H(e,"class","svelte-w7idf8"),H(i,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8")},m(t,c){S(t,e,c),j(e,n),S(t,r,c),S(t,i,c),j(i,a),S(t,o,c),S(t,s,c),j(s,l)},p(t,e){32&e[0]&&c!==(c=(ud(t[29].population)||"N/A")+"")&&R(n,c),32&e[0]&&u!==(u=(t[29].population_density?.toFixed(1)||"N/A")+"")&&R(a,u),32&e[0]&&d!==(d=t[29].growth_rate?(100*t[29].growth_rate).toFixed(2)+"%":"N/A")&&R(l,d)},d(t){t&&E(e),t&&E(r),t&&E(i),t&&E(o),t&&E(s)}}}function Ku(t){let e,n,r,i,a,o,s,l,c,u,d,f=(t[29].hdi?.toFixed(3)||"N/A")+"",h=(t[29].life_expectancy?.toFixed(1)||"N/A")+"",p=(t[29].education_index?.toFixed(2)||"N/A")+"",v=(t[29].income_index?.toFixed(2)||"N/A")+"";return{c(){e=A("td"),n=N(f),r=T(),i=A("td"),a=N(h),o=T(),s=A("td"),l=N(p),c=T(),u=A("td"),d=N(v),H(e,"class","svelte-w7idf8"),H(i,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),H(u,"class","svelte-w7idf8")},m(t,f){S(t,e,f),j(e,n),S(t,r,f),S(t,i,f),j(i,a),S(t,o,f),S(t,s,f),j(s,l),S(t,c,f),S(t,u,f),j(u,d)},p(t,e){32&e[0]&&f!==(f=(t[29].hdi?.toFixed(3)||"N/A")+"")&&R(n,f),32&e[0]&&h!==(h=(t[29].life_expectancy?.toFixed(1)||"N/A")+"")&&R(a,h),32&e[0]&&p!==(p=(t[29].education_index?.toFixed(2)||"N/A")+"")&&R(l,p),32&e[0]&&v!==(v=(t[29].income_index?.toFixed(2)||"N/A")+"")&&R(d,v)},d(t){t&&E(e),t&&E(r),t&&E(i),t&&E(o),t&&E(s),t&&E(c),t&&E(u)}}}function Zu(t){let e,n,r,i,a,o,s,l,c,u,d,f=(t[29].happiness_score?.toFixed(2)||"N/A")+"",h=(t[29].gdp_per_capita?.toFixed(2)||"N/A")+"",p=(t[29].social_support?.toFixed(2)||"N/A")+"",v=(t[29].healthy_life_expectancy?.toFixed(2)||"N/A")+"";return{c(){e=A("td"),n=N(f),r=T(),i=A("td"),a=N(h),o=T(),s=A("td"),l=N(p),c=T(),u=A("td"),d=N(v),H(e,"class","svelte-w7idf8"),H(i,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),H(u,"class","svelte-w7idf8")},m(t,f){S(t,e,f),j(e,n),S(t,r,f),S(t,i,f),j(i,a),S(t,o,f),S(t,s,f),j(s,l),S(t,c,f),S(t,u,f),j(u,d)},p(t,e){32&e[0]&&f!==(f=(t[29].happiness_score?.toFixed(2)||"N/A")+"")&&R(n,f),32&e[0]&&h!==(h=(t[29].gdp_per_capita?.toFixed(2)||"N/A")+"")&&R(a,h),32&e[0]&&p!==(p=(t[29].social_support?.toFixed(2)||"N/A")+"")&&R(l,p),32&e[0]&&v!==(v=(t[29].healthy_life_expectancy?.toFixed(2)||"N/A")+"")&&R(d,v)},d(t){t&&E(e),t&&E(r),t&&E(i),t&&E(o),t&&E(s),t&&E(c),t&&E(u)}}}function Ju(t){let e,n,r,i,a,o,s,l,c=t[31]+1+"",u=t[29].country+"";function d(t,e){return"happiness"===t[3]?Zu:"hdi"===t[3]?Ku:"population"===t[3]?Xu:void 0}let f=d(t),h=f&&f(t);return{c(){e=A("tr"),n=A("td"),r=N(c),i=T(),a=A("td"),o=N(u),s=T(),h&&h.c(),l=T(),H(n,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8"),H(e,"class","svelte-w7idf8")},m(t,c){S(t,e,c),j(e,n),j(n,r),j(e,i),j(e,a),j(a,o),j(e,s),h&&h.m(e,null),j(e,l)},p(t,n){32&n[0]&&u!==(u=t[29].country+"")&&R(o,u),f===(f=d(t))&&h?h.p(t,n):(h&&h.d(1),h=f&&f(t),h&&(h.c(),h.m(e,l)))},d(t){t&&E(e),h&&h.d()}}}function Qu(t){let e;return{c(){e=A("p"),e.innerHTML='<strong>Source:</strong> World Development Indicators, World\n                Bank<br/> \n                <strong>URL:</strong> \n                <a href="https://data.worldbank.org/indicator/SP.POP.TOTL" target="_blank" class="svelte-w7idf8">https://data.worldbank.org/indicator/SP.POP.TOTL</a><br/> \n                <strong>License:</strong> Creative Commons Attribution 4.0 International\n                License',H(e,"class","svelte-w7idf8")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function td(t){let e;return{c(){e=A("p"),e.innerHTML='<strong>Source:</strong> Human Development Reports, United\n                Nations Development Programme<br/> \n                <strong>URL:</strong> \n                <a href="http://hdr.undp.org/en/data" target="_blank" class="svelte-w7idf8">http://hdr.undp.org/en/data</a><br/> \n                <strong>License:</strong> Open Data Commons Attribution License',H(e,"class","svelte-w7idf8")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function ed(t){let e;return{c(){e=A("p"),e.innerHTML='<strong>Source:</strong> World Happiness Report, Sustainable\n                Development Solutions Network<br/> \n                <strong>URL:</strong> \n                <a href="https://worldhappiness.report/" target="_blank" class="svelte-w7idf8">https://worldhappiness.report/</a><br/> \n                <strong>License:</strong> Creative Commons Attribution 4.0 International\n                License',H(e,"class","svelte-w7idf8")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function nd(t){let e,n,r,i,a,o,s,l,c;return{c(){e=A("h2"),e.textContent="Global Population Dataset",n=T(),r=A("p"),r.textContent="The Global Population dataset contains annual population\n                estimates and projections for countries and territories around\n                the world. The data is sourced from the World Bank's World\n                Development Indicators, which compiles population data from\n                various national and international sources.",i=T(),a=A("p"),a.textContent="Population numbers provide important context when analyzing\n                happiness and development metrics, as they can reveal how\n                broadly shared societal benefits are and help identify patterns\n                across countries of different sizes and population densities.",o=T(),s=A("h3"),s.textContent="Key Features:",l=T(),c=A("ul"),c.innerHTML='<li class="svelte-w7idf8">Annual population estimates from 2015 through 2024</li> \n                <li class="svelte-w7idf8">Coverage of approximately 200+ countries and territories</li> \n                <li class="svelte-w7idf8">Population density information</li> \n                <li class="svelte-w7idf8">Annual growth rates</li>',H(e,"class","svelte-w7idf8"),H(r,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),H(c,"class","svelte-w7idf8")},m(t,u){S(t,e,u),S(t,n,u),S(t,r,u),S(t,i,u),S(t,a,u),S(t,o,u),S(t,s,u),S(t,l,u),S(t,c,u)},d(t){t&&E(e),t&&E(n),t&&E(r),t&&E(i),t&&E(a),t&&E(o),t&&E(s),t&&E(l),t&&E(c)}}}function rd(t){let e,n,r,i,a,o,s,l,c;return{c(){e=A("h2"),e.textContent="Human Development Index (HDI) Dataset",n=T(),r=A("p"),r.textContent='The Human Development Index (HDI) is a summary composite measure\n                of a country\'s average achievements in three basic aspects of\n                human development: health, knowledge, and standard of living.\n                Published by the United Nations Development Programme (UNDP),\n                the HDI ranks countries by level of "human development" and\n                separates developed, developing, and underdeveloped countries.',i=T(),a=A("p"),a.textContent="The HDI was created to emphasize that people and their\n                capabilities should be the ultimate criteria for assessing the\n                development of a country, not economic growth alone. It can also\n                be used to question national policy choices, asking how two\n                countries with the same level of GNI per capita can end up with\n                different human development outcomes.",o=T(),s=A("h3"),s.textContent="Key Features:",l=T(),c=A("ul"),c.innerHTML='<li class="svelte-w7idf8">Composite index on a scale of 0 to 1</li> \n                <li class="svelte-w7idf8">Three dimensions: long and healthy life, knowledge, and decent\n                  standard of living</li> \n                <li class="svelte-w7idf8">Annual data from 2015 through 2024</li> \n                <li class="svelte-w7idf8">Coverage of approximately 190 countries</li>',H(e,"class","svelte-w7idf8"),H(r,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),H(c,"class","svelte-w7idf8")},m(t,u){S(t,e,u),S(t,n,u),S(t,r,u),S(t,i,u),S(t,a,u),S(t,o,u),S(t,s,u),S(t,l,u),S(t,c,u)},d(t){t&&E(e),t&&E(n),t&&E(r),t&&E(i),t&&E(a),t&&E(o),t&&E(s),t&&E(l),t&&E(c)}}}function id(t){let e,n,r,i,a,o,s,l,c;return{c(){e=A("h2"),e.textContent="World Happiness Report Dataset",n=T(),r=A("p"),r.textContent="The World Happiness Report is a publication of the Sustainable\n                Development Solutions Network, powered by data from the Gallup\n                World Poll. The report ranks countries based on how their\n                citizens assess their own well-being, along with various life\n                factors that contribute to overall happiness.",i=T(),a=A("p"),a.textContent="Each country's score is composed of surveyed life evaluations\n                (happiness scores) and six key variables: GDP per capita, social\n                support, healthy life expectancy, freedom to make life choices,\n                generosity, and perception of corruption. These factors help\n                explain why some countries rank higher than others.",o=T(),s=A("h3"),s.textContent="Key Features:",l=T(),c=A("ul"),c.innerHTML='<li class="svelte-w7idf8">Annual data from 2015 through 2024</li> \n                <li class="svelte-w7idf8">Coverage of approximately 150+ countries per year</li> \n                <li class="svelte-w7idf8">Six contributing factors to happiness scores</li> \n                <li class="svelte-w7idf8">Rankings and score comparisons between countries</li>',H(e,"class","svelte-w7idf8"),H(r,"class","svelte-w7idf8"),H(a,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),H(c,"class","svelte-w7idf8")},m(t,u){S(t,e,u),S(t,n,u),S(t,r,u),S(t,i,u),S(t,a,u),S(t,o,u),S(t,s,u),S(t,l,u),S(t,c,u)},d(t){t&&E(e),t&&E(n),t&&E(r),t&&E(i),t&&E(a),t&&E(o),t&&E(s),t&&E(l),t&&E(c)}}}function ad(t){let e,n,r,i,a,o,s,l,c=t[25]+"",u=t[26]+"";return{c(){e=A("div"),n=A("div"),r=N(c),i=T(),a=A("div"),o=A("div"),s=N(u),l=T(),H(n,"class","bar-label svelte-w7idf8"),H(o,"class","bar-value svelte-w7idf8"),H(a,"class","bar svelte-w7idf8"),O(a,"width",t[26]/Math.max(...Object.values(t[2].yearlyEntries))*100+"%"),H(e,"class","bar-container svelte-w7idf8")},m(t,c){S(t,e,c),j(e,n),j(n,r),j(e,i),j(e,a),j(a,o),j(o,s),j(e,l)},p(t,e){4&e[0]&&c!==(c=t[25]+"")&&R(r,c),4&e[0]&&u!==(u=t[26]+"")&&R(s,u),4&e[0]&&O(a,"width",t[26]/Math.max(...Object.values(t[2].yearlyEntries))*100+"%")},d(t){t&&E(e)}}}function od(t){let e,n,r,i,a,o,s,l,c,u=ld(t[21])+"",d=t[22].percentage+"";return{c(){e=A("div"),n=A("div"),r=N(u),i=T(),a=A("div"),o=A("div"),s=N(d),l=N("%"),c=T(),H(n,"class","bar-label svelte-w7idf8"),H(o,"class","bar-value svelte-w7idf8"),H(a,"class","bar svelte-w7idf8"),O(a,"width",t[22].percentage+"%"),H(e,"class","bar-container svelte-w7idf8")},m(t,u){S(t,e,u),j(e,n),j(n,r),j(e,i),j(e,a),j(a,o),j(o,s),j(o,l),j(e,c)},p(t,e){4&e[0]&&u!==(u=ld(t[21])+"")&&R(r,u),4&e[0]&&d!==(d=t[22].percentage+"")&&R(s,d),4&e[0]&&O(a,"width",t[22].percentage+"%")},d(t){t&&E(e)}}}function sd(e){let n,r,i,o,s,l,c,u,d,f,h,p;function v(t,e){return t[0]?Iu:t[1]?Hu:Pu}let m=v(e),g=m(e);return{c(){n=A("div"),r=A("header"),r.innerHTML='<h1 class="svelte-w7idf8">Dataset Details</h1> \n    <p class="subtitle svelte-w7idf8">Explore the structure, coverage, and sample data from the datasets used in\n      HappiScope.</p>',i=T(),o=A("div"),s=A("button"),s.textContent="World Happiness Report",l=T(),c=A("button"),c.textContent="Human Development Index",u=T(),d=A("button"),d.textContent="Population Data",f=T(),g.c(),H(r,"class","svelte-w7idf8"),H(s,"class","svelte-w7idf8"),B(s,"active","happiness"===e[3]),H(c,"class","svelte-w7idf8"),B(c,"active","hdi"===e[3]),H(d,"class","svelte-w7idf8"),B(d,"active","population"===e[3]),H(o,"class","dataset-tabs svelte-w7idf8"),H(n,"class","data-details-container svelte-w7idf8")},m(t,a){S(t,n,a),j(n,r),j(n,i),j(n,o),j(o,s),j(o,l),j(o,c),j(o,u),j(o,d),j(n,f),g.m(n,null),h||(p=[L(s,"click",e[10]),L(c,"click",e[11]),L(d,"click",e[12])],h=!0)},p(t,e){8&e[0]&&B(s,"active","happiness"===t[3]),8&e[0]&&B(c,"active","hdi"===t[3]),8&e[0]&&B(d,"active","population"===t[3]),m===(m=v(t))&&g?g.p(t,e):(g.d(1),g=m(t),g&&(g.c(),wt(g,1),g.m(n,null)))},i(t){wt(g)},o:t,d(t){t&&E(n),g.d(),h=!1,a(p)}}}function ld(t){switch(t){case"happiness_score":return"Happiness Score";case"gdp_per_capita":return"GDP per Capita";case"social_support":return"Social Support";case"healthy_life_expectancy":return"Healthy Life Expectancy";case"freedom":return"Freedom";case"generosity":return"Generosity";case"corruption":return"Corruption";case"hdi":return"HDI";case"population":return"Population";default:return t.replace(/_/g," ").replace(/\b\w/g,(t=>t.toUpperCase()))}}function cd(t){switch(t){case"happiness":return"World Happiness Report";case"hdi":return"Human Development Index";case"population":return"Global Population Data";default:return"Dataset"}}function ud(t){return(new Intl.NumberFormat).format(t)}function dd(t,e,n){let r=!0,i=null,a={countries:0,years:[],totalEntries:0,metricCoverage:{},continentBreakdown:{},yearlyEntries:{}},o="happiness",s="overview",l=[],c={};async function u(){try{n(0,r=!0),n(1,i=null);const t=await Ne();if(!t||!t.data)throw new Error("Failed to load data stats");{const e=t.data,i=[...new Set(e.map((t=>t.country)))],s=[...new Set(e.map((t=>t.year)))].sort();n(2,a.countries=i.length,a),n(2,a.years=s,a),n(2,a.totalEntries=e.length,a);const l=["happiness_score","gdp_per_capita","social_support","healthy_life_expectancy","freedom","generosity","corruption","hdi","population"];n(2,a.metricCoverage={},a),l.forEach((t=>{const r=e.filter((e=>void 0!==e[t]&&null!==e[t]&&!isNaN(e[t])));n(2,a.metricCoverage[t]={count:r.length,percentage:Math.round(r.length/e.length*100)},a)})),n(2,a.continentBreakdown={},a),e.forEach((t=>{t.continent&&(a.continentBreakdown[t.continent]||n(2,a.continentBreakdown[t.continent]=0,a),n(2,a.continentBreakdown[t.continent]++,a))})),n(2,a.yearlyEntries={},a),s.forEach((t=>{n(2,a.yearlyEntries[t]=e.filter((e=>e.year===t)).length,a)})),await d(o),n(0,r=!1)}}catch(t){console.error("Error loading data stats:",t),n(1,i="Failed to load data statistics. Please try again later."),n(0,r=!1)}}async function d(t){try{let e=10,r=Math.max(...a.years);switch(t){case"happiness":default:n(5,l=await Pe(r,"happiness_score",e));break;case"hdi":n(5,l=await Pe(r,"hdi",e));break;case"population":n(5,l=await Pe(r,"population",e))}}catch(t){console.error("Error loading sample data:",t),n(5,l=[])}}async function f(t){n(3,o=t),await d(t)}function h(t){n(4,s=t)}Q((async()=>{renderDataCompleteness(),await u(),n(6,c={happiness:[{name:"country",type:"string",description:"Name of the country"},{name:"year",type:"integer",description:"Year of the report"},{name:"happiness_score",type:"float",description:"Self-reported life satisfaction score on a scale of 0-10"},{name:"happiness_rank",type:"integer",description:"Country rank by happiness score for the given year"},{name:"gdp_per_capita",type:"float",description:"Contribution of GDP per capita to the happiness score"},{name:"social_support",type:"float",description:"Contribution of social support to the happiness score"},{name:"healthy_life_expectancy",type:"float",description:"Contribution of healthy life expectancy to the happiness score"},{name:"freedom",type:"float",description:"Contribution of freedom to make life choices to the happiness score"},{name:"generosity",type:"float",description:"Contribution of generosity to the happiness score"},{name:"corruption",type:"float",description:"Contribution of corruption perception to the happiness score"}],hdi:[{name:"country",type:"string",description:"Name of the country"},{name:"year",type:"integer",description:"Year of the HDI value"},{name:"hdi",type:"float",description:"Human Development Index value (0-1)"},{name:"hdi_rank",type:"integer",description:"Country rank by HDI value for the given year"},{name:"life_expectancy",type:"float",description:"Life expectancy at birth in years"},{name:"education_index",type:"float",description:"Education index based on mean and expected years of schooling"},{name:"income_index",type:"float",description:"Income index based on GNI per capita"}],population:[{name:"country",type:"string",description:"Name of the country"},{name:"year",type:"integer",description:"Year of the population estimate"},{name:"population",type:"integer",description:"Total population count"},{name:"population_density",type:"float",description:"Population per square kilometer of land area"},{name:"growth_rate",type:"float",description:"Annual population growth rate (percentage)"}]})}));return[r,i,a,o,s,l,c,u,f,h,()=>f("happiness"),()=>f("hdi"),()=>f("population"),()=>h("overview"),()=>h("samples"),()=>h("structure")]}class fd extends Tt{constructor(t){super(),Nt(this,t,dd,sd,s,{},null,[-1,-1])}}function hd(t,e,n){const r=t.slice();return r[10]=e[n],r}function pd(t,e,n){const r=t.slice();return r[13]=e[n][0],r[14]=e[n][1],r}function vd(t,e,n){const r=t.slice();return r[17]=e[n][0],r[18]=e[n][1],r}function md(e){let n,r,i,a,o;return{c(){n=A("div"),n.innerHTML='<h3 class="svelte-15vxrjm">World Happiness Report</h3> \n          <p class="svelte-15vxrjm"><strong>Publisher:</strong> Sustainable Development Solutions Network</p> \n          <p class="svelte-15vxrjm"><strong>Years covered:</strong> 2015-2024</p> \n          <p class="svelte-15vxrjm"><strong>Description:</strong> Annual survey data measuring subjective\n            well-being across countries, including overall happiness scores and contributing\n            factors like social support, freedom, and corruption perception.</p> \n          <p class="svelte-15vxrjm"><strong>URL:</strong> \n            <a href="https://worldhappiness.report/" target="_blank" class="svelte-15vxrjm">https://worldhappiness.report/</a></p>',r=T(),i=A("div"),i.innerHTML='<h3 class="svelte-15vxrjm">Human Development Index (HDI)</h3> \n          <p class="svelte-15vxrjm"><strong>Publisher:</strong> United Nations Development Programme</p> \n          <p class="svelte-15vxrjm"><strong>Years covered:</strong> 2015-2024</p> \n          <p class="svelte-15vxrjm"><strong>Description:</strong> Composite index measuring average achievement\n            in key dimensions of human development: a long and healthy life, being\n            knowledgeable, and having a decent standard of living.</p> \n          <p class="svelte-15vxrjm"><strong>URL:</strong> \n            <a href="http://hdr.undp.org/en/content/human-development-index-hdi" target="_blank" class="svelte-15vxrjm">http://hdr.undp.org/</a></p>',a=T(),o=A("div"),o.innerHTML='<h3 class="svelte-15vxrjm">Global Population Data</h3> \n          <p class="svelte-15vxrjm"><strong>Publisher:</strong> World Bank</p> \n          <p class="svelte-15vxrjm"><strong>Years covered:</strong> 2015-2024</p> \n          <p class="svelte-15vxrjm"><strong>Description:</strong> Annual population estimates for countries\n            and territories, providing context for the scale and representation of\n            happiness and development metrics.</p> \n          <p class="svelte-15vxrjm"><strong>URL:</strong> \n            <a href="https://data.worldbank.org/indicator/SP.POP.TOTL" target="_blank" class="svelte-15vxrjm">https://data.worldbank.org/</a></p>',H(n,"class","data-source-card svelte-15vxrjm"),H(i,"class","data-source-card svelte-15vxrjm"),H(o,"class","data-source-card svelte-15vxrjm")},m(t,e){S(t,n,e),S(t,r,e),S(t,i,e),S(t,a,e),S(t,o,e)},p:t,d(t){t&&E(n),t&&E(r),t&&E(i),t&&E(a),t&&E(o)}}}function gd(t){let e,n=Object.entries(t[0].sources),r=[];for(let e=0;e<n.length;e+=1)r[e]=yd(vd(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=D()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);S(t,e,n)},p(t,i){if(1&i){let a;for(n=Object.entries(t[0].sources),a=0;a<n.length;a+=1){const o=vd(t,n,a);r[a]?r[a].p(o,i):(r[a]=yd(o),r[a].c(),r[a].m(e.parentNode,e))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(t){z(r,t),t&&E(e)}}}function yd(t){let e,n,r,i,a,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_=t[18].name+"",$=t[18].years+"",k=t[18].description+"",M=t[18].source+"";return{c(){e=A("div"),n=A("h3"),r=N(_),i=T(),a=A("p"),o=A("strong"),o.textContent="Years covered:",s=T(),l=N($),c=T(),u=A("p"),d=A("strong"),d.textContent="Description:",f=T(),h=N(k),p=T(),v=A("p"),m=A("strong"),m.textContent="URL:",g=T(),y=A("a"),x=N(M),w=T(),H(n,"class","svelte-15vxrjm"),H(a,"class","svelte-15vxrjm"),H(u,"class","svelte-15vxrjm"),H(y,"href",b=t[18].source),H(y,"target","_blank"),H(y,"class","svelte-15vxrjm"),H(v,"class","svelte-15vxrjm"),H(e,"class","data-source-card svelte-15vxrjm")},m(t,b){S(t,e,b),j(e,n),j(n,r),j(e,i),j(e,a),j(a,o),j(a,s),j(a,l),j(e,c),j(e,u),j(u,d),j(u,f),j(u,h),j(e,p),j(e,v),j(v,m),j(v,g),j(v,y),j(y,x),j(e,w)},p(t,e){1&e&&_!==(_=t[18].name+"")&&R(r,_),1&e&&$!==($=t[18].years+"")&&R(l,$),1&e&&k!==(k=t[18].description+"")&&R(h,k),1&e&&M!==(M=t[18].source+"")&&R(x,M),1&e&&b!==(b=t[18].source)&&H(y,"href",b)},d(t){t&&E(e)}}}function xd(e){let n,r,i;return{c(){n=A("p"),n.textContent="Data dictionary not available.",r=T(),i=A("table"),i.innerHTML='<thead><tr class="svelte-15vxrjm"><th class="svelte-15vxrjm">Field Name</th> \n              <th class="svelte-15vxrjm">Type</th> \n              <th class="svelte-15vxrjm">Description</th> \n              <th class="svelte-15vxrjm">Source</th> \n              <th class="svelte-15vxrjm">Range/Units</th></tr></thead> \n          <tbody><tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">country</td> \n              <td class="svelte-15vxrjm">string</td> \n              <td class="svelte-15vxrjm">Standardized country name</td> \n              <td class="svelte-15vxrjm">All</td> \n              <td class="svelte-15vxrjm">-</td></tr> \n            <tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">country_code</td> \n              <td class="svelte-15vxrjm">string</td> \n              <td class="svelte-15vxrjm">ISO 3166-1 alpha-3 country code</td> \n              <td class="svelte-15vxrjm">All</td> \n              <td class="svelte-15vxrjm">e.g., &quot;USA&quot;, &quot;FIN&quot;</td></tr> \n            <tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">year</td> \n              <td class="svelte-15vxrjm">integer</td> \n              <td class="svelte-15vxrjm">Reference year for the data</td> \n              <td class="svelte-15vxrjm">All</td> \n              <td class="svelte-15vxrjm">2015-2024</td></tr></tbody>',H(n,"class","error-message svelte-15vxrjm"),H(i,"class","data-dictionary-table svelte-15vxrjm")},m(t,e){S(t,n,e),S(t,r,e),S(t,i,e)},p:t,d(t){t&&E(n),t&&E(r),t&&E(i)}}}function bd(t){let e,n,r,i,a,o,s,l,c=Object.entries(t[0].fields),u=[];for(let e=0;e<c.length;e+=1)u[e]=_d(pd(t,c,e));let d=t[0].transformation_notes&&$d(t);return{c(){e=A("table"),n=A("thead"),n.innerHTML='<tr class="svelte-15vxrjm"><th class="svelte-15vxrjm">Field Name</th> \n              <th class="svelte-15vxrjm">Description</th> \n              <th class="svelte-15vxrjm">Category</th></tr>',r=T(),i=A("tbody");for(let t=0;t<u.length;t+=1)u[t].c();a=T(),o=A("h3"),o.textContent="Data Transformation Notes",s=T(),d&&d.c(),l=D(),H(e,"class","data-dictionary-table svelte-15vxrjm"),H(o,"class","svelte-15vxrjm")},m(t,c){S(t,e,c),j(e,n),j(e,r),j(e,i);for(let t=0;t<u.length;t+=1)u[t]&&u[t].m(i,null);S(t,a,c),S(t,o,c),S(t,s,c),d&&d.m(t,c),S(t,l,c)},p(t,e){if(1&e){let n;for(c=Object.entries(t[0].fields),n=0;n<c.length;n+=1){const r=pd(t,c,n);u[n]?u[n].p(r,e):(u[n]=_d(r),u[n].c(),u[n].m(i,null))}for(;n<u.length;n+=1)u[n].d(1);u.length=c.length}t[0].transformation_notes?d?d.p(t,e):(d=$d(t),d.c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},d(t){t&&E(e),z(u,t),t&&E(a),t&&E(o),t&&E(s),d&&d.d(t),t&&E(l)}}}function wd(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner svelte-15vxrjm"></div> \n          <p class="svelte-15vxrjm">Loading data dictionary...</p>',H(n,"class","loading-container svelte-15vxrjm")},m(t,e){S(t,n,e)},p:t,d(t){t&&E(n)}}}function _d(t){let e,n,r,i,a,o,s,l,c,u,d,f=t[13]+"",h=t[14]+"",p=Md(t[13])+"";return{c(){e=A("tr"),n=A("td"),r=A("code"),i=N(f),a=T(),o=A("td"),s=N(h),l=T(),c=A("td"),u=N(p),d=T(),H(r,"class","svelte-15vxrjm"),H(n,"class","svelte-15vxrjm"),H(o,"class","svelte-15vxrjm"),H(c,"class","svelte-15vxrjm"),H(e,"class","svelte-15vxrjm")},m(t,f){S(t,e,f),j(e,n),j(n,r),j(r,i),j(e,a),j(e,o),j(o,s),j(e,l),j(e,c),j(c,u),j(e,d)},p(t,e){1&e&&f!==(f=t[13]+"")&&R(i,f),1&e&&h!==(h=t[14]+"")&&R(s,h),1&e&&p!==(p=Md(t[13])+"")&&R(u,p)},d(t){t&&E(e)}}}function $d(t){let e,n=t[0].transformation_notes,r=[];for(let e=0;e<n.length;e+=1)r[e]=kd(hd(t,n,e));return{c(){e=A("ul");for(let t=0;t<r.length;t+=1)r[t].c();H(e,"class","transformation-notes svelte-15vxrjm")},m(t,n){S(t,e,n);for(let t=0;t<r.length;t+=1)r[t]&&r[t].m(e,null)},p(t,i){if(1&i){let a;for(n=t[0].transformation_notes,a=0;a<n.length;a+=1){const o=hd(t,n,a);r[a]?r[a].p(o,i):(r[a]=kd(o),r[a].c(),r[a].m(e,null))}for(;a<r.length;a+=1)r[a].d(1);r.length=n.length}},d(t){t&&E(e),z(r,t)}}}function kd(t){let e,n,r=t[10]+"";return{c(){e=A("li"),n=N(r),H(e,"class","svelte-15vxrjm")},m(t,r){S(t,e,r),j(e,n)},p(t,e){1&e&&r!==(r=t[10]+"")&&R(n,r)},d(t){t&&E(e)}}}function jd(e){let n,r,i,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_,$,k,M,C,z,N,D,I,F,R,O,q,W,G,Y,U,V,X,K,Z,J,Q,tt,et,nt,rt,it,at,ot,st,lt,ct,ut,dt,ft;function ht(t,e){return t[0]&&t[0].sources?gd:md}let pt=ht(e),vt=pt(e);function mt(t,e){return t[1]?wd:t[0]&&t[0].fields?bd:xd}let gt=mt(e),yt=gt(e);return{c(){n=A("div"),r=A("aside"),i=A("div"),o=A("h2"),o.textContent="Contents",s=T(),l=A("ul"),c=A("li"),u=A("a"),u.textContent="Introduction",d=T(),f=A("li"),h=A("a"),h.textContent="Data Sources",p=T(),v=A("li"),m=A("a"),m.textContent="Data Processing",g=T(),y=A("li"),x=A("a"),x.textContent="Naming Standardization",b=T(),w=A("li"),_=A("a"),_.textContent="Visualization Methods",$=T(),k=A("li"),M=A("a"),M.textContent="Technical Implementation",C=T(),z=A("li"),N=A("a"),N.textContent="Data Dictionary",D=T(),I=A("main"),F=A("header"),F.innerHTML='<h1 class="svelte-15vxrjm">Methodology</h1> \n      <p class="subtitle svelte-15vxrjm">Documentation of data sources, processing methods, and visualization\n        techniques used in the HappiScope project.</p>',R=T(),O=A("section"),O.innerHTML='<h2 class="svelte-15vxrjm">Introduction</h2> \n      <p class="svelte-15vxrjm">HappiScope is a data visualization project that aims to provide insights\n        into global happiness trends and factors that contribute to well-being\n        across different countries. This methodology page documents the approach\n        taken to collect, process, and visualize the data.</p> \n      <p class="svelte-15vxrjm">The project integrates multiple datasets including the World Happiness\n        Report, Human Development Index (HDI), and global population statistics\n        to provide a comprehensive view of happiness and its correlates across\n        countries and over time.</p>',q=T(),W=A("section"),G=A("h2"),G.textContent="Data Sources",Y=T(),U=A("p"),U.textContent="HappiScope draws upon three main data sources, each providing a\n        different perspective on global well-being and development:",V=T(),vt.c(),X=T(),K=A("section"),K.innerHTML='<h2 class="svelte-15vxrjm">Data Processing</h2> \n      <p class="svelte-15vxrjm">Several data processing steps were taken to prepare the raw data for\n        visualization:</p> \n\n      <div class="process-step svelte-15vxrjm"><h3 class="svelte-15vxrjm">1. Data Cleaning</h3> \n        <p class="svelte-15vxrjm">Raw data files were processed to handle missing values, outliers, and\n          inconsistencies:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Missing happiness scores were imputed where possible using data from\n            adjacent years</li> \n          <li class="svelte-15vxrjm">Countries with less than 50% data coverage across years were\n            excluded from time-series analyses</li> \n          <li class="svelte-15vxrjm">Outlier detection and validation was performed for anomalous values</li> \n          <li class="svelte-15vxrjm">Population data was rounded to the nearest thousand for consistency</li></ul></div> \n\n      <div class="process-step svelte-15vxrjm"><h3 class="svelte-15vxrjm">2. Data Integration</h3> \n        <p class="svelte-15vxrjm">The three datasets were integrated based on country and year:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Country names were standardized across all datasets (see <a href="#naming-standardization" class="svelte-15vxrjm">Naming Standardization</a>)</li> \n          <li class="svelte-15vxrjm">A unified schema was created with consistent field naming</li> \n          <li class="svelte-15vxrjm">Year fields were normalized to ensure proper temporal alignment</li> \n          <li class="svelte-15vxrjm">HDI and population data were joined to happiness data using country\n            and year as keys</li></ul></div> \n\n      <div class="process-step svelte-15vxrjm"><h3 class="svelte-15vxrjm">3. Data Transformation</h3> \n        <p class="svelte-15vxrjm">Several transformations were applied to create additional metrics:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Year-over-year change in happiness score was calculated for trend\n            analysis</li> \n          <li class="svelte-15vxrjm">Population density was derived from population and country area data</li> \n          <li class="svelte-15vxrjm">Countries were grouped by continent for regional analysis</li> \n          <li class="svelte-15vxrjm">Ranking data was calculated for each metric and year</li> \n          <li class="svelte-15vxrjm">Normalized versions of metrics were created for cross-metric\n            comparisons</li></ul></div> \n\n      <div class="process-step svelte-15vxrjm"><h3 class="svelte-15vxrjm">4. Data Export</h3> \n        <p class="svelte-15vxrjm">The processed data was exported in multiple formats:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">JSON files for direct use in the web application</li> \n          <li class="svelte-15vxrjm">Yearly data files to support filtering by specific time periods</li> \n          <li class="svelte-15vxrjm">Combined dataset for analyses that span the entire timeline</li> \n          <li class="svelte-15vxrjm">Lightweight summary dataset for initial page loads</li></ul></div>',Z=T(),J=A("section"),J.innerHTML='<h2 class="svelte-15vxrjm">Naming Standardization</h2> \n      <p class="svelte-15vxrjm">A critical challenge in this project was resolving inconsistencies in\n        country naming across datasets. The following approach was used to\n        standardize entity names:</p> \n\n      <div class="standardization-details svelte-15vxrjm"><h3 class="svelte-15vxrjm">Country Name Harmonization</h3> \n        <p class="svelte-15vxrjm">A master mapping table was created to standardize country names across\n          all datasets. This addressed several types of discrepancies:</p> \n        <table class="standardization-table svelte-15vxrjm"><thead><tr class="svelte-15vxrjm"><th class="svelte-15vxrjm">Issue Type</th> \n              <th class="svelte-15vxrjm">Example</th> \n              <th class="svelte-15vxrjm">Solution</th></tr></thead> \n          <tbody><tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">Spelling variations</td> \n              <td class="svelte-15vxrjm">&quot;United States&quot; vs. &quot;United States of America&quot; vs. &quot;USA&quot;</td> \n              <td class="svelte-15vxrjm">Mapped to standard form: &quot;United States&quot;</td></tr> \n            <tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">Transliteration differences</td> \n              <td class="svelte-15vxrjm">&quot;Cte d&#39;Ivoire&quot; vs. &quot;Ivory Coast&quot;</td> \n              <td class="svelte-15vxrjm">Used official English name: &quot;Cte d&#39;Ivoire&quot;</td></tr> \n            <tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">Political status changes</td> \n              <td class="svelte-15vxrjm">&quot;North Macedonia&quot; vs. &quot;Macedonia&quot;</td> \n              <td class="svelte-15vxrjm">Used current official name: &quot;North Macedonia&quot;</td></tr> \n            <tr class="svelte-15vxrjm"><td class="svelte-15vxrjm">Special characters</td> \n              <td class="svelte-15vxrjm">&quot;Trkiye&quot; vs. &quot;Turkey&quot;</td> \n              <td class="svelte-15vxrjm">Consistent handling of diacritics, using &quot;Trkiye&quot;</td></tr></tbody></table></div> \n\n      <div class="standardization-details svelte-15vxrjm"><h3 class="svelte-15vxrjm">Field Name Standardization</h3> \n        <p class="svelte-15vxrjm">Field names were standardized across datasets according to these\n          principles:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Use lowercase with underscores for all field names (e.g., <code class="svelte-15vxrjm">happiness_score</code>)</li> \n          <li class="svelte-15vxrjm">Use consistent prefixes for related fields (e.g., all happiness\n            factors start with the same prefix)</li> \n          <li class="svelte-15vxrjm">Avoid abbreviations unless universally recognized (e.g., <code class="svelte-15vxrjm">gdp_per_capita</code>)</li> \n          <li class="svelte-15vxrjm">Maintain consistent tense and form across similar fields</li> \n          <li class="svelte-15vxrjm">Use suffixes to indicate unit types where appropriate (e.g., <code class="svelte-15vxrjm">_percent</code>, <code class="svelte-15vxrjm">_index</code>)</li></ul></div>',Q=T(),tt=A("section"),tt.innerHTML='<h2 class="svelte-15vxrjm">Visualization Methods</h2> \n      <p class="svelte-15vxrjm">HappiScope employs several visualization techniques to represent\n        different aspects of the data:</p> \n\n      <div class="visualization-method svelte-15vxrjm"><h3 class="svelte-15vxrjm">Choropleth World Map</h3> \n        <p class="svelte-15vxrjm">A color-coded world map visualization where countries are shaded\n          according to their happiness score or other selected metrics. This\n          provides an immediate global overview of the data distribution.</p> \n        <p class="svelte-15vxrjm"><strong>Implementation details:</strong></p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">D3.js geo projection using Natural Earth data</li> \n          <li class="svelte-15vxrjm">Color scales calibrated to the data range of each metric</li> \n          <li class="svelte-15vxrjm">Interactive tooltips providing detailed information on hover</li> \n          <li class="svelte-15vxrjm">Zoom and pan capabilities for detailed exploration</li> \n          <li class="svelte-15vxrjm">Missing data indicated by a neutral gray color</li></ul></div> \n\n      <div class="visualization-method svelte-15vxrjm"><h3 class="svelte-15vxrjm">Bar Charts for Rankings</h3> \n        <p class="svelte-15vxrjm">Bar charts are used to display country rankings for various metrics,\n          making it easy to compare values across countries for a specific year.</p> \n        <p class="svelte-15vxrjm"><strong>Implementation details:</strong></p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Horizontal bars for better readability of country names</li> \n          <li class="svelte-15vxrjm">Color-coding by continent for regional patterns</li> \n          <li class="svelte-15vxrjm">Animated transitions when changing metrics or years</li> \n          <li class="svelte-15vxrjm">Value labels for precise reading</li> \n          <li class="svelte-15vxrjm">Consistent scaling for meaningful comparisons</li></ul></div> \n\n      <div class="visualization-method svelte-15vxrjm"><h3 class="svelte-15vxrjm">Line Charts for Time Series</h3> \n        <p class="svelte-15vxrjm">Line charts display trends over time for selected countries, allowing\n          users to observe changes in happiness and other metrics across the\n          years.</p> \n        <p class="svelte-15vxrjm"><strong>Implementation details:</strong></p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Multiple lines with distinct colors and patterns for country\n            differentiation</li> \n          <li class="svelte-15vxrjm">Interactive points showing exact values on hover</li> \n          <li class="svelte-15vxrjm">Smooth transitions when adding or removing countries</li> \n          <li class="svelte-15vxrjm">Optional confidence intervals where data allows</li> \n          <li class="svelte-15vxrjm">Grid lines for easier value reading</li></ul></div>',et=T(),nt=A("section"),nt.innerHTML='<h2 class="svelte-15vxrjm">Technical Implementation</h2> \n      <p class="svelte-15vxrjm">HappiScope is built using modern web technologies to ensure performance,\n        accessibility, and a rich user experience:</p> \n\n      <div class="tech-stack svelte-15vxrjm"><h3 class="svelte-15vxrjm">Framework &amp; Libraries</h3> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm"><strong>Svelte:</strong> A reactive component-based framework for building\n            the user interface</li> \n          <li class="svelte-15vxrjm"><strong>D3.js:</strong> Data visualization library powering the custom\n            charts and maps</li> \n          <li class="svelte-15vxrjm"><strong>Rollup:</strong> Module bundler for optimizing the application\n            size</li> \n          <li class="svelte-15vxrjm"><strong>Svelte-Routing:</strong> Handles client-side navigation between\n            views</li></ul></div> \n\n      <div class="tech-stack svelte-15vxrjm"><h3 class="svelte-15vxrjm">Project Architecture</h3> \n        <p class="svelte-15vxrjm">The application follows a component-based architecture:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm"><strong>Components:</strong> Reusable visualization elements (WorldMap,\n            BarChart, LineChart)</li> \n          <li class="svelte-15vxrjm"><strong>Routes:</strong> Main application views (Home, Explore, Data\n            Details, Methodology)</li> \n          <li class="svelte-15vxrjm"><strong>Stores:</strong> Svelte stores for global state management</li> \n          <li class="svelte-15vxrjm"><strong>Utils:</strong> Data loading and processing utilities</li> \n          <li class="svelte-15vxrjm"><strong>Public:</strong> Static assets and the compiled application</li></ul></div> \n\n      <div class="tech-stack svelte-15vxrjm"><h3 class="svelte-15vxrjm">Performance Optimizations</h3> \n        <p class="svelte-15vxrjm">Several strategies are employed to ensure good performance:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Data loading is deferred and cached to minimize network requests</li> \n          <li class="svelte-15vxrjm">Complex visualizations use canvas rendering for better performance\n            with large datasets</li> \n          <li class="svelte-15vxrjm">Throttling and debouncing for performance-intensive operations like\n            map interactions</li> \n          <li class="svelte-15vxrjm">Progressive loading of data, starting with summarized views</li> \n          <li class="svelte-15vxrjm">Responsive handling of window resize events</li></ul></div> \n\n      <div class="tech-stack svelte-15vxrjm"><h3 class="svelte-15vxrjm">Accessibility Considerations</h3> \n        <p class="svelte-15vxrjm">The application is designed with accessibility in mind:</p> \n        <ul class="svelte-15vxrjm"><li class="svelte-15vxrjm">Semantic HTML structure for screen reader compatibility</li> \n          <li class="svelte-15vxrjm">ARIA attributes on interactive elements</li> \n          <li class="svelte-15vxrjm">Keyboard navigation support for all interactive features</li> \n          <li class="svelte-15vxrjm">Color schemes tested for colorblindness compatibility</li> \n          <li class="svelte-15vxrjm">Alternative text representations of visualized data</li> \n          <li class="svelte-15vxrjm">Responsive design for various devices and screen sizes</li></ul></div>',rt=T(),it=A("section"),at=A("h2"),at.textContent="Data Dictionary",ot=T(),st=A("p"),st.textContent="This data dictionary documents the standardized field names used across\n        the HappiScope project, ensuring consistent interpretation of the data.",lt=T(),yt.c(),ct=T(),ut=A("section"),ut.innerHTML='<h2 class="svelte-15vxrjm">Conclusion</h2> \n      <p class="svelte-15vxrjm">The methodology outlined above represents our approach to creating a\n        robust, accurate, and insightful visualization of global happiness data.\n        Through careful data processing, standardization, and thoughtful\n        visualization design, HappiScope aims to provide meaningful insights\n        into the factors that contribute to happiness and well-being around the\n        world.</p> \n      <p class="svelte-15vxrjm">For further questions about the methodology or to access the raw data\n        used in this project, please visit our GitHub repository or contact the\n        project team.</p>',H(o,"class","svelte-15vxrjm"),H(u,"href","#introduction"),H(u,"class","svelte-15vxrjm"),B(u,"active","introduction"===e[2]),H(c,"class","svelte-15vxrjm"),H(h,"href","#data-sources"),H(h,"class","svelte-15vxrjm"),B(h,"active","data-sources"===e[2]),H(f,"class","svelte-15vxrjm"),H(m,"href","#data-processing"),H(m,"class","svelte-15vxrjm"),B(m,"active","data-processing"===e[2]),H(v,"class","svelte-15vxrjm"),H(x,"href","#naming-standardization"),H(x,"class","svelte-15vxrjm"),B(x,"active","naming-standardization"===e[2]),H(y,"class","svelte-15vxrjm"),H(_,"href","#visualization-methods"),H(_,"class","svelte-15vxrjm"),B(_,"active","visualization-methods"===e[2]),H(w,"class","svelte-15vxrjm"),H(M,"href","#technical-implementation"),H(M,"class","svelte-15vxrjm"),B(M,"active","technical-implementation"===e[2]),H(k,"class","svelte-15vxrjm"),H(N,"href","#data-dictionary"),H(N,"class","svelte-15vxrjm"),B(N,"active","data-dictionary"===e[2]),H(z,"class","svelte-15vxrjm"),H(l,"class","svelte-15vxrjm"),H(i,"class","toc-content svelte-15vxrjm"),H(r,"class","toc svelte-15vxrjm"),H(F,"class","svelte-15vxrjm"),H(O,"id","introduction"),H(O,"class","svelte-15vxrjm"),H(G,"class","svelte-15vxrjm"),H(U,"class","svelte-15vxrjm"),H(W,"id","data-sources"),H(W,"class","svelte-15vxrjm"),H(K,"id","data-processing"),H(K,"class","svelte-15vxrjm"),H(J,"id","naming-standardization"),H(J,"class","svelte-15vxrjm"),H(tt,"id","visualization-methods"),H(tt,"class","svelte-15vxrjm"),H(nt,"id","technical-implementation"),H(nt,"class","svelte-15vxrjm"),H(at,"class","svelte-15vxrjm"),H(st,"class","svelte-15vxrjm"),H(it,"id","data-dictionary"),H(it,"class","svelte-15vxrjm"),H(ut,"class","conclusion svelte-15vxrjm"),H(I,"class","content svelte-15vxrjm"),H(n,"class","methodology-container svelte-15vxrjm")},m(t,a){S(t,n,a),j(n,r),j(r,i),j(i,o),j(i,s),j(i,l),j(l,c),j(c,u),j(l,d),j(l,f),j(f,h),j(l,p),j(l,v),j(v,m),j(l,g),j(l,y),j(y,x),j(l,b),j(l,w),j(w,_),j(l,$),j(l,k),j(k,M),j(l,C),j(l,z),j(z,N),j(n,D),j(n,I),j(I,F),j(I,R),j(I,O),j(I,q),j(I,W),j(W,G),j(W,Y),j(W,U),j(W,V),vt.m(W,null),j(I,X),j(I,K),j(I,Z),j(I,J),j(I,Q),j(I,tt),j(I,et),j(I,nt),j(I,rt),j(I,it),j(it,at),j(it,ot),j(it,st),j(it,lt),yt.m(it,null),j(I,ct),j(I,ut),dt||(ft=[L(u,"click",P(e[3])),L(h,"click",P(e[4])),L(m,"click",P(e[5])),L(x,"click",P(e[6])),L(_,"click",P(e[7])),L(M,"click",P(e[8])),L(N,"click",P(e[9]))],dt=!0)},p(t,[e]){4&e&&B(u,"active","introduction"===t[2]),4&e&&B(h,"active","data-sources"===t[2]),4&e&&B(m,"active","data-processing"===t[2]),4&e&&B(x,"active","naming-standardization"===t[2]),4&e&&B(_,"active","visualization-methods"===t[2]),4&e&&B(M,"active","technical-implementation"===t[2]),4&e&&B(N,"active","data-dictionary"===t[2]),pt===(pt=ht(t))&&vt?vt.p(t,e):(vt.d(1),vt=pt(t),vt&&(vt.c(),vt.m(W,null))),gt===(gt=mt(t))&&yt?yt.p(t,e):(yt.d(1),yt=gt(t),yt&&(yt.c(),yt.m(it,null)))},i:t,o:t,d(t){t&&E(n),vt.d(),yt.d(),dt=!1,a(ft)}}}function Md(t){return["country","country_code","region","continent"].includes(t)?"Geographic":["year"].includes(t)?"Temporal":["score","gdp_per_capita","social_support","life_expectancy","freedom","corruption","generosity","dystopia_residual"].includes(t)?"Happiness Metrics":["hdi","development_category"].includes(t)?"Development":["population","pop_male","pop_female","population_density","population_category"].includes(t)?"Demographic":["weighted_score"].includes(t)?"Derived":"Other"}function Cd(t){const e=document.getElementById(t);e&&e.scrollIntoView({behavior:"smooth"})}function Sd(t,e,n){let r=null,i=!0,a="introduction";Q((async()=>{try{n(1,i=!0),n(0,r=await Te()),n(1,i=!1)}catch(t){console.error("Error loading data dictionary:",t),n(1,i=!1)}const t=document.querySelectorAll("section[id]"),e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&n(2,a=t.target.id)}))}),{threshold:.6});return t.forEach((t=>e.observe(t))),()=>{t.forEach((t=>e.unobserve(t)))}}));return[r,i,a,()=>Cd("introduction"),()=>Cd("data-sources"),()=>Cd("data-processing"),()=>Cd("naming-standardization"),()=>Cd("visualization-methods"),()=>Cd("technical-implementation"),()=>Cd("data-dictionary")]}class Ed extends Tt{constructor(t){super(),Nt(this,t,Sd,jd,s,{})}}function zd(e){let n,r,i;return{c(){n=A("span"),n.textContent="HappiScope",r=T(),i=A("span"),i.textContent="",H(n,"class","logo-text svelte-1xuyoss"),H(i,"class","logo-icon svelte-1xuyoss")},m(t,e){S(t,n,e),S(t,r,e),S(t,i,e)},p:t,d(t){t&&E(n),t&&E(r),t&&E(i)}}}function Ad(t){let e;return{c(){e=N("Home")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Nd(t){let e;return{c(){e=N("Explore Data")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Td(t){let e;return{c(){e=N("Data Sources")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Dd(t){let e;return{c(){e=N("Methodology")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Ld(t){let e;return{c(){e=N("About")},m(t,n){S(t,e,n)},d(t){t&&E(e)}}}function Pd(t){let e,n,r,i,o,s,l,c,u,d,f,h,p,v,m,g,y,x,b,w,_,$,k,M,C,z;return i=new Xt({props:{to:"/",$$slots:{default:[zd]},$$scope:{ctx:t}}}),i.$on("click",t[2]),v=new Xt({props:{to:"/",$$slots:{default:[Ad]},$$scope:{ctx:t}}}),v.$on("click",t[2]),g=new Xt({props:{to:"/explore",$$slots:{default:[Nd]},$$scope:{ctx:t}}}),g.$on("click",t[2]),x=new Xt({props:{to:"/data",$$slots:{default:[Td]},$$scope:{ctx:t}}}),x.$on("click",t[2]),w=new Xt({props:{to:"/methodology",$$slots:{default:[Dd]},$$scope:{ctx:t}}}),w.$on("click",t[2]),$=new Xt({props:{to:"/about",$$slots:{default:[Ld]},$$scope:{ctx:t}}}),$.$on("click",t[2]),{c(){e=A("nav"),n=A("div"),r=A("div"),St(i.$$.fragment),o=T(),s=A("div"),l=A("span"),c=T(),u=A("span"),d=T(),f=A("span"),h=T(),p=A("div"),St(v.$$.fragment),m=T(),St(g.$$.fragment),y=T(),St(x.$$.fragment),b=T(),St(w.$$.fragment),_=T(),St($.$$.fragment),H(r,"class","logo"),H(l,"class","svelte-1xuyoss"),H(u,"class","svelte-1xuyoss"),H(f,"class","svelte-1xuyoss"),H(s,"class","menu-toggle svelte-1xuyoss"),H(s,"tabindex","0"),H(s,"role","button"),H(s,"aria-label","Toggle navigation menu"),H(s,"aria-expanded",t[0]),H(p,"class",k="nav-links "+(t[0]?"active":"")+" svelte-1xuyoss"),H(n,"class","nav-container svelte-1xuyoss"),H(e,"class","svelte-1xuyoss")},m(a,k){S(a,e,k),j(e,n),j(n,r),Et(i,r,null),j(n,o),j(n,s),j(s,l),j(s,c),j(s,u),j(s,d),j(s,f),j(n,h),j(n,p),Et(v,p,null),j(p,m),Et(g,p,null),j(p,y),Et(x,p,null),j(p,b),Et(w,p,null),j(p,_),Et($,p,null),M=!0,C||(z=[L(s,"click",t[1]),L(s,"keydown",t[3])],C=!0)},p(t,[e]){const n={};16&e&&(n.$$scope={dirty:e,ctx:t}),i.$set(n),(!M||1&e)&&H(s,"aria-expanded",t[0]);const r={};16&e&&(r.$$scope={dirty:e,ctx:t}),v.$set(r);const a={};16&e&&(a.$$scope={dirty:e,ctx:t}),g.$set(a);const o={};16&e&&(o.$$scope={dirty:e,ctx:t}),x.$set(o);const l={};16&e&&(l.$$scope={dirty:e,ctx:t}),w.$set(l);const c={};16&e&&(c.$$scope={dirty:e,ctx:t}),$.$set(c),(!M||1&e&&k!==(k="nav-links "+(t[0]?"active":"")+" svelte-1xuyoss"))&&H(p,"class",k)},i(t){M||(wt(i.$$.fragment,t),wt(v.$$.fragment,t),wt(g.$$.fragment,t),wt(x.$$.fragment,t),wt(w.$$.fragment,t),wt($.$$.fragment,t),M=!0)},o(t){_t(i.$$.fragment,t),_t(v.$$.fragment,t),_t(g.$$.fragment,t),_t(x.$$.fragment,t),_t(w.$$.fragment,t),_t($.$$.fragment,t),M=!1},d(t){t&&E(e),zt(i),zt(v),zt(g),zt(x),zt(w),zt($),C=!1,a(z)}}}function Hd(t,e,n){let r=!1;const i=()=>n(0,r=!r);return[r,i,()=>n(0,r=!1),t=>"Enter"===t.key&&i()]}class Id extends Tt{constructor(t){super(),Nt(this,t,Hd,Pd,s,{})}}function Fd(e){let n,r,i,a,o,s,l,c,u,d,f;return{c(){n=A("footer"),r=A("div"),r.innerHTML='<div class="footer-section svelte-z3ybr4"><h3 class="svelte-z3ybr4">HappiScope</h3> \n      <p>Interactive visualization of global happiness metrics</p> \n      <p class="small svelte-z3ybr4">COM-480 Data Visualization - EPFL</p></div> \n    \n    <div class="footer-section svelte-z3ybr4"><h3 class="svelte-z3ybr4">Data Sources</h3> \n      <ul class="svelte-z3ybr4"><li class="svelte-z3ybr4"><a href="https://worldhappiness.report/" target="_blank" rel="noopener" class="svelte-z3ybr4">World Happiness Report</a></li> \n        <li class="svelte-z3ybr4"><a href="https://hdr.undp.org/data-center/human-development-index" target="_blank" rel="noopener" class="svelte-z3ybr4">Human Development Index (HDI)</a></li> \n        <li class="svelte-z3ybr4"><a href="https://population.un.org/wpp/" target="_blank" rel="noopener" class="svelte-z3ybr4">World Population Prospects</a></li></ul></div> \n    \n    <div class="footer-section svelte-z3ybr4"><h3 class="svelte-z3ybr4">Team</h3> \n      <ul class="svelte-z3ybr4"><li class="svelte-z3ybr4">Chang Jin</li> \n        <li class="svelte-z3ybr4">Rizhong Lin</li> \n        <li class="svelte-z3ybr4">Anlan Wang</li></ul></div> \n    \n    <div class="footer-section svelte-z3ybr4"><h3 class="svelte-z3ybr4">Resources</h3> \n      <ul class="svelte-z3ybr4"><li class="svelte-z3ybr4"><a href="https://github.com/yourusername/HappiScope" target="_blank" rel="noopener" class="svelte-z3ybr4">GitHub Repository</a></li> \n        <li class="svelte-z3ybr4"><a href="https://svelte.dev" target="_blank" rel="noopener" class="svelte-z3ybr4">Svelte</a></li> \n        <li class="svelte-z3ybr4"><a href="https://d3js.org" target="_blank" rel="noopener" class="svelte-z3ybr4">D3.js</a></li></ul></div>',i=T(),a=A("div"),o=A("p"),s=N(" "),l=N(e[0]),c=N(" HappiScope Project | "),u=A("a"),u.textContent="About",d=N(" | "),f=A("a"),f.textContent="Methodology",H(r,"class","footer-container svelte-z3ybr4"),H(u,"href","/about"),H(u,"class","svelte-z3ybr4"),H(f,"href","/methodology"),H(f,"class","svelte-z3ybr4"),H(a,"class","copyright svelte-z3ybr4"),H(n,"class","svelte-z3ybr4")},m(t,e){S(t,n,e),j(n,r),j(n,i),j(n,a),j(a,o),j(o,s),j(o,l),j(o,c),j(o,u),j(o,d),j(o,f)},p:t,i:t,o:t,d(t){t&&E(n)}}}function Rd(t){return[(new Date).getFullYear()]}class Od extends Tt{constructor(t){super(),Nt(this,t,Rd,Fd,s,{})}}function qd(e){let n,r,i,a,o,s,l,c,u,d;return n=new oe({props:{path:"/",component:Jc}}),i=new oe({props:{path:"/about",component:eu}}),o=new oe({props:{path:"/explore",component:Au}}),l=new oe({props:{path:"/data",component:fd}}),u=new oe({props:{path:"/methodology",component:Ed}}),{c(){St(n.$$.fragment),r=T(),St(i.$$.fragment),a=T(),St(o.$$.fragment),s=T(),St(l.$$.fragment),c=T(),St(u.$$.fragment)},m(t,e){Et(n,t,e),S(t,r,e),Et(i,t,e),S(t,a,e),Et(o,t,e),S(t,s,e),Et(l,t,e),S(t,c,e),Et(u,t,e),d=!0},p:t,i(t){d||(wt(n.$$.fragment,t),wt(i.$$.fragment,t),wt(o.$$.fragment,t),wt(l.$$.fragment,t),wt(u.$$.fragment,t),d=!0)},o(t){_t(n.$$.fragment,t),_t(i.$$.fragment,t),_t(o.$$.fragment,t),_t(l.$$.fragment,t),_t(u.$$.fragment,t),d=!1},d(t){zt(n,t),t&&E(r),zt(i,t),t&&E(a),zt(o,t),t&&E(s),zt(l,t),t&&E(c),zt(u,t)}}}function Bd(e){let n,r,i,a,o,s,l,c,u;return{c(){n=A("div"),r=A("h2"),r.textContent="Error Loading Data",i=T(),a=A("p"),o=N(e[2]),s=T(),l=A("button"),l.textContent="Try Again",H(l,"class","svelte-1bk1mlm"),H(n,"class","error-container svelte-1bk1mlm")},m(t,d){S(t,n,d),j(n,r),j(n,i),j(n,a),j(a,o),j(n,s),j(n,l),c||(u=L(l,"click",e[4]),c=!0)},p(t,e){4&e&&R(o,t[2])},i:t,o:t,d(t){t&&E(n),c=!1,u()}}}function Wd(e){let n;return{c(){n=A("div"),n.innerHTML='<div class="loading-spinner svelte-1bk1mlm"></div> \n          <p>Loading HappiScope visualization...</p>',H(n,"class","loading-container svelte-1bk1mlm")},m(t,e){S(t,n,e)},p:t,i:t,o:t,d(t){t&&E(n)}}}function Gd(t){let e,n,r,i,a,o,s,l,c;n=new Id({});const u=[Wd,Bd,qd],d=[];function f(t,e){return t[1]?0:t[2]?1:2}return a=f(t),o=d[a]=u[a](t),l=new Od({}),{c(){e=A("div"),St(n.$$.fragment),r=T(),i=A("main"),o.c(),s=T(),St(l.$$.fragment),H(i,"class","content svelte-1bk1mlm"),H(e,"class","app-container svelte-1bk1mlm")},m(t,o){S(t,e,o),Et(n,e,null),j(e,r),j(e,i),d[a].m(i,null),j(e,s),Et(l,e,null),c=!0},p(t,e){let n=a;a=f(t),a===n?d[a].p(t,e):(xt(),_t(d[n],1,1,(()=>{d[n]=null})),bt(),o=d[a],o?o.p(t,e):(o=d[a]=u[a](t),o.c()),wt(o,1),o.m(i,null))},i(t){c||(wt(n.$$.fragment,t),wt(o),wt(l.$$.fragment,t),c=!0)},o(t){_t(n.$$.fragment,t),_t(o),_t(l.$$.fragment,t),c=!1},d(t){t&&E(e),zt(n),d[a].d(),zt(l)}}}function Yd(t){let e,n;return e=new we({props:{url:t[0],basepath:t[3],$$slots:{default:[Gd]},$$scope:{ctx:t}}}),{c(){St(e.$$.fragment)},m(t,r){Et(e,t,r),n=!0},p(t,[n]){const r={};1&n&&(r.url=t[0]),38&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(wt(e.$$.fragment,t),n=!0)},o(t){_t(e.$$.fragment,t),n=!1},d(t){zt(e,t)}}}function Ud(t,e,n){let r,i;c(t,Oe,(t=>n(1,r=t))),c(t,qe,(t=>n(2,i=t)));let{url:a=""}=e;const o=window.location.hostname.includes("github.io")?"/HappiScope":"";Q((async()=>{Ye.subscribe((t=>{document.documentElement.setAttribute("data-theme",t.theme)}));try{await Xe()}catch(t){console.error("Failed to initialize app data:",t)}}));return t.$$set=t=>{"url"in t&&n(0,a=t.url)},[a,r,i,o,()=>window.location.reload()]}return new class extends Tt{constructor(t){super(),Nt(this,t,Ud,Yd,s,{url:0})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
